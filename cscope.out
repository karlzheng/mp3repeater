cscope 15 $HOME/bk/workspace/testapps/myringdroid -q 0000001307 0000172887
	@gen/com/ringdroid/BuildConfig.java

2 
·ckage
 
	gcom
.
	gršgdroid
;

4 
public
 
fš®
 cÏs 
	cBudCÚfig
 {

5 
public
 
fš®
 
boŞ—n
 
	mDEBUG
 = 
Œue
;

	@gen/com/ringdroid/R.java

8 
·ckage
 
	gcom
.
	gršgdroid
;

10 
public
 
fš®
 cÏs 
	cR
 {

11 
public
 
fš®
 cÏs 
	c©Œ
 {

13 
public
 
fš®
 cÏs 
	cd¿wabË
 {

14 
public
 
fš®
 
	gbkgnd
=0x7f020000;

15 
public
 
fš®
 
	gbkgnd_nÜm®
=0x7f020001;

16 
public
 
fš®
 
	gbkgnd_´es£d
=0x7f020002;

17 
public
 
fš®
 
	gbu‰Ú_İtiÚs
=0x7f020003;

18 
public
 
fš®
 
	gbu‰Ú_İtiÚs_bkgnd
=0x7f020004;

19 
public
 
fš®
 
	gbu‰Ú_zoom_š
=0x7f020005;

20 
public
 
fš®
 
	gbu‰Ú_zoom_out
=0x7f020006;

21 
public
 
fš®
 
	ggrid_lše
=0x7f02001f;

22 
public
 
fš®
 
	gm¬k”_Ëá
=0x7f020007;

23 
public
 
fš®
 
	gm¬k”_Ëá_focu£d
=0x7f020008;

24 
public
 
fš®
 
	gm¬k”_Ëá_nÜm®
=0x7f020009;

25 
public
 
fš®
 
	gm¬k”_Ëá_´es£d
=0x7f02000a;

26 
public
 
fš®
 
	gm¬k”_right
=0x7f02000b;

27 
public
 
fš®
 
	gm¬k”_right_focu£d
=0x7f02000c;

28 
public
 
fš®
 
	gm¬k”_right_nÜm®
=0x7f02000d;

29 
public
 
fš®
 
	gm¬k”_right_´es£d
=0x7f02000e;

30 
public
 
fš®
 
	gm’u_about
=0x7f02000f;

31 
public
 
fš®
 
	gm’u_»£t
=0x7f020010;

32 
public
 
fš®
 
	gm’u_§ve
=0x7f020011;

33 
public
 
fš®
 
	gm’u_show_®l_audio
=0x7f020012;

34 
public
 
fš®
 
	g¶ayback_šdiÿtÜ
=0x7f02001e;

35 
public
 
fš®
 
	gršgdroidlogo
=0x7f020013;

36 
public
 
fš®
 
	g£¬ch
=0x7f020014;

37 
public
 
fš®
 
	g£ËùiÚ_bÜd”
=0x7f02001d;

38 
public
 
fš®
 
	g¡¬
=0x7f020015;

39 
public
 
fš®
 
	gtimecode
=0x7f020020;

40 
public
 
fš®
 
	gtimecode_shadow
=0x7f020021;

41 
public
 
fš®
 
	gty³_®¬m
=0x7f020016;

42 
public
 
fš®
 
	gty³_bkgnd_®¬m
=0x7f020022;

43 
public
 
fš®
 
	gty³_bkgnd_music
=0x7f020025;

44 
public
 
fš®
 
	gty³_bkgnd_nÙifiÿtiÚ
=0x7f020024;

45 
public
 
fš®
 
	gty³_bkgnd_ršgtÚe
=0x7f020023;

46 
public
 
fš®
 
	gty³_bkgnd_unsuµÜ‹d
=0x7f020026;

47 
public
 
fš®
 
	gty³_music
=0x7f020017;

48 
public
 
fš®
 
	gty³_nÙifiÿtiÚ
=0x7f020018;

49 
public
 
fš®
 
	gty³_ršgtÚe
=0x7f020019;

50 
public
 
fš®
 
	gwavefÜm_£Ëùed
=0x7f02001a;

51 
public
 
fš®
 
	gwavefÜm_un£Ëùed
=0x7f02001b;

52 
public
 
fš®
 
	gwavefÜm_un£Ëùed_bkgnd_ov”Ïy
=0x7f02001c;

54 
public
 
fš®
 cÏs 
	cid
 {

55 
public
 
fš®
 
	gbkgnd
=0x7f060007;

56 
public
 
fš®
 
	gbu‰Ú_choo£_cÚù
=0x7f060001;

57 
public
 
fš®
 
	gbu‰Ú_do_nÙhšg
=0x7f060002;

58 
public
 
fš®
 
	gbu‰Ú_make_deçuÉ
=0x7f060000;

59 
public
 
fš®
 
	gÿnûl
=0x7f060018;

60 
public
 
fš®
 
	g’dm¬k”
=0x7f06000a;

61 
public
 
fš®
 
	g’d‹xt
=0x7f060014;

62 
public
 
fš®
 
	gffwd
=0x7f06000e;

63 
public
 
fš®
 
	gf’ame
=0x7f060017;

64 
public
 
fš®
 
	gšfo
=0x7f06000b;

65 
public
 
fš®
 
	gm¬k_’d
=0x7f060012;

66 
public
 
fš®
 
	gm¬k_¡¬t
=0x7f060011;

67 
public
 
fš®
 
	g¶ay
=0x7f06000c;

68 
public
 
fš®
 
	g»cÜd
=0x7f060019;

69 
public
 
fš®
 
	g»w
=0x7f06000d;

70 
public
 
fš®
 
	gršgtÚe_ty³
=0x7f060016;

71 
public
 
fš®
 
	grow_®bum
=0x7f06001c;

72 
public
 
fš®
 
	grow_¬ti¡
=0x7f06001b;

73 
public
 
fš®
 
	grow_di¥Ïy_Çme
=0x7f060006;

74 
public
 
fš®
 
	grow_icÚ
=0x7f06001a;

75 
public
 
fš®
 
	grow_İtiÚs_bu‰Ú
=0x7f06001e;

76 
public
 
fš®
 
	grow_ršgtÚe
=0x7f060004;

77 
public
 
fš®
 
	grow_¡¬»d
=0x7f060005;

78 
public
 
fš®
 
	grow_t™Ë
=0x7f06001d;

79 
public
 
fš®
 
	g§ve
=0x7f060015;

80 
public
 
fš®
 
	g£¬ch_f‹r
=0x7f060003;

81 
public
 
fš®
 
	g¡¬tm¬k”
=0x7f060009;

82 
public
 
fš®
 
	g¡¬‰ext
=0x7f060013;

83 
public
 
fš®
 
	gwavefÜm
=0x7f060008;

84 
public
 
fš®
 
	gzoom_š
=0x7f06000f;

85 
public
 
fš®
 
	gzoom_out
=0x7f060010;

87 
public
 
fš®
 cÏs 
	cÏyout
 {

88 
public
 
fš®
 
	gaá”_§ve_aùiÚ
=0x7f030000;

89 
public
 
fš®
 
	gchoo£_cÚù
=0x7f030001;

90 
public
 
fš®
 
	gcÚù_row
=0x7f030002;

91 
public
 
fš®
 
	ged™Ü
=0x7f030003;

92 
public
 
fš®
 
	gfe_§ve
=0x7f030004;

93 
public
 
fš®
 
	gmedŸ_£Ëù
=0x7f030005;

94 
public
 
fš®
 
	gmedŸ_£Ëù_row
=0x7f030006;

96 
public
 
fš®
 cÏs 
	c¡ršg
 {

97 
public
 
fš®
 
	gabout_‹xt
=0x7f040055;

121 
public
 
fš®
 
	gabout_t™Ë
=0x7f040054;

122 
public
 
fš®
 
	g®”t_no_bu‰Ú
=0x7f04003e;

123 
public
 
fš®
 
	g®”t_ok_bu‰Ú
=0x7f04003c;

124 
public
 
fš®
 
	g®”t_t™Ë_çu»
=0x7f04003b;

148 
public
 
fš®
 
	g®”t_t™Ë_sucûss
=0x7f04003a;

149 
public
 
fš®
 
	g®”t_yes_bu‰Ú
=0x7f04003d;

150 
public
 
fš®
 
	g¬ti¡_Çme
=0x7f04002f;

151 
public
 
fš®
 
	gbad_ex‹nsiÚ_”rÜ
=0x7f04004a;

152 
public
 
fš®
 
	gbu‰Ú_İtiÚs
=0x7f040007;

153 
public
 
fš®
 
	gbu‰Ú_¡¬t_»cÜd_aùiv™y
=0x7f040003;

154 
public
 
fš®
 
	gchoo£_cÚù_ršgtÚe_bu‰Ú
=0x7f04000f;

178 
public
 
fš®
 
	gchoo£_cÚù_t™Ë
=0x7f04004c;

179 
public
 
fš®
 
	gcÚfœm_d–‘e_nÚ_ršgdroid
=0x7f040036;

180 
public
 
fš®
 
	gcÚfœm_d–‘e_ršgdroid
=0x7f040035;

181 
public
 
fš®
 
	gcÚ‹xt_m’u_cÚù
=0x7f040024;

182 
public
 
fš®
 
	gcÚ‹xt_m’u_deçuÉ_nÙifiÿtiÚ
=0x7f040025;

183 
public
 
fš®
 
	gcÚ‹xt_m’u_deçuÉ_ršgtÚe
=0x7f040023;

184 
public
 
fš®
 
	gcÚ‹xt_m’u_d–‘e
=0x7f040022;

208 
public
 
fš®
 
	gcÚ‹xt_m’u_ed™
=0x7f040021;

209 
public
 
fš®
 
	gdeçuÉ_nÙifiÿtiÚ_sucûss_mes§ge
=0x7f040041;

210 
public
 
fš®
 
	gdeçuÉ_ršgtÚe_sucûss_mes§ge
=0x7f040040;

211 
public
 
fš®
 
	gd–‘e_®¬m
=0x7f040031;

212 
public
 
fš®
 
	gd–‘e_audio
=0x7f040034;

213 
public
 
fš®
 
	gd–‘e_ÿnûl_bu‰Ú
=0x7f040038;

214 
public
 
fš®
 
	gd–‘e_çed
=0x7f040039;

215 
public
 
fš®
 
	gd–‘e_music
=0x7f040033;

216 
public
 
fš®
 
	gd–‘e_nÙifiÿtiÚ
=0x7f040032;

217 
public
 
fš®
 
	gd–‘e_ok_bu‰Ú
=0x7f040037;

241 
public
 
fš®
 
	gd–‘e_ršgtÚe
=0x7f040030;

242 
public
 
fš®
 
	gd–‘e_tmp_”rÜ
=0x7f040044;

243 
public
 
fš®
 
	gdo_nÙhšg_w™h_ršgtÚe_bu‰Ú
=0x7f040010;

244 
public
 
fš®
 
	ged™_š‹Á
=0x7f04000a;

245 
public
 
fš®
 
	g’d_Ïb–
=0x7f040009;

246 
public
 
fš®
 
	g’d_m¬k”
=0x7f040014;

247 
public
 
fš®
 
	g”rÜ_£rv”_´om±
=0x7f040053;

248 
public
 
fš®
 
	gffwd
=0x7f040018;

249 
public
 
fš®
 
	gfe_§ve_bu‰Ú_ÿnûl
=0x7f040028;

250 
public
 
fš®
 
	gfe_§ve_bu‰Ú_§ve
=0x7f040027;

274 
public
 
fš®
 
	gfe_§ve_t™Ë
=0x7f040026;

298 
public
 
fš®
 
	gmaš_aùiv™y_Ïb–
=0x7f040001;

299 
public
 
fš®
 
	gmake_deçuÉ_ršgtÚe_bu‰Ú
=0x7f04000e;

300 
public
 
fš®
 
	gm’u_about
=0x7f04001e;

301 
public
 
fš®
 
	gm’u_´ivacy
=0x7f04001f;

302 
public
 
fš®
 
	gm’u_»£t
=0x7f04001d;

326 
public
 
fš®
 
	gm’u_§ve
=0x7f04001c;

327 
public
 
fš®
 
	gm’u_show_®l_audio
=0x7f040020;

328 
public
 
fš®
 
	gno_ex‹nsiÚ_”rÜ
=0x7f04004b;

329 
public
 
fš®
 
	gno_sdÿrd
=0x7f040005;

330 
public
 
fš®
 
	gno_¥aû_”rÜ
=0x7f040049;

331 
public
 
fš®
 
	gno_unique_f’ame
=0x7f040043;

332 
public
 
fš®
 
	g¶ay
=0x7f040016;

333 
public
 
fš®
 
	g¶ay_”rÜ
=0x7f040042;

345 
public
 
fš®
 
	g´og»ss_dŸlog_lßdšg
=0x7f040011;

346 
public
 
fš®
 
	g´og»ss_dŸlog_§všg
=0x7f040012;

347 
public
 
fš®
 
	g»ad_”rÜ
=0x7f040048;

348 
public
 
fš®
 
	g»cÜd_”rÜ
=0x7f040045;

349 
public
 
fš®
 
	g»wšd
=0x7f040015;

350 
public
 
fš®
 
	gršgdroid_­p_Çme
=0x7f040000;

351 
public
 
fš®
 
	gršgtÚe_Çme_Ïb–
=0x7f04002e;

352 
public
 
fš®
 
	gršgtÚe_ty³_Ïb–
=0x7f040029;

353 
public
 
fš®
 
	g§ve_bu‰Ú
=0x7f04001b;

354 
public
 
fš®
 
	g§ve_sucûss_mes§ge
=0x7f04003f;

355 
public
 
fš®
 
	gsdÿrd_»adÚly
=0x7f040004;

356 
public
 
fš®
 
	gsdÿrd_sh¬ed
=0x7f040006;

357 
public
 
fš®
 
	g£¬ch_ed™_box
=0x7f040002;

358 
public
 
fš®
 
	g£rv”_Ï‹r
=0x7f040051;

359 
public
 
fš®
 
	g£rv”_Ãv”
=0x7f040052;

360 
public
 
fš®
 
	g£rv”_´om±
=0x7f04004f;

384 
public
 
fš®
 
	g£rv”_t™Ë
=0x7f04004e;

385 
public
 
fš®
 
	g£rv”_yes
=0x7f040050;

386 
public
 
fš®
 
	g£t_deçuÉ_nÙifiÿtiÚ
=0x7f04000d;

420 
public
 
fš®
 
	g¡¬t_Ïb–
=0x7f040008;

423 
public
 
fš®
 
	g¡¬t_m¬k”
=0x7f040013;

424 
public
 
fš®
 
	g¡İ
=0x7f040017;

425 
public
 
fš®
 
	gsucûss_cÚù_ršgtÚe
=0x7f04004d;

426 
public
 
fš®
 
	gtime_£cÚds
=0x7f04000b;

427 
public
 
fš®
 
	gtoo_sm®l_”rÜ
=0x7f040046;

428 
public
 
fš®
 
	gty³_®¬m
=0x7f04002b;

429 
public
 
fš®
 
	gty³_music
=0x7f04002a;

430 
public
 
fš®
 
	gty³_nÙifiÿtiÚ
=0x7f04002c;

431 
public
 
fš®
 
	gty³_ršgtÚe
=0x7f04002d;

448 
public
 
fš®
 
	gwh©_to_do_w™h_ršgtÚe
=0x7f04000c;

449 
public
 
fš®
 
	gwr™e_”rÜ
=0x7f040047;

450 
public
 
fš®
 
	gzoom_š
=0x7f040019;

451 
public
 
fš®
 
	gzoom_out
=0x7f04001a;

453 
public
 
fš®
 cÏs 
	c¡yË
 {

454 
public
 
fš®
 
	gAudioFeInfoOv”ÏyText
=0x7f050000;

455 
public
 
fš®
 
	gChoo£CÚùBackground
=0x7f050002;

456 
public
 
fš®
 
	gHÜizÚlDivid”BÙtom
=0x7f050007;

457 
public
 
fš®
 
	gHÜizÚlDivid”Tİ
=0x7f050006;

458 
public
 
fš®
 
	gToŞb¬Background
=0x7f050001;

459 
public
 
fš®
 
	gV”tiÿlDivid”FÜLi¡
=0x7f050003;

460 
public
 
fš®
 
	gV”tiÿlDivid”Leá
=0x7f050004;

461 
public
 
fš®
 
	gV”tiÿlDivid”Right
=0x7f050005;

	@src/com/ringdroid/AfterSaveActionDialog.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	g­p
.
	gDŸlog
;

20 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹xt
;

21 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	g»s
.
	gResourûs
;

22 
impÜt
 
	gªdroid
.
	gos
.
	gMes§ge
;

23 
impÜt
 
	gªdroid
.
	gv›w
.
	gV›w
;

24 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gA¼ayAd­‹r
;

25 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gBu‰Ú
;

26 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gEd™Text
;

27 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gSpšÃr
;

29 
impÜt
 
	gjava
.
	gut
.
	gA¼ayLi¡
;

30 
impÜt
 
	gjava
.
	gut
.
	gHashM­
;

32 
public
 cÏs 
	cAá”SaveAùiÚDŸlog
 
ex‹nds
 
	mDŸlog
 {

34 
´iv©e
 
Mes§ge
 
	mmRe¥Ú£
;

36 
public
 
	$Aá”SaveAùiÚDŸlog
(
CÚ‹xt
 
cÚ‹xt
, 
Mes§ge
 
»¥Ú£
) {

37 
	`su³r
(
cÚ‹xt
);

40 
	`£tCÚ‹ÁV›w
(
R
.
Ïyout
.
aá”_§ve_aùiÚ
);

42 
	`£tT™Ë
(
R
.
¡ršg
.
®”t_t™Ë_sucûss
);

44 ((
Bu‰Ú
)
	`fšdV›wById
(
R
.
id
.
bu‰Ú_make_deçuÉ
))

45 .
	`£tOnClickLi¡’”
(
Ãw
 
V›w
.
	`OnClickLi¡’”
() {

46 
public
 
	`ÚClick
(
V›w
 
v›w
) {

47 
	`şo£AndS’dResuÉ
(
R
.
id
.
bu‰Ú_make_deçuÉ
);

50 ((
Bu‰Ú
)
	`fšdV›wById
(
R
.
id
.
bu‰Ú_choo£_cÚù
))

51 .
	`£tOnClickLi¡’”
(
Ãw
 
V›w
.
	`OnClickLi¡’”
() {

52 
public
 
	`ÚClick
(
V›w
 
v›w
) {

53 
	`şo£AndS’dResuÉ
(
R
.
id
.
bu‰Ú_choo£_cÚù
);

56 ((
Bu‰Ú
)
	`fšdV›wById
(
R
.
id
.
bu‰Ú_do_nÙhšg
))

57 .
	`£tOnClickLi¡’”
(
Ãw
 
V›w
.
	`OnClickLi¡’”
() {

58 
public
 
	`ÚClick
(
V›w
 
v›w
) {

59 
	`şo£AndS’dResuÉ
(
R
.
id
.
bu‰Ú_do_nÙhšg
);

63 
mRe¥Ú£
 = 
»¥Ú£
;

66 
´iv©e
 
	$şo£AndS’dResuÉ
(
şickedBu‰ÚId
) {

67 
mRe¥Ú£
.
¬g1
 = 
şickedBu‰ÚId
;

68 
mRe¥Ú£
.
	`£ndToT¬g‘
();

69 
	`dismiss
();

70 
	}
}

	@src/com/ringdroid/ChooseContactActivity.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	g­p
.
	gAË¹DŸlog
;

20 
impÜt
 
	gªdroid
.
	g­p
.
	gLi¡Aùiv™y
;

21 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹ÁV®ues
;

22 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹ÁResŞv”
;

23 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gDŸlogIÁ”çû
;

24 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gIÁ’t
;

25 
impÜt
 
	gªdroid
.
	gd©aba£
.
	gCursÜ
;

26 
impÜt
 
	gªdroid
.
	gd©aba£
.
	gM”geCursÜ
;

27 
impÜt
 
	gªdroid
.
	gÃt
.
	gUri
;

28 
impÜt
 
	gªdroid
.
	gos
.
	gBud
;

29 
impÜt
 
	gªdroid
.
	gos
.
	gBundË
;

30 
impÜt
 
	gªdroid
.
	gos
.
	gEnvœÚm’t
;

31 
impÜt
 
	gªdroid
.
	g´ovid”
.
	gCÚùs
;

32 
impÜt
 
	gªdroid
.
	g´ovid”
.
	gCÚùs
.
	gPeİË
;

33 
impÜt
 
	gªdroid
.
	g‹xt
.
	gEd™abË
;

34 
impÜt
 
	gªdroid
.
	g‹xt
.
	gTextW©ch”
;

35 
impÜt
 
	gªdroid
.
	gut
.
	gLog
;

36 
impÜt
 
	gªdroid
.
	gv›w
.
	gCÚ‹xtM’u
;

37 
impÜt
 
	gªdroid
.
	gv›w
.
	gCÚ‹xtM’u
.
	gCÚ‹xtM’uInfo
;

38 
impÜt
 
	gªdroid
.
	gv›w
.
	gM’u
;

39 
impÜt
 
	gªdroid
.
	gv›w
.
	gM’uI‹m
;

40 
impÜt
 
	gªdroid
.
	gv›w
.
	gV›w
;

41 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAd­‹rV›w
.
	gAd­‹rCÚ‹xtM’uInfo
;

42 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAd­‹rV›w
.
	gOnI‹mClickLi¡’”
;

43 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAd­‹rV›w
;

44 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gBu‰Ú
;

45 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gLi¡Ad­‹r
;

46 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gSim¶eCursÜAd­‹r
;

47 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gTextV›w
;

48 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gTß¡
;

50 
impÜt
 
	gjava
.
	gio
.
	gFe
;

51 
impÜt
 
	gjava
.
	gÏng
.
	g»æeù
.
	gM‘hod
;

52 
impÜt
 
	gjava
.
	gut
.
	gA¼ayLi¡
;

53 
impÜt
 
	gjava
.
	gut
.
	gA¼ays
;

59 
public
 cÏs 
	cChoo£CÚùAùiv™y


60 
ex‹nds
 
Li¡Aùiv™y


61 
im¶em’ts
 
	mTextW©ch”


63 
´iv©e
 
TextV›w
 
	mmF‹r
;

64 
´iv©e
 
Sim¶eCursÜAd­‹r
 
	mmAd­‹r
;

65 
´iv©e
 
Uri
 
	mmRšgtÚeUri
;

67 
public
 
	$Choo£CÚùAùiv™y
() {

73 @
Ov”ride


74 
public
 
	$ÚC»©e
(
BundË
 
icişe
) {

75 
su³r
.
	`ÚC»©e
(
icişe
);

77 
	`£tT™Ë
(
R
.
¡ršg
.
choo£_cÚù_t™Ë
);

79 
IÁ’t
 
š‹Á
 = 
	`g‘IÁ’t
();

80 
mRšgtÚeUri
 = 
š‹Á
.
	`g‘D©a
();

83 
	`£tCÚ‹ÁV›w
(
R
.
Ïyout
.
choo£_cÚù
);

85 
Œy
 {

86 
mAd­‹r
 = 
Ãw
 
	`Sim¶eCursÜAd­‹r
(

87 
this
,

89 
R
.
Ïyout
.
cÚù_row
,

91 
	`ü—‹CursÜ
(""),

93 
Ãw
 
SŒšg
[] {

94 
PeİË
.
CUSTOM_RINGTONE
,

95 
PeİË
.
STARRED
,

96 
PeİË
.
DISPLAY_NAME
 },

98 
Ãw
 [] {

99 
R
.
id
.
row_ršgtÚe
,

100 
R
.
id
.
row_¡¬»d
,

101 
R
.
id
.
row_di¥Ïy_Çme
 });

103 
mAd­‹r
.
	`£tV›wBšd”
(
Ãw
 
Sim¶eCursÜAd­‹r
.
	`V›wBšd”
() {

104 
public
 
boŞ—n
 
	`£tV›wV®ue
(
V›w
 
v›w
,

105 
CursÜ
 
cursÜ
,

106 
cŞumnIndex
) {

107 
SŒšg
 
Çme
 = 
cursÜ
.
	`g‘CŞumnName
(
cŞumnIndex
);

108 
SŒšg
 
v®ue
 = 
cursÜ
.
	`g‘SŒšg
(
cŞumnIndex
);

109 ià(
Çme
.
	`equ®s
(
PeİË
.
CUSTOM_RINGTONE
)) {

110 ià(
v®ue
 !ğ
nuÎ
 && v®ue.
	`Ëngth
() > 0) {

111 
v›w
.
	`£tVisib™y
(
V›w
.
VISIBLE
);

113 
v›w
.
	`£tVisib™y
(
V›w
.
INVISIBLE
);

115  
Œue
;

117 ià(
Çme
.
	`equ®s
(
PeİË
.
STARRED
)) {

118 ià(
v®ue
 !ğ
nuÎ
 && v®ue.
	`equ®s
("1")) {

119 
v›w
.
	`£tVisib™y
(
V›w
.
VISIBLE
);

121 
v›w
.
	`£tVisib™y
(
V›w
.
INVISIBLE
);

123  
Œue
;

126  
çl£
;

130 
	`£tLi¡Ad­‹r
(
mAd­‹r
);

133 
	`g‘Li¡V›w
().
	`£tOnI‹mClickLi¡’”
(
Ãw
 
	`OnI‹mClickLi¡’”
() {

134 
public
 
	`ÚI‹mClick
(
Ad­‹rV›w
 
·»Á
,

135 
V›w
 
v›w
,

136 
pos™iÚ
,

137 
id
) {

138 
	`assignRšgtÚeToCÚù
();

142 } 
	`ÿtch
 (
Secur™yExû±iÚ
 
e
) {

144 
Log
.
	`e
("Ršgdroid", 
e
.
	`toSŒšg
());

147 
mF‹r
 = (
TextV›w
è
	`fšdV›wById
(
R
.
id
.
£¬ch_f‹r
);

148 ià(
mF‹r
 !ğ
nuÎ
) {

149 
mF‹r
.
	`addTextChªgedLi¡’”
(
this
);

151 
	}
}

153 
´iv©e
 
boŞ—n
 
	$isEşaœOrL©”
() {

154  
Bud
.
VERSION
.
SDK_INT
 >= 5;

155 
	}
}

157 
´iv©e
 
Uri
 
	$g‘CÚùCÚ‹ÁUri
() {

158 ià(
	`isEşaœOrL©”
()) {

160  
Uri
.
	`·r£
("content://com.android.contacts/contacts");

162  
CÚùs
.
PeİË
.
CONTENT_URI
;

164 
	}
}

166 
´iv©e
 
	$assignRšgtÚeToCÚù
() {

167 
CursÜ
 
c
 = 
mAd­‹r
.
	`g‘CursÜ
();

168 
d©aIndex
 = 
c
.
	`g‘CŞumnIndexOrThrow
(
PeİË
.
_ID
);

169 
SŒšg
 
cÚùId
 = 
c
.
	`g‘SŒšg
(
d©aIndex
);

171 
d©aIndex
 = 
c
.
	`g‘CŞumnIndexOrThrow
(
PeİË
.
DISPLAY_NAME
);

172 
SŒšg
 
di¥ÏyName
 = 
c
.
	`g‘SŒšg
(
d©aIndex
);

174 
Uri
 
uri
 = Uri.
	`w™hAµ’dedP©h
(
	`g‘CÚùCÚ‹ÁUri
(), 
cÚùId
);

176 
CÚ‹ÁV®ues
 
v®ues
 = 
Ãw
 
	`CÚ‹ÁV®ues
();

177 
v®ues
.
	`put
(
PeİË
.
CUSTOM_RINGTONE
, 
mRšgtÚeUri
.
	`toSŒšg
());

178 
	`g‘CÚ‹ÁResŞv”
().
	`upd©e
(
uri
, 
v®ues
, 
nuÎ
,‚ull);

180 
SŒšg
 
mes§ge
 =

181 
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
sucûss_cÚù_ršgtÚe
) +

183 
di¥ÏyName
;

185 
Tß¡
.
	`makeText
(
this
, 
mes§ge
, Tß¡.
LENGTH_SHORT
)

186 .
	`show
();

187 
	`fšish
();

189 
	}
}

191 
´iv©e
 
CursÜ
 
	$ü—‹CursÜ
(
SŒšg
 
f‹r
) {

192 
SŒšg
 
£ËùiÚ
;

193 ià(
f‹r
 !ğ
nuÎ
 && f‹r.
	`Ëngth
() > 0) {

194 
£ËùiÚ
 = "(DISPLAY_NAME LIKE \"%" + 
f‹r
 + "%\")";

196 
£ËùiÚ
 = 
nuÎ
;

198 
CursÜ
 
cursÜ
 = 
	`mªagedQu”y
(

199 
	`g‘CÚùCÚ‹ÁUri
(),

200 
Ãw
 
SŒšg
[] {

201 
PeİË
.
_ID
,

202 
PeİË
.
CUSTOM_RINGTONE
,

203 
PeİË
.
DISPLAY_NAME
,

204 
PeİË
.
LAST_TIME_CONTACTED
,

205 
PeİË
.
STARRED
,

206 
PeİË
.
TIMES_CONTACTED
 },

207 
£ËùiÚ
,

208 
nuÎ
,

214 
Log
.
	`i
("Ršgdroid", 
cursÜ
.
	`g‘CouÁ
() + " contacts");

216  
cursÜ
;

217 
	}
}

219 
public
 
	$befÜeTextChªged
(
Ch¬Sequ’û
 
s
, 
¡¬t
,

220 
couÁ
, 
aá”
) {

221 
	}
}

223 
public
 
	$ÚTextChªged
(
Ch¬Sequ’û
 
s
,

224 
¡¬t
, 
befÜe
, 
couÁ
) {

225 
	}
}

227 
public
 
	$aá”TextChªged
(
Ed™abË
 
s
) {

228 
SŒšg
 
f‹rSŒ
 = 
mF‹r
.
	`g‘Text
().
	`toSŒšg
();

229 
mAd­‹r
.
	`chªgeCursÜ
(
	`ü—‹CursÜ
(
f‹rSŒ
));

230 
	}
}

	@src/com/ringdroid/FileSaveDialog.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	g­p
.
	gDŸlog
;

20 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹xt
;

21 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	g»s
.
	gResourûs
;

22 
impÜt
 
	gªdroid
.
	gos
.
	gMes§ge
;

23 
impÜt
 
	gªdroid
.
	gut
.
	gLog
;

24 
impÜt
 
	gªdroid
.
	gv›w
.
	gV›w
;

25 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAd­‹rV›w
;

26 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAd­‹rV›w
.
	gOnI‹mS–eùedLi¡’”
;

27 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gA¼ayAd­‹r
;

28 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gBu‰Ú
;

29 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gEd™Text
;

30 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gSpšÃr
;

32 
impÜt
 
	gjava
.
	gut
.
	gA¼ayLi¡
;

33 
impÜt
 
	gjava
.
	gut
.
	gHashM­
;

35 
public
 cÏs 
	cFeSaveDŸlog
 
ex‹nds
 
	mDŸlog
 {

39 
public
 
fš®
 
	mFILE_KIND_MUSIC
 = 0;

40 
public
 
fš®
 
	mFILE_KIND_ALARM
 = 1;

41 
public
 
fš®
 
	mFILE_KIND_NOTIFICATION
 = 2;

42 
public
 
fš®
 
	mFILE_KIND_RINGTONE
 = 3;

44 
´iv©e
 
SpšÃr
 
	mmTy³SpšÃr
;

45 
´iv©e
 
Ed™Text
 
	mmF’ame
;

46 
´iv©e
 
Mes§ge
 
	mmRe¥Ú£
;

47 
´iv©e
 
SŒšg
 
	mmOrigš®Name
;

48 
´iv©e
 
	mA¼ayLi¡
<
	mSŒšg
> 
	mmTy³A¼ay
;

49 
´iv©e
 
	mmP»viousS–eùiÚ
;

56 
public
 
SŒšg
 
	$KšdToName
(
kšd
) {

57 
kšd
) {

60 
FILE_KIND_MUSIC
:

62 
FILE_KIND_ALARM
:

64 
FILE_KIND_NOTIFICATION
:

66 
FILE_KIND_RINGTONE
:

71 
public
 
	$FeSaveDŸlog
(
CÚ‹xt
 
cÚ‹xt
,

72 
Resourûs
 
»sourûs
,

73 
SŒšg
 
Üigš®Name
,

74 
Mes§ge
 
»¥Ú£
) {

75 
	`su³r
(
cÚ‹xt
);

78 
	`£tCÚ‹ÁV›w
(
R
.
Ïyout
.
fe_§ve
);

80 
	`£tT™Ë
(
»sourûs
.
	`g‘SŒšg
(
R
.
¡ršg
.
fe_§ve_t™Ë
));

82 
mTy³A¼ay
 = 
Ãw
 
A¼ayLi¡
<
SŒšg
>();

83 
mTy³A¼ay
.
	`add
(
»sourûs
.
	`g‘SŒšg
(
R
.
¡ršg
.
ty³_music
));

84 
mTy³A¼ay
.
	`add
(
»sourûs
.
	`g‘SŒšg
(
R
.
¡ršg
.
ty³_®¬m
));

85 
mTy³A¼ay
.
	`add
(
»sourûs
.
	`g‘SŒšg
(
R
.
¡ršg
.
ty³_nÙifiÿtiÚ
));

86 
mTy³A¼ay
.
	`add
(
»sourûs
.
	`g‘SŒšg
(
R
.
¡ršg
.
ty³_ršgtÚe
));

88 
mF’ame
 = (
Ed™Text
)
	`fšdV›wById
(
R
.
id
.
f’ame
);

89 
mOrigš®Name
 = 
Üigš®Name
;

91 
A¼ayAd­‹r
<
SŒšg
> 
ad­‹r
 = 
Ãw
 ArrayAdapter<String>(

92 
cÚ‹xt
, 
ªdroid
.
R
.
Ïyout
.
sim¶e_¥šÃr_™em
, 
mTy³A¼ay
);

93 
ad­‹r
.
	`£tDrİDownV›wResourû
(

94 
ªdroid
.
R
.
Ïyout
.
sim¶e_¥šÃr_drİdown_™em
);

95 
mTy³SpšÃr
 = (
SpšÃr
è
	`fšdV›wById
(
R
.
id
.
ršgtÚe_ty³
);

96 
mTy³SpšÃr
.
	`£tAd­‹r
(
ad­‹r
);

97 
mTy³SpšÃr
.
	`£tS–eùiÚ
(
FILE_KIND_RINGTONE
);

98 
mP»viousS–eùiÚ
 = 
FILE_KIND_RINGTONE
;

100 
	`£tF’ameEd™BoxFromName
(
çl£
);

102 
mTy³SpšÃr
.
	`£tOnI‹mS–eùedLi¡’”
(
Ãw
 
	`OnI‹mS–eùedLi¡’”
() {

103 
public
 
	`ÚI‹mS–eùed
(
Ad­‹rV›w
 
·»Á
,

104 
V›w
 
v
,

105 
pos™iÚ
,

106 
id
) {

107 
	`£tF’ameEd™BoxFromName
(
Œue
);

109 
public
 
	`ÚNÙhšgS–eùed
(
Ad­‹rV›w
 
·»Á
) {

113 
Bu‰Ú
 
§ve
 = (Bu‰Ú)
	`fšdV›wById
(
R
.
id
.save);

114 
§ve
.
	`£tOnClickLi¡’”
(
§veLi¡’”
);

115 
Bu‰Ú
 
ÿnûl
 = (Bu‰Ú)
	`fšdV›wById
(
R
.
id
.cancel);

116 
ÿnûl
.
	`£tOnClickLi¡’”
(
ÿnûlLi¡’”
);

117 
mRe¥Ú£
 = 
»¥Ú£
;

118 
	}
}

120 
´iv©e
 
	$£tF’ameEd™BoxFromName
(
boŞ—n
 
ÚlyIfNÙEd™ed
) {

121 ià(
ÚlyIfNÙEd™ed
) {

122 
Ch¬Sequ’û
 
cu¼’tText
 = 
mF’ame
.
	`g‘Text
();

123 
SŒšg
 
ex³ùedText
 = 
mOrigš®Name
 + " " +

124 
mTy³A¼ay
.
	`g‘
(
mP»viousS–eùiÚ
);

126 ià(!
ex³ùedText
.
	`cÚ‹ÁEqu®s
(
cu¼’tText
)) {

131 
ÃwS–eùiÚ
 = 
mTy³SpšÃr
.
	`g‘S–eùedI‹mPos™iÚ
();

132 
SŒšg
 
ÃwSuffix
 = 
mTy³A¼ay
.
	`g‘
(
ÃwS–eùiÚ
);

133 
mF’ame
.
	`£tText
(
mOrigš®Name
 + " " + 
ÃwSuffix
);

134 
mP»viousS–eùiÚ
 = 
mTy³SpšÃr
.
	`g‘S–eùedI‹mPos™iÚ
();

135 
	}
}

137 
´iv©e
 
	gV›w
.
OnClickLi¡’”
 
	g§veLi¡’”
 = 
Ãw
 
V›w
.
	$OnClickLi¡’”
() {

138 
public
 
	`ÚClick
(
V›w
 
v›w
) {

139 
mRe¥Ú£
.
obj
 = 
mF’ame
.
	`g‘Text
();

140 
mRe¥Ú£
.
¬g1
 = 
mTy³SpšÃr
.
	`g‘S–eùedI‹mPos™iÚ
();

141 
mRe¥Ú£
.
	`£ndToT¬g‘
();

142 
	`dismiss
();

144 
	}
};

146 
´iv©e
 
	gV›w
.
OnClickLi¡’”
 
	gÿnûlLi¡’”
 = 
Ãw
 
V›w
.
	$OnClickLi¡’”
() {

147 
public
 
	`ÚClick
(
V›w
 
v›w
) {

148 
	`dismiss
();

150 
	}
};

	@src/com/ringdroid/MarkerView.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹xt
;

20 
impÜt
 
	gªdroid
.
	gg¿phics
.
	gCªvas
;

21 
impÜt
 
	gªdroid
.
	gg¿phics
.
	gPašt
;

22 
impÜt
 
	gªdroid
.
	gg¿phics
.
	gP©h
;

23 
impÜt
 
	gªdroid
.
	gg¿phics
.
	gReù
;

24 
impÜt
 
	gªdroid
.
	gut
.
	gA‰ribu‹S‘
;

25 
impÜt
 
	gªdroid
.
	gv›w
.
	gKeyEv’t
;

26 
impÜt
 
	gªdroid
.
	gv›w
.
	gMÙiÚEv’t
;

27 
impÜt
 
	gªdroid
.
	gv›w
.
	gV›w
;

28 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gImageV›w
;

40 
public
 cÏs 
	cM¬k”V›w
 
ex‹nds
 
	mImageV›w
 {

42 
public
 
š‹rçû
 
	mM¬k”Li¡’”
 {

43 
public
 
m¬k”TouchS¹
(
M¬k”V›w
 
m¬k”
, 
pos
);

44 
public
 
m¬k”TouchMove
(
M¬k”V›w
 
m¬k”
, 
pos
);

45 
public
 
m¬k”TouchEnd
(
M¬k”V›w
 
m¬k”
);

46 
public
 
m¬k”Focus
(
M¬k”V›w
 
m¬k”
);

47 
public
 
m¬k”Leá
(
M¬k”V›w
 
m¬k”
, 
v–oc™y
);

48 
public
 
m¬k”Right
(
M¬k”V›w
 
m¬k”
, 
v–oc™y
);

49 
public
 
m¬k”EÁ”
(
M¬k”V›w
 
m¬k”
);

50 
public
 
m¬k”KeyUp
();

51 
public
 
m¬k”D¿w
();

54 
´iv©e
 
	gmV–oc™y
;

55 
´iv©e
 
M¬k”Li¡’”
 
	gmLi¡’”
;

56 
´iv©e
 
	gmTouchS¹
;

57 
´iv©e
 
	gmTouchLa¡
;

59 
public
 
	$M¬k”V›w
(
CÚ‹xt
 
cÚ‹xt
, 
A‰ribu‹S‘
 
©Œs
) {

60 
	`su³r
(
cÚ‹xt
, 
©Œs
);

63 
	`£tFocu§bË
(
Œue
);

65 
mV–oc™y
 = 0;

66 
mLi¡’”
 = 
nuÎ
;

67 
	}
}

69 
public
 
	$£tLi¡’”
(
M¬k”Li¡’”
 
li¡’”
) {

70 
mLi¡’”
 = 
li¡’”
;

71 
	}
}

73 @
Ov”ride


74 
public
 
boŞ—n
 
	$ÚTouchEv’t
(
MÙiÚEv’t
 
ev’t
) {

75 
ev’t
.
	`g‘AùiÚ
()) {

76 
MÙiÚEv’t
.
ACTION_DOWN
:

77 
	`»que¡Focus
();

80 
mLi¡’”
.
	`m¬k”TouchS¹
(
this
, 
ev’t
.
	`g‘RawX
());

82 
MÙiÚEv’t
.
ACTION_MOVE
:

85 
mLi¡’”
.
	`m¬k”TouchMove
(
this
, 
ev’t
.
	`g‘RawX
());

87 
MÙiÚEv’t
.
ACTION_UP
:

88 
mLi¡’”
.
	`m¬k”TouchEnd
(
this
);

91  
Œue
;

92 
	}
}

94 @
Ov”ride


95 
´Ùeùed
 
	$ÚFocusChªged
(
boŞ—n
 
gašFocus
, 
dœeùiÚ
,

96 
Reù
 
´eviou¦yFocu£dReù
) {

97 ià(
gašFocus
 && 
mLi¡’”
 !ğ
nuÎ
)

98 
mLi¡’”
.
	`m¬k”Focus
(
this
);

99 
su³r
.
	`ÚFocusChªged
(
gašFocus
, 
dœeùiÚ
, 
´eviou¦yFocu£dReù
);

100 
	}
}

102 @
Ov”ride


103 
´Ùeùed
 
	$ÚD¿w
(
Cªvas
 
ÿnvas
) {

104 
su³r
.
	`ÚD¿w
(
ÿnvas
);

106 ià(
mLi¡’”
 !ğ
nuÎ
)

107 
mLi¡’”
.
	`m¬k”D¿w
();

108 
	}
}

110 @
Ov”ride


111 
public
 
boŞ—n
 
	$ÚKeyDown
(
keyCode
, 
KeyEv’t
 
ev’t
) {

112 
mV–oc™y
++;

113 
v
 = ()
M©h
.
	`sq¹
(1 + 
mV–oc™y
 / 2);

114 ià(
mLi¡’”
 !ğ
nuÎ
) {

115 ià(
keyCode
 =ğ
KeyEv’t
.
KEYCODE_DPAD_LEFT
) {

116 
mLi¡’”
.
	`m¬k”Leá
(
this
, 
v
);

117  
Œue
;

118 } ià(
keyCode
 =ğ
KeyEv’t
.
KEYCODE_DPAD_RIGHT
) {

119 
mLi¡’”
.
	`m¬k”Right
(
this
, 
v
);

120  
Œue
;

121 } ià(
keyCode
 =ğ
KeyEv’t
.
KEYCODE_DPAD_CENTER
) {

122 
mLi¡’”
.
	`m¬k”EÁ”
(
this
);

123  
Œue
;

127  
su³r
.
	`ÚKeyDown
(
keyCode
, 
ev’t
);

128 
	}
}

130 @
Ov”ride


131 
public
 
boŞ—n
 
	$ÚKeyUp
(
keyCode
, 
KeyEv’t
 
ev’t
) {

132 
mV–oc™y
 = 0;

133 ià(
mLi¡’”
 !ğ
nuÎ
)

134 
mLi¡’”
.
	`m¬k”KeyUp
();

135  
su³r
.
	`ÚKeyDown
(
keyCode
, 
ev’t
);

136 
	}
}

	@src/com/ringdroid/RingdroidEditActivity.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	g­p
.
	gAùiv™y
;

20 
impÜt
 
	gªdroid
.
	g­p
.
	gAË¹DŸlog
;

21 
impÜt
 
	gªdroid
.
	g­p
.
	gProg»ssDŸlog
;

22 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹ÁV®ues
;

23 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹xt
;

24 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gDŸlogIÁ”çû
;

25 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gIÁ’t
;

26 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gSh¬edP»ã»nûs
;

27 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	g»s
.
	gCÚfigu¿tiÚ
;

28 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	g»s
.
	gResourûs
;

29 
impÜt
 
	gªdroid
.
	gd©aba£
.
	gCursÜ
;

30 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gAudioMªag”
;

31 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gMedŸPÏy”
.
	gOnCom¶‘iÚLi¡’”
;

32 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gMedŸPÏy”
.
	gOnS“kCom¶‘eLi¡’”
;

33 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gMedŸPÏy”
;

34 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gRšgtÚeMªag”
;

35 
impÜt
 
	gªdroid
.
	gÃt
.
	gUri
;

36 
impÜt
 
	gªdroid
.
	gos
.
	gBud
;

37 
impÜt
 
	gªdroid
.
	gos
.
	gBundË
;

38 
impÜt
 
	gªdroid
.
	gos
.
	gEnvœÚm’t
;

39 
impÜt
 
	gªdroid
.
	gos
.
	gHªdËr
;

40 
impÜt
 
	gªdroid
.
	gos
.
	gMes§ge
;

41 
impÜt
 
	gªdroid
.
	g´ovid”
.
	gCÚùs
.
	gPeİË
;

42 
impÜt
 
	gªdroid
.
	g´ovid”
.
	gMedŸStÜe
;

43 
impÜt
 
	gªdroid
.
	g´ovid”
.
	gS‘tšgs
;

44 
impÜt
 
	gªdroid
.
	g‹xt
.
	gEd™abË
;

45 
impÜt
 
	gªdroid
.
	g‹xt
.
	gm‘hod
.
	gLškMovem’tM‘hod
;

46 
impÜt
 
	gªdroid
.
	g‹xt
.
	gS·ÂabËSŒšg
;

47 
impÜt
 
	gªdroid
.
	g‹xt
.
	gTextW©ch”
;

48 
impÜt
 
	gªdroid
.
	g‹xt
.
	gut
.
	gLškify
;

49 
impÜt
 
	gªdroid
.
	gut
.
	gDi¥ÏyM‘rics
;

50 
impÜt
 
	gªdroid
.
	gut
.
	gLog
;

51 
impÜt
 
	gªdroid
.
	gv›w
.
	gKeyEv’t
;

52 
impÜt
 
	gªdroid
.
	gv›w
.
	gM’u
;

53 
impÜt
 
	gªdroid
.
	gv›w
.
	gM’uI‹m
;

54 
impÜt
 
	gªdroid
.
	gv›w
.
	gV›w
;

55 
impÜt
 
	gªdroid
.
	gv›w
.
	gV›w
.
	gOnClickLi¡’”
;

56 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAbsŞu‹Layout
;

57 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gBu‰Ú
;

58 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gImageBu‰Ú
;

59 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gImageV›w
;

60 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gTextV›w
;

61 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gTß¡
;

63 
impÜt
 
	gcom
.
	gršgdroid
.
	gsoundfe
.
	gCh—pSoundFe
;

65 
impÜt
 
	gjava
.
	gio
.
	gBy‹A¼ayOuutSŒ—m
;

66 
impÜt
 
	gjava
.
	gio
.
	gFe
;

67 
impÜt
 
	gjava
.
	gio
.
	gFeIÅutSŒ—m
;

68 
impÜt
 
	gjava
.
	gio
.
	gIÅutSŒ—m
;

69 
impÜt
 
	gjava
.
	gio
.
	gOuutSŒ—m
;

70 
impÜt
 
	gjava
.
	gio
.
	gPrštWr™”
;

71 
impÜt
 
	gjava
.
	gio
.
	gRªdomAcûssFe
;

72 
impÜt
 
	gjava
.
	gÃt
.
	gURLEncod”
;

73 
impÜt
 
	gjava
.
	gut
.
	gHashM­
;

74 
impÜt
 
	gjava
.
	gut
.
	gRªdom
;

76 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	gH‰pRe¥Ú£
;

77 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	gş›Á
.
	gCl›ÁPrÙocŞExû±iÚ
;

78 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	gş›Á
.
	gH‰pCl›Á
;

79 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	gş›Á
.
	gm‘hods
.
	gH‰pPo¡
;

80 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	g’t™y
.
	gBy‹A¼ayEÁ™y
;

81 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	gim¶
.
	gş›Á
.
	gDeçuÉH‰pCl›Á
;

82 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	g·¿ms
.
	gBasicH‰pP¬ams
;

83 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	g·¿ms
.
	gH‰pCÚÃùiÚP¬ams
;

84 
impÜt
 
	gÜg
.
	g­ache
.
	gh‰p
.
	g·¿ms
.
	gH‰pP¬ams
;

91 
public
 
şass
 
RšgdroidEd™Aùiv™y
 
ex‹nds
 
Aùiv™y


92 
im¶em’ts
 
	gM¬k”V›w
.
	gM¬k”Li¡’”
,

93 
	gWavefÜmV›w
.
	gWavefÜmLi¡’”


95 
´iv©e
 
	gmLßdšgS¹Time
;

96 
´iv©e
 
	gmLßdšgLa¡Upd©eTime
;

97 
´iv©e
 
boŞ—n
 
	gmLßdšgK“pGošg
;

98 
´iv©e
 
Prog»ssDŸlog
 
	gmProg»ssDŸlog
;

99 
´iv©e
 
Ch—pSoundFe
 
	gmSoundFe
;

100 
´iv©e
 
Fe
 
	gmFe
;

101 
´iv©e
 
SŒšg
 
	gmF’ame
;

102 
´iv©e
 
SŒšg
 
	gmD¡F’ame
;

103 
´iv©e
 
SŒšg
 
	gmA¹i¡
;

104 
´iv©e
 
SŒšg
 
	gmAlbum
;

105 
´iv©e
 
SŒšg
 
	gmG’»
;

106 
´iv©e
 
SŒšg
 
	gmT™Ë
;

107 
´iv©e
 
	gmY—r
;

108 
´iv©e
 
SŒšg
 
	gmEx‹nsiÚ
;

109 
´iv©e
 
SŒšg
 
	gmRecÜdšgF’ame
;

110 
´iv©e
 
	gmNewFeKšd
;

111 
´iv©e
 
Uri
 
	gmRecÜdšgUri
;

112 
´iv©e
 
boŞ—n
 
	gmWasG‘CÚ‹ÁIÁ’t
;

113 
´iv©e
 
WavefÜmV›w
 
	gmWavefÜmV›w
;

114 
´iv©e
 
M¬k”V›w
 
	gmS¹M¬k”
;

115 
´iv©e
 
M¬k”V›w
 
	gmEndM¬k”
;

116 
´iv©e
 
TextV›w
 
	gmS¹Text
;

117 
´iv©e
 
TextV›w
 
	gmEndText
;

118 
´iv©e
 
TextV›w
 
	gmInfo
;

119 
´iv©e
 
ImageBu‰Ú
 
	gmPÏyBu‰Ú
;

120 
´iv©e
 
ImageBu‰Ú
 
	gmRewšdBu‰Ú
;

121 
´iv©e
 
ImageBu‰Ú
 
	gmFfwdBu‰Ú
;

122 
´iv©e
 
ImageBu‰Ú
 
	gmZoomInBu‰Ú
;

123 
´iv©e
 
ImageBu‰Ú
 
	gmZoomOutBu‰Ú
;

124 
´iv©e
 
ImageBu‰Ú
 
	gmSaveBu‰Ú
;

125 
´iv©e
 
boŞ—n
 
	gmKeyDown
;

126 
´iv©e
 
SŒšg
 
	gmC­tiÚ
 = "";

127 
´iv©e
 
	gmWidth
;

128 
´iv©e
 
	gmMaxPos
;

129 
´iv©e
 
	gmS¹Pos
;

130 
´iv©e
 
	gmEndPos
;

131 
´iv©e
 
boŞ—n
 
	gmS¹VisibË
;

132 
´iv©e
 
boŞ—n
 
	gmEndVisibË
;

133 
´iv©e
 
	gmLa¡Di¥ÏyedS¹Pos
;

134 
´iv©e
 
	gmLa¡Di¥ÏyedEndPos
;

135 
´iv©e
 
	gmOff£t
;

136 
´iv©e
 
	gmOff£tGßl
;

137 
´iv©e
 
	gmFlšgV–oc™y
;

138 
´iv©e
 
	gmPÏyS¹M£c
;

139 
´iv©e
 
	gmPÏyS¹Off£t
;

140 
´iv©e
 
	gmPÏyEndM£c
;

141 
´iv©e
 
HªdËr
 
	gmHªdËr
;

142 
´iv©e
 
boŞ—n
 
	gmIsPÏyšg
;

143 
´iv©e
 
MedŸPÏy”
 
	gmPÏy”
;

144 
´iv©e
 
boŞ—n
 
	gmCªS“kAccu¿‹ly
;

145 
´iv©e
 
boŞ—n
 
	gmTouchD¿ggšg
;

146 
´iv©e
 
	gmTouchS¹
;

147 
´iv©e
 
	gmTouchIn™ŸlOff£t
;

148 
´iv©e
 
	gmTouchIn™ŸlS¹Pos
;

149 
´iv©e
 
	gmTouchIn™ŸlEndPos
;

150 
´iv©e
 
	gmWavefÜmTouchS¹M£c
;

151 
´iv©e
 
	gmD’s™y
;

152 
´iv©e
 
	gmM¬k”LeáIn£t
;

153 
´iv©e
 
	gmM¬k”RightIn£t
;

154 
´iv©e
 
	gmM¬k”TİOff£t
;

155 
´iv©e
 
	gmM¬k”BÙtomOff£t
;

158 
´iv©e
 
fš®
 
	gCMD_SAVE
 = 1;

159 
´iv©e
 
fš®
 
	gCMD_RESET
 = 2;

160 
´iv©e
 
fš®
 
	gCMD_ABOUT
 = 3;

163 
´iv©e
 
fš®
 
	gREQUEST_CODE_RECORD
 = 1;

164 
´iv©e
 
fš®
 
	gREQUEST_CODE_CHOOSE_CONTACT
 = 2;

169 
public
 
fš®
 
SŒšg
 
	gEDIT
 =

175 
public
 
fš®
 
SŒšg
 
	gPREF_SUCCESS_COUNT
 = "success_count";

177 
public
 
fš®
 
SŒšg
 
	gPREF_STATS_SERVER_CHECK
 =

179 
public
 
fš®
 
SŒšg
 
	gPREF_STATS_SERVER_ALLOWED
 =

182 
public
 
fš®
 
SŒšg
 
	gPREF_ERROR_COUNT
 = "error_count";

184 
public
 
fš®
 
SŒšg
 
	gPREF_ERR_SERVER_CHECK
 =

186 
public
 
fš®
 
SŒšg
 
	gPREF_ERR_SERVER_ALLOWED
 =

189 
public
 
fš®
 
SŒšg
 
	gPREF_UNIQUE_ID
 = "unique_id";

194 
public
 
fš®
 
	gSERVER_ALLOWED_UNKNOWN
 = 0;

195 
public
 
fš®
 
	gSERVER_ALLOWED_NO
 = 1;

196 
public
 
fš®
 
	gSERVER_ALLOWED_YES
 = 2;

201 
public
 
fš®
 
SŒšg
 
	gSTATS_SERVER_URL
 =

203 
public
 
fš®
 
SŒšg
 
	gERR_SERVER_URL
 =

211 @
Ov”ride


212 
public
 
ÚC»©e
(
BundË
 
icişe
) {

213 
	gsu³r
.
ÚC»©e
(
icişe
);

215 
	gmRecÜdšgF’ame
 = 
nuÎ
;

216 
	gmRecÜdšgUri
 = 
nuÎ
;

217 
	gmPÏy”
 = 
nuÎ
;

218 
	gmIsPÏyšg
 = 
çl£
;

220 
IÁ’t
 
	gš‹Á
 = 
g‘IÁ’t
();

222 ià(
	gš‹Á
.
g‘BoŞ—nExŒa
("´ivacy", 
çl£
)) {

223 
showS”v”Prom±
(
Œue
);

231 
	gmWasG‘CÚ‹ÁIÁ’t
 = 
š‹Á
.
g‘BoŞ—nExŒa
(

232 "was_g‘_cÚ‹Á_š‹Á", 
çl£
);

234 
	gmF’ame
 = 
š‹Á
.
g‘D©a
().
toSŒšg
();

236 
	gmSoundFe
 = 
nuÎ
;

237 
	gmKeyDown
 = 
çl£
;

239 ià(
	gmF’ame
.
equ®s
("record")) {

240 
	gŒy
 {

241 
IÁ’t
 
	g»cÜdIÁ’t
 = 
Ãw
 Intent(

242 
MedŸStÜe
.
Audio
.
MedŸ
.
RECORD_SOUND_ACTION
);

243 
¡¬tAùiv™yFÜResuÉ
(
»cÜdIÁ’t
, 
REQUEST_CODE_RECORD
);

244 } 
ÿtch
 (
Exû±iÚ
 
e
) {

245 
showFš®AË¹
(
e
, 
R
.
¡ršg
.
»cÜd_”rÜ
);

249 
	gmHªdËr
 = 
Ãw
 
HªdËr
();

251 
lßdGui
();

253 
	gmHªdËr
.
po¡D–ayed
(
mTim”RuÂabË
, 100);

255 ià(!
	gmF’ame
.
equ®s
("record")) {

256 
lßdFromFe
();

261 @
Ov”ride


262 
´Ùeùed
 
ÚDe¡roy
() {

263 
	gLog
.
i
("Ringdroid", "EditActivity OnDestroy");

265 ià(
	gmPÏy”
 !ğ
nuÎ
 && 
mPÏy”
.
isPÏyšg
()) {

266 
mPÏy”
.
¡İ
();

268 
	gmPÏy”
 = 
nuÎ
;

270 ià(
	gmRecÜdšgF’ame
 !ğ
nuÎ
) {

271 
Œy
 {

272 ià(!
Ãw
 
Fe
(
mRecÜdšgF’ame
).
d–‘e
()) {

273 
showFš®AË¹
(
Ãw
 
Exû±iÚ
(), 
R
.
¡ršg
.
d–‘e_tmp_”rÜ
);

276 
g‘CÚ‹ÁResŞv”
().
d–‘e
(
mRecÜdšgUri
, 
nuÎ
,‚ull);

277 } 
ÿtch
 (
Secur™yExû±iÚ
 
e
) {

278 
showFš®AË¹
(
e
, 
R
.
¡ršg
.
d–‘e_tmp_”rÜ
);

282 
	gsu³r
.
ÚDe¡roy
();

286 @
Ov”ride


287 
´Ùeùed
 
ÚAùiv™yResuÉ
(
»que¡Code
,

288 
»suÉCode
,

289 
IÁ’t
 
d©aIÁ’t
) {

290 ià(
	g»que¡Code
 =ğ
REQUEST_CODE_CHOOSE_CONTACT
) {

294 
£ndStsToS”v”IfAÎowedAndFšish
();

298 ià(
	g»que¡Code
 !ğ
REQUEST_CODE_RECORD
) {

302 ià(
	g»suÉCode
 !ğ
RESULT_OK
) {

303 
fšish
();

307 ià(
	gd©aIÁ’t
 =ğ
nuÎ
) {

308 
fšish
();

316 
	gmRecÜdšgUri
 = 
d©aIÁ’t
.
g‘D©a
();

317 
	gmRecÜdšgF’ame
 = 
g‘F’ameFromUri
(
mRecÜdšgUri
);

318 
	gmF’ame
 = 
mRecÜdšgF’ame
;

319 
lßdFromFe
();

327 @
Ov”ride


328 
public
 
ÚCÚfigu¿tiÚChªged
(
CÚfigu¿tiÚ
 
ÃwCÚfig
) {

329 
fš®
 
	g§veZoomLev–
 = 
mWavefÜmV›w
.
g‘ZoomLev–
();

330 
	gsu³r
.
ÚCÚfigu¿tiÚChªged
(
ÃwCÚfig
);

332 
lßdGui
();

333 
’abËZoomBu‰Ús
();

335 
	gmHªdËr
.
po¡D–ayed
(
Ãw
 
RuÂabË
() {

336 
public
 
run
() {

337 
mS¹M¬k”
.
»que¡Focus
();

338 
m¬k”Focus
(
mS¹M¬k”
);

340 
mWavefÜmV›w
.
£tZoomLev–
(
§veZoomLev–
);

341 
mWavefÜmV›w
.
»compu‹Heights
(
mD’s™y
);

343 
upd©eDi¥Ïy
();

348 @
Ov”ride


349 
public
 
boŞ—n
 
ÚC»©eO±iÚsM’u
(
M’u
 
m’u
) {

350 
	gsu³r
.
ÚC»©eO±iÚsM’u
(
m’u
);

351 
M’uI‹m
 
	g™em
;

353 
	g™em
 = 
m’u
.
add
(0, 
CMD_SAVE
, 0, 
R
.
¡ršg
.
m’u_§ve
);

354 
	g™em
.
£tIcÚ
(
R
.
d¿wabË
.
m’u_§ve
);

356 
	g™em
 = 
m’u
.
add
(0, 
CMD_RESET
, 0, 
R
.
¡ršg
.
m’u_»£t
);

357 
	g™em
.
£tIcÚ
(
R
.
d¿wabË
.
m’u_»£t
);

359 
	g™em
 = 
m’u
.
add
(0, 
CMD_ABOUT
, 0, 
R
.
¡ršg
.
m’u_about
);

360 
	g™em
.
£tIcÚ
(
R
.
d¿wabË
.
m’u_about
);

362  
	gŒue
;

365 @
Ov”ride


366 
public
 
boŞ—n
 
ÚP»·»O±iÚsM’u
(
M’u
 
m’u
) {

367 
	gsu³r
.
ÚP»·»O±iÚsM’u
(
m’u
);

368 
	gm’u
.
fšdI‹m
(
CMD_SAVE
).
£tVisibË
(
Œue
);

369 
	gm’u
.
fšdI‹m
(
CMD_RESET
).
£tVisibË
(
Œue
);

370 
	gm’u
.
fšdI‹m
(
CMD_ABOUT
).
£tVisibË
(
Œue
);

371  
	gŒue
;

374 @
Ov”ride


375 
public
 
boŞ—n
 
ÚO±iÚsI‹mS–eùed
(
M’uI‹m
 
™em
) {

376 
	g™em
.
g‘I‹mId
()) {

377 
	gCMD_SAVE
:

378 
ÚSave
();

379  
	gŒue
;

380 
	gCMD_RESET
:

381 
»£tPos™iÚs
();

382 
	gmOff£tGßl
 = 0;

384  
	gŒue
;

385 
	gCMD_ABOUT
:

386 
ÚAbout
(
this
);

387  
	gŒue
;

389  
çl£
;

393 @
Ov”ride


394 
public
 
boŞ—n
 
ÚKeyDown
(
keyCode
, 
KeyEv’t
 
ev’t
) {

395 ià(
	gkeyCode
 =ğ
KeyEv’t
.
KEYCODE_SPACE
) {

396 
ÚPÏy
(
mS¹Pos
);

397  
	gŒue
;

400  
	gsu³r
.
ÚKeyDown
(
keyCode
, 
ev’t
);

411 
public
 
wavefÜmD¿w
() {

412 
	gmWidth
 = 
mWavefÜmV›w
.
g‘M—su»dWidth
();

413 ià(
	gmOff£tGßl
 !ğ
mOff£t
 && !
mKeyDown
)

414 
upd©eDi¥Ïy
();

415 ià(
	gmIsPÏyšg
) {

416 
upd©eDi¥Ïy
();

417 } ià(
	gmFlšgV–oc™y
 != 0) {

418 
upd©eDi¥Ïy
();

422 
public
 
wavefÜmTouchS¹
(
x
) {

423 
	gmTouchD¿ggšg
 = 
Œue
;

424 
	gmTouchS¹
 = 
x
;

425 
	gmTouchIn™ŸlOff£t
 = 
mOff£t
;

426 
	gmFlšgV–oc™y
 = 0;

427 
	gmWavefÜmTouchS¹M£c
 = 
Sy¡em
.
cu¼’tTimeMlis
();

430 
public
 
wavefÜmTouchMove
(
x
) {

431 
	gmOff£t
 = 
Œ­
(()(
mTouchIn™ŸlOff£t
 + (
mTouchS¹
 - 
x
)));

432 
upd©eDi¥Ïy
();

435 
public
 
wavefÜmTouchEnd
() {

436 
	gmTouchD¿ggšg
 = 
çl£
;

437 
	gmOff£tGßl
 = 
mOff£t
;

439 
	g–­£dM£c
 = 
Sy¡em
.
cu¼’tTimeMlis
() -

440 
mWavefÜmTouchS¹M£c
;

441 ià(
	g–­£dM£c
 < 300) {

442 ià(
	gmIsPÏyšg
) {

443 
	g£ekM£c
 = 
mWavefÜmV›w
.
pix–sToMli£cs
(

444 ()(
mTouchS¹
 + 
mOff£t
));

445 ià(
	g£ekM£c
 >ğ
mPÏyS¹M£c
 &&

446 
£ekM£c
 < 
mPÏyEndM£c
) {

447 
mPÏy”
.
£ekTo
(
£ekM£c
 - 
mPÏyS¹Off£t
);

449 
hªdËPau£
();

452 
ÚPÏy
(()(
mTouchS¹
 + 
mOff£t
));

457 
public
 
wavefÜmFlšg
(
vx
) {

458 
	gmTouchD¿ggšg
 = 
çl£
;

459 
	gmOff£tGßl
 = 
mOff£t
;

460 
	gmFlšgV–oc™y
 = ()(-
vx
);

461 
upd©eDi¥Ïy
();

468 
public
 
m¬k”D¿w
() {

471 
public
 
m¬k”TouchS¹
(
M¬k”V›w
 
m¬k”
, 
x
) {

472 
	gmTouchD¿ggšg
 = 
Œue
;

473 
	gmTouchS¹
 = 
x
;

474 
	gmTouchIn™ŸlS¹Pos
 = 
mS¹Pos
;

475 
	gmTouchIn™ŸlEndPos
 = 
mEndPos
;

478 
public
 
m¬k”TouchMove
(
M¬k”V›w
 
m¬k”
, 
x
) {

479 
	gd–
 = 
x
 - 
mTouchS¹
;

481 ià(
	gm¬k”
 =ğ
mS¹M¬k”
) {

482 
mS¹Pos
 = 
Œ­
(()(
mTouchIn™ŸlS¹Pos
 + 
d–
));

484 ià(
	gmS¹Pos
 > 
	gmEndPos
)

485 
	gmS¹Pos
 = 
mEndPos
;

487 
	gmEndPos
 = 
Œ­
(()(
mTouchIn™ŸlEndPos
 + 
d–
));

488 ià(
	gmEndPos
 < 
	gmS¹Pos
)

489 
	gmEndPos
 = 
mS¹Pos
;

492 
upd©eDi¥Ïy
();

495 
public
 
m¬k”TouchEnd
(
M¬k”V›w
 
m¬k”
) {

496 
	gmTouchD¿ggšg
 = 
çl£
;

497 ià(
	gm¬k”
 =ğ
mS¹M¬k”
) {

498 
£tOff£tGßlS¹
();

500 
£tOff£tGßlEnd
();

504 
public
 
m¬k”Leá
(
M¬k”V›w
 
m¬k”
, 
v–oc™y
) {

505 
	gmKeyDown
 = 
Œue
;

507 ià(
	gm¬k”
 =ğ
mS¹M¬k”
) {

508 
§veS¹
 = 
mS¹Pos
;

509 
	gmS¹Pos
 = 
Œ­
(
mS¹Pos
 - 
v–oc™y
);

510 
	gmEndPos
 = 
Œ­
(
mEndPos
 - (
§veS¹
 - 
mS¹Pos
));

511 
£tOff£tGßlS¹
();

514 ià(
	gm¬k”
 =ğ
mEndM¬k”
) {

515 ià(
mEndPos
 =ğ
mS¹Pos
) {

516 
mS¹Pos
 = 
Œ­
(mS¹Po - 
v–oc™y
);

517 
	gmEndPos
 = 
mS¹Pos
;

519 
	gmEndPos
 = 
Œ­
(
mEndPos
 - 
v–oc™y
);

522 
£tOff£tGßlEnd
();

525 
upd©eDi¥Ïy
();

528 
public
 
m¬k”Right
(
M¬k”V›w
 
m¬k”
, 
v–oc™y
) {

529 
	gmKeyDown
 = 
Œue
;

531 ià(
	gm¬k”
 =ğ
mS¹M¬k”
) {

532 
§veS¹
 = 
mS¹Pos
;

533 
	gmS¹Pos
 +ğ
v–oc™y
;

534 ià(
	gmS¹Pos
 > 
	gmMaxPos
)

535 
	gmS¹Pos
 = 
mMaxPos
;

536 
	gmEndPos
 +ğ(
mS¹Pos
 - 
§veS¹
);

537 ià(
	gmEndPos
 > 
	gmMaxPos
)

538 
	gmEndPos
 = 
mMaxPos
;

540 
£tOff£tGßlS¹
();

543 ià(
	gm¬k”
 =ğ
mEndM¬k”
) {

544 
mEndPos
 +ğ
v–oc™y
;

545 ià(
	gmEndPos
 > 
	gmMaxPos
)

546 
	gmEndPos
 = 
mMaxPos
;

548 
£tOff£tGßlEnd
();

551 
upd©eDi¥Ïy
();

554 
public
 
m¬k”EÁ”
(
M¬k”V›w
 
m¬k”
) {

557 
public
 
m¬k”KeyUp
() {

558 
	gmKeyDown
 = 
çl£
;

559 
upd©eDi¥Ïy
();

562 
public
 
m¬k”Focus
(
M¬k”V›w
 
m¬k”
) {

563 
	gmKeyDown
 = 
çl£
;

564 ià(
	gm¬k”
 =ğ
mS¹M¬k”
) {

565 
£tOff£tGßlS¹NoUpd©e
();

567 
£tOff£tGßlEndNoUpd©e
();

573 
	gmHªdËr
.
po¡D–ayed
(
Ãw
 
RuÂabË
() {

574 
public
 
run
() {

575 
upd©eDi¥Ïy
();

584 
public
 
ÚAbout
(
fš®
 
Aùiv™y
 
aùiv™y
) {

585 
Ãw
 
	gAË¹DŸlog
.
Bud”
(
aùiv™y
)

586 .
£tT™Ë
(
R
.
¡ršg
.
about_t™Ë
)

587 .
£tMes§ge
(
R
.
¡ršg
.
about_‹xt
)

588 .
£tPos™iveBu‰Ú
(
R
.
¡ršg
.
®”t_ok_bu‰Ú
, 
nuÎ
)

589 .
£tCªûÏbË
(
çl£
)

590 .
show
();

601 
´iv©e
 
lßdGui
() {

603 
£tCÚ‹ÁV›w
(
R
.
Ïyout
.
ed™Ü
);

605 
Di¥ÏyM‘rics
 
	gm‘rics
 = 
Ãw
 DisplayMetrics();

606 
g‘WšdowMªag”
().
g‘DeçuÉDi¥Ïy
().
g‘M‘rics
(
m‘rics
);

607 
	gmD’s™y
 = 
m‘rics
.
d’s™y
;

609 
	gmM¬k”LeáIn£t
 = ()(46 * 
mD’s™y
);

610 
	gmM¬k”RightIn£t
 = ()(48 * 
mD’s™y
);

611 
	gmM¬k”TİOff£t
 = ()(10 * 
mD’s™y
);

612 
	gmM¬k”BÙtomOff£t
 = ()(10 * 
mD’s™y
);

614 
	gmS¹Text
 = (
TextV›w
)
fšdV›wById
(
R
.
id
.
¡¬‰ext
);

615 
	gmS¹Text
.
addTextChªgedLi¡’”
(
mTextW©ch”
);

616 
	gmEndText
 = (
TextV›w
)
fšdV›wById
(
R
.
id
.
’d‹xt
);

617 
	gmEndText
.
addTextChªgedLi¡’”
(
mTextW©ch”
);

619 
	gmPÏyBu‰Ú
 = (
ImageBu‰Ú
)
fšdV›wById
(
R
.
id
.
¶ay
);

620 
	gmPÏyBu‰Ú
.
£tOnClickLi¡’”
(
mPÏyLi¡’”
);

621 
	gmRewšdBu‰Ú
 = (
ImageBu‰Ú
)
fšdV›wById
(
R
.
id
.
»w
);

622 
	gmRewšdBu‰Ú
.
£tOnClickLi¡’”
(
mRewšdLi¡’”
);

623 
	gmFfwdBu‰Ú
 = (
ImageBu‰Ú
)
fšdV›wById
(
R
.
id
.
ffwd
);

624 
	gmFfwdBu‰Ú
.
£tOnClickLi¡’”
(
mFfwdLi¡’”
);

625 
	gmZoomInBu‰Ú
 = (
ImageBu‰Ú
)
fšdV›wById
(
R
.
id
.
zoom_š
);

626 
	gmZoomInBu‰Ú
.
£tOnClickLi¡’”
(
mZoomInLi¡’”
);

627 
	gmZoomOutBu‰Ú
 = (
ImageBu‰Ú
)
fšdV›wById
(
R
.
id
.
zoom_out
);

628 
	gmZoomOutBu‰Ú
.
£tOnClickLi¡’”
(
mZoomOutLi¡’”
);

629 
	gmSaveBu‰Ú
 = (
ImageBu‰Ú
)
fšdV›wById
(
R
.
id
.
§ve
);

630 
	gmSaveBu‰Ú
.
£tOnClickLi¡’”
(
mSaveLi¡’”
);

632 
TextV›w
 
	gm¬kS¹Bu‰Ú
 = (TextV›wè
fšdV›wById
(
R
.
id
.
m¬k_¡¬t
);

633 
	gm¬kS¹Bu‰Ú
.
£tOnClickLi¡’”
(
mM¬kS¹Li¡’”
);

634 
TextV›w
 
	gm¬kEndBu‰Ú
 = (TextV›wè
fšdV›wById
(
R
.
id
.
m¬k_’d
);

635 
	gm¬kEndBu‰Ú
.
£tOnClickLi¡’”
(
mM¬kS¹Li¡’”
);

637 
’abËDi§bËBu‰Ús
();

639 
	gmWavefÜmV›w
 = (
WavefÜmV›w
)
fšdV›wById
(
R
.
id
.
wavefÜm
);

640 
	gmWavefÜmV›w
.
£tLi¡’”
(
this
);

642 
	gmInfo
 = (
TextV›w
)
fšdV›wById
(
R
.
id
.
šfo
);

643 
	gmInfo
.
£tText
(
mC­tiÚ
);

645 
	gmMaxPos
 = 0;

646 
	gmLa¡Di¥ÏyedS¹Pos
 = -1;

647 
	gmLa¡Di¥ÏyedEndPos
 = -1;

649 ià(
	gmSoundFe
 !ğ
nuÎ
) {

650 
mWavefÜmV›w
.
£tSoundFe
(
mSoundFe
);

651 
	gmWavefÜmV›w
.
»compu‹Heights
(
mD’s™y
);

652 
	gmMaxPos
 = 
mWavefÜmV›w
.
maxPos
();

655 
	gmS¹M¬k”
 = (
M¬k”V›w
)
fšdV›wById
(
R
.
id
.
¡¬tm¬k”
);

656 
	gmS¹M¬k”
.
£tLi¡’”
(
this
);

657 
	gmS¹M¬k”
.
£tAÍha
(255);

658 
	gmS¹M¬k”
.
£tFocu§bË
(
Œue
);

659 
	gmS¹M¬k”
.
£tFocu§bËInTouchMode
(
Œue
);

660 
	gmS¹VisibË
 = 
Œue
;

662 
	gmEndM¬k”
 = (
M¬k”V›w
)
fšdV›wById
(
R
.
id
.
’dm¬k”
);

663 
	gmEndM¬k”
.
£tLi¡’”
(
this
);

664 
	gmEndM¬k”
.
£tAÍha
(255);

665 
	gmEndM¬k”
.
£tFocu§bË
(
Œue
);

666 
	gmEndM¬k”
.
£tFocu§bËInTouchMode
(
Œue
);

667 
	gmEndVisibË
 = 
Œue
;

669 
upd©eDi¥Ïy
();

672 
´iv©e
 
lßdFromFe
() {

673 
	gmFe
 = 
Ãw
 
Fe
(
mF’ame
);

674 
	gmEx‹nsiÚ
 = 
g‘Ex‹nsiÚFromF’ame
(
mF’ame
);

676 
SÚgM‘ad©aR—d”
 
	gm‘ad©aR—d”
 = 
Ãw
 SongMetadataReader(

677 
this
, 
mF’ame
);

678 
	gmT™Ë
 = 
m‘ad©aR—d”
.
mT™Ë
;

679 
	gmA¹i¡
 = 
m‘ad©aR—d”
.
mA¹i¡
;

680 
	gmAlbum
 = 
m‘ad©aR—d”
.
mAlbum
;

681 
	gmY—r
 = 
m‘ad©aR—d”
.
mY—r
;

682 
	gmG’»
 = 
m‘ad©aR—d”
.
mG’»
;

684 
SŒšg
 
	gt™ËLab–
 = 
mT™Ë
;

685 ià(
	gmA¹i¡
 !ğ
nuÎ
 && 
mA¹i¡
.
Ëngth
() > 0) {

686 
t™ËLab–
 +ğ" - " + 
mA¹i¡
;

688 
£tT™Ë
(
t™ËLab–
);

690 
	gmLßdšgS¹Time
 = 
Sy¡em
.
cu¼’tTimeMlis
();

691 
	gmLßdšgLa¡Upd©eTime
 = 
Sy¡em
.
cu¼’tTimeMlis
();

692 
	gmLßdšgK“pGošg
 = 
Œue
;

693 
	gmProg»ssDŸlog
 = 
Ãw
 
Prog»ssDŸlog
(
RšgdroidEd™Aùiv™y
.
this
);

694 
	gmProg»ssDŸlog
.
£tProg»ssStyË
(
Prog»ssDŸlog
.
STYLE_HORIZONTAL
);

695 
	gmProg»ssDŸlog
.
£tT™Ë
(
R
.
¡ršg
.
´og»ss_dŸlog_lßdšg
);

696 
	gmProg»ssDŸlog
.
£tCªûÏbË
(
Œue
);

697 
	gmProg»ssDŸlog
.
£tOnCªûlLi¡’”
(

698 
Ãw
 
DŸlogIÁ”çû
.
OnCªûlLi¡’”
() {

699 
public
 
ÚCªûl
(
DŸlogIÁ”çû
 
dŸlog
) {

700 
mLßdšgK“pGošg
 = 
çl£
;

703 
	gmProg»ssDŸlog
.
show
();

705 
fš®
 
	gCh—pSoundFe
.
Prog»ssLi¡’”
 
	gli¡’”
 =

706 
Ãw
 
Ch—pSoundFe
.
Prog»ssLi¡’”
() {

707 
public
 
boŞ—n
 
»pÜtProg»ss
(
äaùiÚCom¶‘e
) {

708 
now
 = 
Sy¡em
.
cu¼’tTimeMlis
();

709 ià(
	gnow
 - 
	gmLßdšgLa¡Upd©eTime
 > 100) {

710 
	gmProg»ssDŸlog
.
£tProg»ss
(

711 ()(
mProg»ssDŸlog
.
g‘Max
() *

712 
äaùiÚCom¶‘e
));

713 
	gmLßdšgLa¡Upd©eTime
 = 
now
;

715  
	gmLßdšgK“pGošg
;

720 
	gmCªS“kAccu¿‹ly
 = 
çl£
;

721 
Ãw
 
Th»ad
() {

722 
public
 
run
() {

723 
	gmCªS“kAccu¿‹ly
 = 
S“kTe¡
.
CªS“kAccu¿‹ly
(

724 
g‘P»ã»nûs
(
CÚ‹xt
.
MODE_PRIVATE
));

726 
	gSy¡em
.
	gout
.
´šn
("Seekest done, creating media…layer.");

727 
	gŒy
 {

728 
MedŸPÏy”
 
	g¶ay”
 = 
Ãw
 MediaPlayer();

729 
	g¶ay”
.
£tD©aSourû
(
mFe
.
g‘AbsŞu‹P©h
());

730 
	g¶ay”
.
£tAudioSŒ—mTy³
(
AudioMªag”
.
STREAM_MUSIC
);

731 
	g¶ay”
.
´•¬e
();

732 
	gmPÏy”
 = 
¶ay”
;

733 } 
ÿtch
 (
fš®
 
java
.
io
.
IOExû±iÚ
 
e
) {

734 
RuÂabË
 
	gruÂabË
 = 
Ãw
 Runnable() {

735 
public
 
run
() {

736 
hªdËF©®E¼Ü
(

738 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
»ad_”rÜ
),

739 
e
);

742 
	gmHªdËr
.
po¡
(
ruÂabË
);

745 }.
¡¬t
();

748 
Ãw
 
Th»ad
() {

749 
public
 
run
() {

750 
	gŒy
 {

751 
	gmSoundFe
 = 
Ch—pSoundFe
.
ü—‹
(
mFe
.
g‘AbsŞu‹P©h
(),

752 
li¡’”
);

754 ià(
	gmSoundFe
 =ğ
nuÎ
) {

755 
mProg»ssDŸlog
.
dismiss
();

756 
SŒšg
 
	gÇme
 = 
mFe
.
g‘Name
().
toLow”Ca£
();

757 
	gSŒšg
[] 
	gcompÚ’ts
 = 
Çme
.
¥l™
("\\.");

758 
SŒšg
 
	g”r
;

759 ià(
	gcompÚ’ts
.
	gËngth
 < 2) {

760 
	g”r
 = 
g‘Resourûs
().
g‘SŒšg
(

761 
R
.
¡ršg
.
no_ex‹nsiÚ_”rÜ
);

763 
	g”r
 = 
g‘Resourûs
().
g‘SŒšg
(

764 
R
.
¡ršg
.
bad_ex‹nsiÚ_”rÜ
) + " " +

765 
compÚ’ts
[compÚ’ts.
Ëngth
 - 1];

767 
fš®
 
SŒšg
 
	gfš®E¼
 = 
”r
;

768 
RuÂabË
 
	gruÂabË
 = 
Ãw
 Runnable() {

769 
public
 
run
() {

770 
hªdËF©®E¼Ü
(

772 
fš®E¼
,

773 
Ãw
 
Exû±iÚ
());

776 
	gmHªdËr
.
po¡
(
ruÂabË
);

779 } 
ÿtch
 (
fš®
 
Exû±iÚ
 
e
) {

780 
	gmProg»ssDŸlog
.
dismiss
();

781 
	ge
.
´štSckT¿û
();

782 
	gmInfo
.
£tText
(
e
.
toSŒšg
());

784 
RuÂabË
 
	gruÂabË
 = 
Ãw
 Runnable() {

785 
public
 
run
() {

786 
hªdËF©®E¼Ü
(

788 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
»ad_”rÜ
),

789 
e
);

792 
	gmHªdËr
.
po¡
(
ruÂabË
);

795 
	gmProg»ssDŸlog
.
dismiss
();

796 ià(
	gmLßdšgK“pGošg
) {

797 
RuÂabË
 
	gruÂabË
 = 
Ãw
 Runnable() {

798 
public
 
run
() {

799 
fšishO³nšgSoundFe
();

802 
	gmHªdËr
.
po¡
(
ruÂabË
);

804 
	gRšgdroidEd™Aùiv™y
.
	gthis
.
fšish
();

807 }.
¡¬t
();

810 
´iv©e
 
fšishO³nšgSoundFe
() {

811 
	gmWavefÜmV›w
.
£tSoundFe
(
mSoundFe
);

812 
	gmWavefÜmV›w
.
»compu‹Heights
(
mD’s™y
);

814 
	gmMaxPos
 = 
mWavefÜmV›w
.
maxPos
();

815 
	gmLa¡Di¥ÏyedS¹Pos
 = -1;

816 
	gmLa¡Di¥ÏyedEndPos
 = -1;

818 
	gmTouchD¿ggšg
 = 
çl£
;

820 
	gmOff£t
 = 0;

821 
	gmOff£tGßl
 = 0;

822 
	gmFlšgV–oc™y
 = 0;

823 
»£tPos™iÚs
();

824 ià(
	gmEndPos
 > 
	gmMaxPos
)

825 
	gmEndPos
 = 
mMaxPos
;

827 
	gmC­tiÚ
 =

828 
mSoundFe
.
g‘F‘y³
() + ", " +

829 
mSoundFe
.
g‘Sam¶eR©e
() + " Hz, " +

830 
mSoundFe
.
g‘AvgB™¿‹Kbps
() + " kbps, " +

831 
fÜm©Time
(
mMaxPos
) + " " +

832 
g‘Resourûs
().
g‘SŒšg
(
R
.
¡ršg
.
time_£cÚds
);

833 
	gmInfo
.
£tText
(
mC­tiÚ
);

835 
upd©eDi¥Ïy
();

838 
´iv©e
 
synchrÚized
 
upd©eDi¥Ïy
() {

839 ià(
	gmIsPÏyšg
) {

840 
	gnow
 = 
mPÏy”
.
g‘Cu¼’tPos™iÚ
(è+ 
mPÏyS¹Off£t
;

841 
	gäames
 = 
mWavefÜmV›w
.
mli£csToPix–s
(
now
);

842 
	gmWavefÜmV›w
.
£tPÏyback
(
äames
);

843 
£tOff£tGßlNoUpd©e
(
äames
 - 
mWidth
 / 2);

844 ià(
	gnow
 >ğ
mPÏyEndM£c
) {

845 
hªdËPau£
();

849 ià(!
	gmTouchD¿ggšg
) {

850 
	goff£tD–
;

852 ià(
	gmFlšgV–oc™y
 != 0) {

853 
§veV–
 = 
mFlšgV–oc™y
;

855 
	goff£tD–
 = 
mFlšgV–oc™y
 / 30;

856 ià(
	gmFlšgV–oc™y
 > 80) {

857 
	gmFlšgV–oc™y
 -= 80;

858 } ià(
	gmFlšgV–oc™y
 < -80) {

859 
	gmFlšgV–oc™y
 += 80;

861 
	gmFlšgV–oc™y
 = 0;

864 
	gmOff£t
 +ğ
off£tD–
;

866 ià(
	gmOff£t
 + 
	gmWidth
 / 2 > 
	gmMaxPos
) {

867 
	gmOff£t
 = 
mMaxPos
 - 
mWidth
 / 2;

868 
	gmFlšgV–oc™y
 = 0;

870 ià(
	gmOff£t
 < 0) {

871 
	gmOff£t
 = 0;

872 
	gmFlšgV–oc™y
 = 0;

874 
	gmOff£tGßl
 = 
mOff£t
;

876 
	goff£tD–
 = 
mOff£tGßl
 - 
mOff£t
;

878 ià(
	goff£tD–
 > 10)

879 
	goff£tD–
 = 
off£tD–
 / 10;

880 ià(
	goff£tD–
 > 0)

881 
	goff£tD–
 = 1;

882 ià(
	goff£tD–
 < -10)

883 
	goff£tD–
 = 
off£tD–
 / 10;

884 ià(
	goff£tD–
 < 0)

885 
	goff£tD–
 = -1;

887 
	goff£tD–
 = 0;

889 
	gmOff£t
 +ğ
off£tD–
;

893 
	gmWavefÜmV›w
.
£tP¬am‘”s
(
mS¹Pos
, 
mEndPos
, 
mOff£t
);

894 
	gmWavefÜmV›w
.
šv®id©e
();

896 
	gmS¹M¬k”
.
£tCÚ‹ÁDesütiÚ
(

897 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
¡¬t_m¬k”
) + " " +

898 
fÜm©Time
(
mS¹Pos
));

899 
	gmEndM¬k”
.
£tCÚ‹ÁDesütiÚ
(

900 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
’d_m¬k”
) + " " +

901 
fÜm©Time
(
mEndPos
));

903 
	g¡¬tX
 = 
mS¹Pos
 - 
mOff£t
 - 
mM¬k”LeáIn£t
;

904 ià(
	g¡¬tX
 + 
	gmS¹M¬k”
.
g‘Width
() >= 0) {

905 ià(!
mS¹VisibË
) {

907 
mHªdËr
.
po¡D–ayed
(
Ãw
 
RuÂabË
() {

908 
public
 
run
() {

909 
mS¹VisibË
 = 
Œue
;

910 
mS¹M¬k”
.
£tAÍha
(255);

915 ià(
	gmS¹VisibË
) {

916 
	gmS¹M¬k”
.
£tAÍha
(0);

917 
	gmS¹VisibË
 = 
çl£
;

919 
	g¡¬tX
 = 0;

922 
	g’dX
 = 
mEndPos
 - 
mOff£t
 - 
mEndM¬k”
.
g‘Width
() +

923 
mM¬k”RightIn£t
;

924 ià(
	g’dX
 + 
	gmEndM¬k”
.
g‘Width
() >= 0) {

925 ià(!
mEndVisibË
) {

927 
mHªdËr
.
po¡D–ayed
(
Ãw
 
RuÂabË
() {

928 
public
 
run
() {

929 
mEndVisibË
 = 
Œue
;

930 
mEndM¬k”
.
£tAÍha
(255);

935 ià(
	gmEndVisibË
) {

936 
	gmEndM¬k”
.
£tAÍha
(0);

937 
	gmEndVisibË
 = 
çl£
;

939 
	g’dX
 = 0;

942 
	gmS¹M¬k”
.
£tLayoutP¬ams
(

943 
Ãw
 
AbsŞu‹Layout
.
LayoutP¬ams
(

944 
AbsŞu‹Layout
.
LayoutP¬ams
.
WRAP_CONTENT
,

945 
AbsŞu‹Layout
.
LayoutP¬ams
.
WRAP_CONTENT
,

946 
¡¬tX
,

947 
mM¬k”TİOff£t
));

949 
	gmEndM¬k”
.
£tLayoutP¬ams
(

950 
Ãw
 
AbsŞu‹Layout
.
LayoutP¬ams
(

951 
AbsŞu‹Layout
.
LayoutP¬ams
.
WRAP_CONTENT
,

952 
AbsŞu‹Layout
.
LayoutP¬ams
.
WRAP_CONTENT
,

953 
’dX
,

954 
mWavefÜmV›w
.
g‘M—su»dHeight
() -

955 
mEndM¬k”
.
g‘Height
(è- 
mM¬k”BÙtomOff£t
));

958 
´iv©e
 
RuÂabË
 
	gmTim”RuÂabË
 = 
Ãw
 Runnable() {

959 
public
 
run
() {

962 ià(
mS¹Pos
 !ğ
mLa¡Di¥ÏyedS¹Pos
 &&

963 !
mS¹Text
.
hasFocus
()) {

964 
mS¹Text
.
£tText
(
fÜm©Time
(
mS¹Pos
));

965 
	gmLa¡Di¥ÏyedS¹Pos
 = 
mS¹Pos
;

968 ià(
	gmEndPos
 !ğ
mLa¡Di¥ÏyedEndPos
 &&

969 !
mEndText
.
hasFocus
()) {

970 
mEndText
.
£tText
(
fÜm©Time
(
mEndPos
));

971 
	gmLa¡Di¥ÏyedEndPos
 = 
mEndPos
;

974 
	gmHªdËr
.
po¡D–ayed
(
mTim”RuÂabË
, 100);

978 
´iv©e
 
’abËDi§bËBu‰Ús
() {

979 ià(
	gmIsPÏyšg
) {

980 
	gmPÏyBu‰Ú
.
£tImageResourû
(
ªdroid
.
R
.
d¿wabË
.
ic_medŸ_·u£
);

981 
	gmPÏyBu‰Ú
.
£tCÚ‹ÁDesütiÚ
(
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
¡İ
));

983 
	gmPÏyBu‰Ú
.
£tImageResourû
(
ªdroid
.
R
.
d¿wabË
.
ic_medŸ_¶ay
);

984 
	gmPÏyBu‰Ú
.
£tCÚ‹ÁDesütiÚ
(
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
¶ay
));

988 
´iv©e
 
»£tPos™iÚs
() {

989 
	gmS¹Pos
 = 
mWavefÜmV›w
.
£cÚdsToPix–s
(0.0);

990 
	gmEndPos
 = 
mWavefÜmV›w
.
£cÚdsToPix–s
(15.0);

993 
´iv©e
 
Œ­
(
pos
) {

994 ià(
	gpos
 < 0)

996 ià(
	gpos
 > 
	gmMaxPos
)

997  
	gmMaxPos
;

998  
	gpos
;

1001 
´iv©e
 
£tOff£tGßlS¹
() {

1002 
£tOff£tGßl
(
mS¹Pos
 - 
mWidth
 / 2);

1005 
´iv©e
 
£tOff£tGßlS¹NoUpd©e
() {

1006 
£tOff£tGßlNoUpd©e
(
mS¹Pos
 - 
mWidth
 / 2);

1009 
´iv©e
 
£tOff£tGßlEnd
() {

1010 
£tOff£tGßl
(
mEndPos
 - 
mWidth
 / 2);

1013 
´iv©e
 
£tOff£tGßlEndNoUpd©e
() {

1014 
£tOff£tGßlNoUpd©e
(
mEndPos
 - 
mWidth
 / 2);

1017 
´iv©e
 
£tOff£tGßl
(
off£t
) {

1018 
£tOff£tGßlNoUpd©e
(
off£t
);

1019 
upd©eDi¥Ïy
();

1022 
´iv©e
 
£tOff£tGßlNoUpd©e
(
off£t
) {

1023 ià(
	gmTouchD¿ggšg
) {

1027 
	gmOff£tGßl
 = 
off£t
;

1028 ià(
	gmOff£tGßl
 + 
	gmWidth
 / 2 > 
	gmMaxPos
)

1029 
	gmOff£tGßl
 = 
mMaxPos
 - 
mWidth
 / 2;

1030 ià(
	gmOff£tGßl
 < 0)

1031 
	gmOff£tGßl
 = 0;

1034 
´iv©e
 
SŒšg
 
fÜm©Time
(
pix–s
) {

1035 ià(
	gmWavefÜmV›w
 !ğ
nuÎ
 && 
mWavefÜmV›w
.
isIn™Ÿlized
()) {

1036  
fÜm©Decim®
(
mWavefÜmV›w
.
pix–sToSecÚds
(
pix–s
));

1042 
´iv©e
 
SŒšg
 
fÜm©Decim®
(
x
) {

1043 
	gxWhŞe
 = ()
x
;

1044 
	gxF¿c
 = ()(100 * (
x
 - 
xWhŞe
) + 0.5);

1046 ià(
	gxF¿c
 >= 100) {

1047 
xWhŞe
++;

1048 
	gxF¿c
 -= 100;

1049 ià(
	gxF¿c
 < 10) {

1050 
	gxF¿c
 *= 10;

1054 ià(
	gxF¿c
 < 10)

1055  
	gxWhŞe
 + ".0" + 
	gxF¿c
;

1057  
	gxWhŞe
 + "." + 
	gxF¿c
;

1060 
´iv©e
 
synchrÚized
 
hªdËPau£
() {

1061 ià(
	gmPÏy”
 !ğ
nuÎ
 && 
mPÏy”
.
isPÏyšg
()) {

1062 
mPÏy”
.
·u£
();

1064 
	gmWavefÜmV›w
.
£tPÏyback
(-1);

1065 
	gmIsPÏyšg
 = 
çl£
;

1066 
’abËDi§bËBu‰Ús
();

1069 
´iv©e
 
synchrÚized
 
ÚPÏy
(
¡¬tPos™iÚ
) {

1070 ià(
	gmIsPÏyšg
) {

1071 
hªdËPau£
();

1075 ià(
	gmPÏy”
 =ğ
nuÎ
) {

1080 
	gŒy
 {

1081 
	gmPÏyS¹M£c
 = 
mWavefÜmV›w
.
pix–sToMli£cs
(
¡¬tPos™iÚ
);

1082 ià(
	g¡¬tPos™iÚ
 < 
	gmS¹Pos
) {

1083 
	gmPÏyEndM£c
 = 
mWavefÜmV›w
.
pix–sToMli£cs
(
mS¹Pos
);

1084 } ià(
	g¡¬tPos™iÚ
 > 
	gmEndPos
) {

1085 
	gmPÏyEndM£c
 = 
mWavefÜmV›w
.
pix–sToMli£cs
(
mMaxPos
);

1087 
	gmPÏyEndM£c
 = 
mWavefÜmV›w
.
pix–sToMli£cs
(
mEndPos
);

1090 
	gmPÏyS¹Off£t
 = 0;

1092 
	g¡¬tF¿me
 = 
mWavefÜmV›w
.
£cÚdsToF¿mes
(

1093 
mPÏyS¹M£c
 * 0.001);

1094 
	g’dF¿me
 = 
mWavefÜmV›w
.
£cÚdsToF¿mes
(

1095 
mPÏyEndM£c
 * 0.001);

1096 
	g¡¬tBy‹
 = 
mSoundFe
.
g‘S“kabËF¿meOff£t
(
¡¬tF¿me
);

1097 
	g’dBy‹
 = 
mSoundFe
.
g‘S“kabËF¿meOff£t
(
’dF¿me
);

1098 ià(
	gmCªS“kAccu¿‹ly
 && 
	g¡¬tBy‹
 >ğ0 && 
’dBy‹
 >= 0) {

1099 
Œy
 {

1100 
mPÏy”
.
»£t
();

1101 
	gmPÏy”
.
£tAudioSŒ—mTy³
(
AudioMªag”
.
STREAM_MUSIC
);

1102 
FeIÅutSŒ—m
 
	gsub£tIÅutSŒ—m
 = 
Ãw
 FileInputStream(

1103 
mFe
.
g‘AbsŞu‹P©h
());

1104 
	gmPÏy”
.
£tD©aSourû
(
sub£tIÅutSŒ—m
.
g‘FD
(),

1105 
¡¬tBy‹
, 
’dBy‹
 - startByte);

1106 
	gmPÏy”
.
´•¬e
();

1107 
	gmPÏyS¹Off£t
 = 
mPÏyS¹M£c
;

1108 } 
ÿtch
 (
Exû±iÚ
 
e
) {

1109 
	gSy¡em
.
	gout
.
´šn
("Exceptionryingo…lay file subset");

1110 
	gmPÏy”
.
»£t
();

1111 
	gmPÏy”
.
£tAudioSŒ—mTy³
(
AudioMªag”
.
STREAM_MUSIC
);

1112 
	gmPÏy”
.
£tD©aSourû
(
mFe
.
g‘AbsŞu‹P©h
());

1113 
	gmPÏy”
.
´•¬e
();

1114 
	gmPÏyS¹Off£t
 = 0;

1118 
	gmPÏy”
.
£tOnCom¶‘iÚLi¡’”
(
Ãw
 
OnCom¶‘iÚLi¡’”
() {

1119 
public
 
synchrÚized
 
ÚCom¶‘iÚ
(
MedŸPÏy”
 
¬g0
) {

1121 
mPÏy”
.
¡¬t
();

1124 
	gmIsPÏyšg
 = 
Œue
;

1126 ià(
	gmPÏyS¹Off£t
 == 0) {

1127 
mPÏy”
.
£ekTo
(
mPÏyS¹M£c
);

1129 
	gmPÏy”
.
¡¬t
();

1131 
’abËDi§bËBu‰Ús
();

1132 } 
ÿtch
 (
Exû±iÚ
 
e
) {

1133 
showFš®AË¹
(
e
, 
R
.
¡ršg
.
¶ay_”rÜ
);

1145 
´iv©e
 
showFš®AË¹
(
Exû±iÚ
 
e
, 
Ch¬Sequ’û
 
mes§ge
) {

1146 
Ch¬Sequ’û
 
	gt™Ë
;

1147 ià(
	ge
 !ğ
nuÎ
) {

1148 
Log
.
e
("Ršgdroid", "E¼Ü: " + 
mes§ge
);

1149 
	gLog
.
e
("Ršgdroid", 
g‘SckT¿û
(e));

1150 
	gt™Ë
 = 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
®”t_t™Ë_çu»
);

1151 
£tResuÉ
(
RESULT_CANCELED
, 
Ãw
 
IÁ’t
());

1153 
	gLog
.
i
("Ršgdroid", "Sucûss: " + 
mes§ge
);

1154 
	gt™Ë
 = 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
®”t_t™Ë_sucûss
);

1157 
Ãw
 
	gAË¹DŸlog
.
Bud”
(
RšgdroidEd™Aùiv™y
.
this
)

1158 .
£tT™Ë
(
t™Ë
)

1159 .
£tMes§ge
(
mes§ge
)

1160 .
£tPos™iveBu‰Ú
(

1161 
R
.
¡ršg
.
®”t_ok_bu‰Ú
,

1162 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1163 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1164 
whichBu‰Ú
) {

1165 
fšish
();

1168 .
£tCªûÏbË
(
çl£
)

1169 .
show
();

1172 
´iv©e
 
showFš®AË¹
(
Exû±iÚ
 
e
, 
mes§geResourûId
) {

1173 
showFš®AË¹
(
e
, 
g‘Resourûs
().
g‘Text
(
mes§geResourûId
));

1176 
´iv©e
 
SŒšg
 
makeRšgtÚeF’ame
(
Ch¬Sequ’û
 
t™Ë
, SŒšg 
ex‹nsiÚ
) {

1177 
SŒšg
 
	g·»Ádœ
;

1178 
	gmNewFeKšd
) {

1180 
FeSaveDŸlog
.
FILE_KIND_MUSIC
:

1181 
·»Ádœ
 = "/sdcard/media/audio/music";

1183 
	gFeSaveDŸlog
.
	gFILE_KIND_ALARM
:

1184 
·»Ádœ
 = "/sdcard/media/audio/alarms";

1186 
	gFeSaveDŸlog
.
	gFILE_KIND_NOTIFICATION
:

1187 
·»Ádœ
 = "/sdcard/media/audio/notifications";

1189 
	gFeSaveDŸlog
.
	gFILE_KIND_RINGTONE
:

1190 
·»Ádœ
 = "/sdcard/media/audio/ringtones";

1195 
Fe
 
	g·»ÁDœFe
 = 
Ãw
 Fe(
·»Ádœ
);

1196 
	g·»ÁDœFe
.
mkdœs
();

1200 ià(!
	g·»ÁDœFe
.
isDœeùÜy
()) {

1201 
	g·»Ádœ
 = "/sdcard";

1205 
SŒšg
 
	gf’ame
 = "";

1206 
	gi
 = 0; i < 
	gt™Ë
.
Ëngth
(); i++) {

1207 ià(
	gCh¬aù”
.
isL‘‹rOrDig™
(
t™Ë
.
ch¬At
(
i
))) {

1208 
	gf’ame
 +ğ
t™Ë
.
ch¬At
(
i
);

1213 
SŒšg
 
	g·th
 = 
nuÎ
;

1214 
	gi
 = 0; i < 100; i++) {

1215 
SŒšg
 
	g‹¡P©h
;

1216 ià(
	gi
 > 0)

1217 
	g‹¡P©h
 = 
·»Ádœ
 + "/" + 
f’ame
 + 
i
 + 
ex‹nsiÚ
;

1219 
	g‹¡P©h
 = 
·»Ádœ
 + "/" + 
f’ame
 + 
ex‹nsiÚ
;

1221 
	gŒy
 {

1222 
RªdomAcûssFe
 
	gf
 = 
Ãw
 RandomAccessFile(

1223 
Ãw
 
Fe
(
‹¡P©h
), "r");

1224 } 
ÿtch
 (
Exû±iÚ
 
e
) {

1226 
	g·th
 = 
‹¡P©h
;

1231  
	g·th
;

1234 
´iv©e
 
§veRšgtÚe
(
fš®
 
Ch¬Sequ’û
 
t™Ë
) {

1235 
fš®
 
SŒšg
 
	goutP©h
 = 
makeRšgtÚeF’ame
(
t™Ë
, 
mEx‹nsiÚ
);

1237 ià(
	goutP©h
 =ğ
nuÎ
) {

1238 
showFš®AË¹
(
Ãw
 
Exû±iÚ
(), 
R
.
¡ršg
.
no_unique_f’ame
);

1242 
	gmD¡F’ame
 = 
outP©h
;

1244 
	g¡¬tTime
 = 
mWavefÜmV›w
.
pix–sToSecÚds
(
mS¹Pos
);

1245 
	g’dTime
 = 
mWavefÜmV›w
.
pix–sToSecÚds
(
mEndPos
);

1246 
fš®
 
	g¡¬tF¿me
 = 
mWavefÜmV›w
.
£cÚdsToF¿mes
(
¡¬tTime
);

1247 
fš®
 
	g’dF¿me
 = 
mWavefÜmV›w
.
£cÚdsToF¿mes
(
’dTime
);

1248 
fš®
 
	gdu¿tiÚ
 = ()(
’dTime
 - 
¡¬tTime
 + 0.5);

1251 
	gmProg»ssDŸlog
 = 
Ãw
 
Prog»ssDŸlog
(
this
);

1252 
	gmProg»ssDŸlog
.
£tProg»ssStyË
(
Prog»ssDŸlog
.
STYLE_SPINNER
);

1253 
	gmProg»ssDŸlog
.
£tT™Ë
(
R
.
¡ršg
.
´og»ss_dŸlog_§všg
);

1254 
	gmProg»ssDŸlog
.
£tInd‘”mš©e
(
Œue
);

1255 
	gmProg»ssDŸlog
.
£tCªûÏbË
(
çl£
);

1256 
	gmProg»ssDŸlog
.
show
();

1259 
Ãw
 
Th»ad
() {

1260 
public
 
run
() {

1261 
fš®
 
Fe
 
	goutFe
 = 
Ãw
 Fe(
outP©h
);

1262 
	gŒy
 {

1264 
	gmSoundFe
.
Wr™eFe
(
outFe
,

1265 
¡¬tF¿me
,

1266 
’dF¿me
 - 
¡¬tF¿me
);

1269 
fš®
 
	gCh—pSoundFe
.
Prog»ssLi¡’”
 
	gli¡’”
 =

1270 
Ãw
 
Ch—pSoundFe
.
Prog»ssLi¡’”
() {

1271 
public
 
boŞ—n
 
»pÜtProg»ss
(
äac
) {

1276  
Œue
;

1279 
	gCh—pSoundFe
.
ü—‹
(
outP©h
, 
li¡’”
);

1280 } 
ÿtch
 (
Exû±iÚ
 
e
) {

1281 
	gmProg»ssDŸlog
.
dismiss
();

1283 
Ch¬Sequ’û
 
	g”rÜMes§ge
;

1284 ià(
	ge
.
g‘Mes§ge
().
equ®s
("No space†eft on device")) {

1285 
	g”rÜMes§ge
 = 
g‘Resourûs
().
g‘Text
(

1286 
R
.
¡ršg
.
no_¥aû_”rÜ
);

1287 
	ge
 = 
nuÎ
;

1289 
	g”rÜMes§ge
 = 
g‘Resourûs
().
g‘Text
(

1290 
R
.
¡ršg
.
wr™e_”rÜ
);

1293 
fš®
 
Ch¬Sequ’û
 
	gfš®E¼ÜMes§ge
 = 
”rÜMes§ge
;

1294 
fš®
 
Exû±iÚ
 
	gfš®Exû±iÚ
 = 
e
;

1295 
RuÂabË
 
	gruÂabË
 = 
Ãw
 Runnable() {

1296 
public
 
run
() {

1297 
hªdËF©®E¼Ü
(

1299 
fš®E¼ÜMes§ge
,

1300 
fš®Exû±iÚ
);

1303 
	gmHªdËr
.
po¡
(
ruÂabË
);

1307 
	gmProg»ssDŸlog
.
dismiss
();

1309 
RuÂabË
 
	gruÂabË
 = 
Ãw
 Runnable() {

1310 
public
 
run
() {

1311 
aá”SavšgRšgtÚe
(
t™Ë
,

1312 
outP©h
,

1313 
outFe
,

1314 
du¿tiÚ
);

1317 
	gmHªdËr
.
po¡
(
ruÂabË
);

1319 }.
¡¬t
();

1322 
´iv©e
 
aá”SavšgRšgtÚe
(
Ch¬Sequ’û
 
t™Ë
,

1323 
SŒšg
 
outP©h
,

1324 
Fe
 
outFe
,

1325 
du¿tiÚ
) {

1326 
	gËngth
 = 
outFe
.
Ëngth
();

1327 ià(
	gËngth
 <= 512) {

1328 
outFe
.
d–‘e
();

1329 
Ãw
 
	gAË¹DŸlog
.
Bud”
(
this
)

1330 .
£tT™Ë
(
R
.
¡ršg
.
®”t_t™Ë_çu»
)

1331 .
£tMes§ge
(
R
.
¡ršg
.
too_sm®l_”rÜ
)

1332 .
£tPos™iveBu‰Ú
(
R
.
¡ršg
.
®”t_ok_bu‰Ú
, 
nuÎ
)

1333 .
£tCªûÏbË
(
çl£
)

1334 .
show
();

1340 
	gfeSize
 = 
outFe
.
Ëngth
();

1341 
SŒšg
 
	gmimeTy³
 = "audio/mpeg";

1343 
SŒšg
 
	g¬ti¡
 = "" + 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
¬ti¡_Çme
);

1345 
CÚ‹ÁV®ues
 
	gv®ues
 = 
Ãw
 ContentValues();

1346 
	gv®ues
.
put
(
MedŸStÜe
.
MedŸCŞumns
.
DATA
, 
outP©h
);

1347 
	gv®ues
.
put
(
MedŸStÜe
.
MedŸCŞumns
.
TITLE
, 
t™Ë
.
toSŒšg
());

1348 
	gv®ues
.
put
(
MedŸStÜe
.
MedŸCŞumns
.
SIZE
, 
feSize
);

1349 
	gv®ues
.
put
(
MedŸStÜe
.
MedŸCŞumns
.
MIME_TYPE
, 
mimeTy³
);

1351 
	gv®ues
.
put
(
MedŸStÜe
.
Audio
.
MedŸ
.
ARTIST
, 
¬ti¡
);

1352 
	gv®ues
.
put
(
MedŸStÜe
.
Audio
.
MedŸ
.
DURATION
, 
du¿tiÚ
);

1354 
	gv®ues
.
put
(
MedŸStÜe
.
Audio
.
MedŸ
.
IS_RINGTONE
,

1355 
mNewFeKšd
 =ğ
FeSaveDŸlog
.
FILE_KIND_RINGTONE
);

1356 
	gv®ues
.
put
(
MedŸStÜe
.
Audio
.
MedŸ
.
IS_NOTIFICATION
,

1357 
mNewFeKšd
 =ğ
FeSaveDŸlog
.
FILE_KIND_NOTIFICATION
);

1358 
	gv®ues
.
put
(
MedŸStÜe
.
Audio
.
MedŸ
.
IS_ALARM
,

1359 
mNewFeKšd
 =ğ
FeSaveDŸlog
.
FILE_KIND_ALARM
);

1360 
	gv®ues
.
put
(
MedŸStÜe
.
Audio
.
MedŸ
.
IS_MUSIC
,

1361 
mNewFeKšd
 =ğ
FeSaveDŸlog
.
FILE_KIND_MUSIC
);

1364 
Uri
 
	guri
 = 
MedŸStÜe
.
Audio
.
MedŸ
.
g‘CÚ‹ÁUriFÜP©h
(
outP©h
);

1365 
fš®
 
Uri
 
	gÃwUri
 = 
g‘CÚ‹ÁResŞv”
().
š£¹
(
uri
, 
v®ues
);

1366 
£tResuÉ
(
RESULT_OK
, 
Ãw
 
IÁ’t
().
£tD©a
(
ÃwUri
));

1370 
Sh¬edP»ã»nûs
 
	g´efs
 = 
g‘P»ã»nûs
(
CÚ‹xt
.
MODE_PRIVATE
);

1371 
	gsucûssCouÁ
 = 
´efs
.
g‘IÁ
(
PREF_SUCCESS_COUNT
, 0);

1372 
	gSh¬edP»ã»nûs
.
Ed™Ü
 
	g´efsEd™Ü
 = 
´efs
.
ed™
();

1373 
	g´efsEd™Ü
.
putIÁ
(
PREF_SUCCESS_COUNT
, 
sucûssCouÁ
 + 1);

1374 
	g´efsEd™Ü
.
comm™
();

1377 ià(
	gmWasG‘CÚ‹ÁIÁ’t
) {

1378 
£ndStsToS”v”IfAÎowedAndFšish
();

1384 ià(
	gmNewFeKšd
 =ğ
FeSaveDŸlog
.
FILE_KIND_MUSIC
 ||

1385 
mNewFeKšd
 =ğ
FeSaveDŸlog
.
FILE_KIND_ALARM
) {

1386 
Tß¡
.
makeText
(
this
,

1387 
R
.
¡ršg
.
§ve_sucûss_mes§ge
,

1388 
Tß¡
.
LENGTH_SHORT
)

1389 .
show
();

1390 
£ndStsToS”v”IfAÎowedAndFšish
();

1396 ià(
	gmNewFeKšd
 =ğ
FeSaveDŸlog
.
FILE_KIND_NOTIFICATION
) {

1397 
Ãw
 
AË¹DŸlog
.
Bud”
(
RšgdroidEd™Aùiv™y
.
this
)

1398 .
£tT™Ë
(
R
.
¡ršg
.
®”t_t™Ë_sucûss
)

1399 .
£tMes§ge
(
R
.
¡ršg
.
£t_deçuÉ_nÙifiÿtiÚ
)

1400 .
£tPos™iveBu‰Ú
(
R
.
¡ršg
.
®”t_yes_bu‰Ú
,

1401 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1402 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1403 
whichBu‰Ú
) {

1404 
RšgtÚeMªag”
.
£tAùu®DeçuÉRšgtÚeUri
(

1405 
RšgdroidEd™Aùiv™y
.
this
,

1406 
RšgtÚeMªag”
.
TYPE_NOTIFICATION
,

1407 
ÃwUri
);

1408 
£ndStsToS”v”IfAÎowedAndFšish
();

1411 .
£tNeg©iveBu‰Ú
(

1412 
R
.
¡ršg
.
®”t_no_bu‰Ú
,

1413 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1414 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1415 
whichBu‰Ú
) {

1416 
£ndStsToS”v”IfAÎowedAndFšish
();

1419 .
£tCªûÏbË
(
çl£
)

1420 .
show
();

1428 
fš®
 
HªdËr
 
	ghªdËr
 = 
Ãw
 Handler() {

1429 
public
 
hªdËMes§ge
(
Mes§ge
 
»¥Ú£
) {

1430 
aùiÚId
 = 
»¥Ú£
.
¬g1
;

1431 
	gaùiÚId
) {

1432 
	gR
.
	gid
.
	gbu‰Ú_make_deçuÉ
:

1433 
RšgtÚeMªag”
.
£tAùu®DeçuÉRšgtÚeUri
(

1434 
RšgdroidEd™Aùiv™y
.
this
,

1435 
RšgtÚeMªag”
.
TYPE_RINGTONE
,

1436 
ÃwUri
);

1437 
	gTß¡
.
makeText
(

1438 
RšgdroidEd™Aùiv™y
.
this
,

1439 
R
.
¡ršg
.
deçuÉ_ršgtÚe_sucûss_mes§ge
,

1440 
Tß¡
.
LENGTH_SHORT
)

1441 .
show
();

1442 
£ndStsToS”v”IfAÎowedAndFšish
();

1444 
	gR
.
	gid
.
	gbu‰Ú_choo£_cÚù
:

1445 
choo£CÚùFÜRšgtÚe
(
ÃwUri
);

1448 
R
.
id
.
bu‰Ú_do_nÙhšg
:

1449 
£ndStsToS”v”IfAÎowedAndFšish
();

1454 
Mes§ge
 
	gmes§ge
 = Mes§ge.
obš
(
hªdËr
);

1455 
Aá”SaveAùiÚDŸlog
 
	gdlog
 = 
Ãw
 AfterSaveActionDialog(

1456 
this
, 
mes§ge
);

1457 
	gdlog
.
show
();

1460 
´iv©e
 
choo£CÚùFÜRšgtÚe
(
Uri
 
uri
) {

1461 
	gŒy
 {

1462 
IÁ’t
 
	gš‹Á
 = 
Ãw
 IÁ’t(IÁ’t.
ACTION_EDIT
, 
uri
);

1463 
	gš‹Á
.
£tCÏssName
(

1466 
¡¬tAùiv™yFÜResuÉ
(
š‹Á
, 
REQUEST_CODE_CHOOSE_CONTACT
);

1467 } 
ÿtch
 (
Exû±iÚ
 
e
) {

1468 
	gLog
.
e
("Ringdroid", "Couldn't open Choose Contact window");

1472 
´iv©e
 
hªdËF©®E¼Ü
(

1473 
fš®
 
Ch¬Sequ’û
 
”rÜIÁ”ÇlName
,

1474 
fš®
 
Ch¬Sequ’û
 
”rÜSŒšg
,

1475 
fš®
 
Exû±iÚ
 
exû±iÚ
) {

1476 
	gLog
.
i
("Ringdroid", "handleFatalError");

1478 
Sh¬edP»ã»nûs
 
	g´efs
 = 
g‘P»ã»nûs
(
CÚ‹xt
.
MODE_PRIVATE
);

1479 
	gçu»CouÁ
 = 
´efs
.
g‘IÁ
(
PREF_ERROR_COUNT
, 0);

1480 
fš®
 
	gSh¬edP»ã»nûs
.
Ed™Ü
 
	g´efsEd™Ü
 = 
´efs
.
ed™
();

1481 
	g´efsEd™Ü
.
putIÁ
(
PREF_ERROR_COUNT
, 
çu»CouÁ
 + 1);

1482 
	g´efsEd™Ü
.
comm™
();

1486 
	g£rv”AÎowed
 = 
´efs
.
g‘IÁ
(
PREF_ERR_SERVER_ALLOWED
,

1487 
SERVER_ALLOWED_UNKNOWN
);

1489 ià(
	g£rv”AÎowed
 =ğ
SERVER_ALLOWED_NO
) {

1490 
Log
.
i
("Ringdroid", "ERR: SERVER_ALLOWED_NO");

1493 
showFš®AË¹
(
exû±iÚ
, 
”rÜSŒšg
);

1497 ià(
	g£rv”AÎowed
 =ğ
SERVER_ALLOWED_YES
) {

1498 
Log
.
i
("Ringdroid", "SERVER_ALLOWED_YES");

1500 
Ãw
 
	gAË¹DŸlog
.
Bud”
(
RšgdroidEd™Aùiv™y
.
this
)

1501 .
£tT™Ë
(
R
.
¡ršg
.
®”t_t™Ë_çu»
)

1502 .
£tMes§ge
(
”rÜSŒšg
)

1503 .
£tPos™iveBu‰Ú
(

1504 
R
.
¡ršg
.
®”t_ok_bu‰Ú
,

1505 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1506 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1507 
whichBu‰Ú
) {

1508 
£ndE¼ToS”v”AndFšish
(
”rÜIÁ”ÇlName
,

1509 
exû±iÚ
);

1513 .
£tCªûÏbË
(
çl£
)

1514 .
show
();

1521 
fš®
 
	g®lowS”v”CheckIndex
 =

1522 
´efs
.
g‘IÁ
(
PREF_ERR_SERVER_CHECK
, 1);

1523 ià(
	gçu»CouÁ
 < 
	g®lowS”v”CheckIndex
) {

1524 
	gLog
.
i
("Ršgdroid", "çu»CouÁ " + 
çu»CouÁ
 +

1525 " i Ës thª " + 
®lowS”v”CheckIndex
);

1527 
showFš®AË¹
(
exû±iÚ
, 
”rÜSŒšg
);

1531 
fš®
 
S·ÂabËSŒšg
 
	gmes§ge
 = 
Ãw
 SpannableString(

1532 
”rÜSŒšg
 + ". " +

1533 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
”rÜ_£rv”_´om±
));

1534 
	gLškify
.
addLšks
(
mes§ge
, 
Lškify
.
ALL
);

1536 
AË¹DŸlog
 
	gdŸlog
 = 
Ãw
 AË¹DŸlog.
Bud”
(
this
)

1537 .
£tT™Ë
(
R
.
¡ršg
.
®”t_t™Ë_çu»
)

1538 .
£tMes§ge
(
mes§ge
)

1539 .
£tPos™iveBu‰Ú
(

1540 
R
.
¡ršg
.
£rv”_yes
,

1541 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1542 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1543 
whichBu‰Ú
) {

1544 
´efsEd™Ü
.
putIÁ
(
PREF_ERR_SERVER_ALLOWED
,

1545 
SERVER_ALLOWED_YES
);

1546 
´efsEd™Ü
.
comm™
();

1547 
£ndE¼ToS”v”AndFšish
(
”rÜIÁ”ÇlName
,

1548 
exû±iÚ
);

1551 .
£tNeuŒ®Bu‰Ú
(

1552 
R
.
¡ršg
.
£rv”_Ï‹r
,

1553 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1554 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1555 
whichBu‰Ú
) {

1556 
´efsEd™Ü
.
putIÁ
(
PREF_ERR_SERVER_CHECK
,

1557 1 + 
®lowS”v”CheckIndex
 * 2);

1558 
Log
.
i
("Ringdroid",

1560 (1 + 
®lowS”v”CheckIndex
 * 2) +

1562 
´efsEd™Ü
.
comm™
();

1563 
fšish
();

1566 .
£tNeg©iveBu‰Ú
(

1567 
R
.
¡ršg
.
£rv”_Ãv”
,

1568 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1569 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1570 
whichBu‰Ú
) {

1571 
´efsEd™Ü
.
putIÁ
(
PREF_ERR_SERVER_ALLOWED
,

1572 
SERVER_ALLOWED_NO
);

1573 
´efsEd™Ü
.
comm™
();

1574 
fšish
();

1577 .
£tCªûÏbË
(
çl£
)

1578 .
show
();

1581 ((
	gTextV›w
)
	gdŸlog
.
fšdV›wById
(
ªdroid
.
R
.
id
.
mes§ge
))

1582 .
£tMovem’tM‘hod
(
LškMovem’tM‘hod
.
g‘In¡ªû
());

1585 
´iv©e
 
ÚSave
() {

1586 ià(
	gmIsPÏyšg
) {

1587 
hªdËPau£
();

1590 
fš®
 
HªdËr
 
	ghªdËr
 = 
Ãw
 Handler() {

1591 
public
 
hªdËMes§ge
(
Mes§ge
 
»¥Ú£
) {

1592 
Ch¬Sequ’û
 
ÃwT™Ë
 = (Ch¬Sequ’û)
»¥Ú£
.
obj
;

1593 
	gmNewFeKšd
 = 
»¥Ú£
.
¬g1
;

1594 
§veRšgtÚe
(
ÃwT™Ë
);

1597 
Mes§ge
 
	gmes§ge
 = Mes§ge.
obš
(
hªdËr
);

1598 
FeSaveDŸlog
 
	gdlog
 = 
Ãw
 FileSaveDialog(

1599 
this
, 
g‘Resourûs
(), 
mT™Ë
, 
mes§ge
);

1600 
	gdlog
.
show
();

1603 
´iv©e
 
’abËZoomBu‰Ús
() {

1604 
	gmZoomInBu‰Ú
.
£tEÇbËd
(
mWavefÜmV›w
.
ÿnZoomIn
());

1605 
	gmZoomOutBu‰Ú
.
£tEÇbËd
(
mWavefÜmV›w
.
ÿnZoomOut
());

1608 
´iv©e
 
OnClickLi¡’”
 
	gmSaveLi¡’”
 = 
Ãw
 OnClickListener() {

1609 
public
 
ÚClick
(
V›w
 
£nd”
) {

1610 
ÚSave
();

1614 
´iv©e
 
OnClickLi¡’”
 
	gmPÏyLi¡’”
 = 
Ãw
 OnClickListener() {

1615 
public
 
ÚClick
(
V›w
 
£nd”
) {

1616 
ÚPÏy
(
mS¹Pos
);

1620 
´iv©e
 
OnClickLi¡’”
 
	gmZoomInLi¡’”
 = 
Ãw
 OnClickListener() {

1621 
public
 
ÚClick
(
V›w
 
£nd”
) {

1622 
mWavefÜmV›w
.
zoomIn
();

1623 
	gmS¹Pos
 = 
mWavefÜmV›w
.
g‘S¹
();

1624 
	gmEndPos
 = 
mWavefÜmV›w
.
g‘End
();

1625 
	gmMaxPos
 = 
mWavefÜmV›w
.
maxPos
();

1626 
	gmOff£t
 = 
mWavefÜmV›w
.
g‘Off£t
();

1627 
	gmOff£tGßl
 = 
mOff£t
;

1628 
’abËZoomBu‰Ús
();

1629 
upd©eDi¥Ïy
();

1633 
´iv©e
 
OnClickLi¡’”
 
	gmZoomOutLi¡’”
 = 
Ãw
 OnClickListener() {

1634 
public
 
ÚClick
(
V›w
 
£nd”
) {

1635 
mWavefÜmV›w
.
zoomOut
();

1636 
	gmS¹Pos
 = 
mWavefÜmV›w
.
g‘S¹
();

1637 
	gmEndPos
 = 
mWavefÜmV›w
.
g‘End
();

1638 
	gmMaxPos
 = 
mWavefÜmV›w
.
maxPos
();

1639 
	gmOff£t
 = 
mWavefÜmV›w
.
g‘Off£t
();

1640 
	gmOff£tGßl
 = 
mOff£t
;

1641 
’abËZoomBu‰Ús
();

1642 
upd©eDi¥Ïy
();

1646 
´iv©e
 
OnClickLi¡’”
 
	gmRewšdLi¡’”
 = 
Ãw
 OnClickListener() {

1647 
public
 
ÚClick
(
V›w
 
£nd”
) {

1648 ià(
mIsPÏyšg
) {

1649 
ÃwPos
 = 
mPÏy”
.
g‘Cu¼’tPos™iÚ
() - 5000;

1650 ià(
	gÃwPos
 < 
	gmPÏyS¹M£c
)

1651 
	gÃwPos
 = 
mPÏyS¹M£c
;

1652 
	gmPÏy”
.
£ekTo
(
ÃwPos
);

1654 
	gmS¹M¬k”
.
»que¡Focus
();

1655 
m¬k”Focus
(
mS¹M¬k”
);

1660 
´iv©e
 
OnClickLi¡’”
 
	gmFfwdLi¡’”
 = 
Ãw
 OnClickListener() {

1661 
public
 
ÚClick
(
V›w
 
£nd”
) {

1662 ià(
mIsPÏyšg
) {

1663 
ÃwPos
 = 5000 + 
mPÏy”
.
g‘Cu¼’tPos™iÚ
();

1664 ià(
	gÃwPos
 > 
	gmPÏyEndM£c
)

1665 
	gÃwPos
 = 
mPÏyEndM£c
;

1666 
	gmPÏy”
.
£ekTo
(
ÃwPos
);

1668 
	gmEndM¬k”
.
»que¡Focus
();

1669 
m¬k”Focus
(
mEndM¬k”
);

1674 
´iv©e
 
OnClickLi¡’”
 
	gmM¬kS¹Li¡’”
 = 
Ãw
 OnClickListener() {

1675 
public
 
ÚClick
(
V›w
 
£nd”
) {

1676 ià(
mIsPÏyšg
) {

1677 
mS¹Pos
 = 
mWavefÜmV›w
.
mli£csToPix–s
(

1678 
mPÏy”
.
g‘Cu¼’tPos™iÚ
(è+ 
mPÏyS¹Off£t
);

1679 
upd©eDi¥Ïy
();

1684 
´iv©e
 
OnClickLi¡’”
 
	gmM¬kEndLi¡’”
 = 
Ãw
 OnClickListener() {

1685 
public
 
ÚClick
(
V›w
 
£nd”
) {

1686 ià(
mIsPÏyšg
) {

1687 
mEndPos
 = 
mWavefÜmV›w
.
mli£csToPix–s
(

1688 
mPÏy”
.
g‘Cu¼’tPos™iÚ
(è+ 
mPÏyS¹Off£t
);

1689 
upd©eDi¥Ïy
();

1690 
hªdËPau£
();

1695 
´iv©e
 
TextW©ch”
 
	gmTextW©ch”
 = 
Ãw
 TextWatcher() {

1696 
public
 
befÜeTextChªged
(
Ch¬Sequ’û
 
s
, 
¡¬t
,

1697 
couÁ
, 
aá”
) {

1700 
public
 
ÚTextChªged
(
Ch¬Sequ’û
 
s
,

1701 
¡¬t
, 
befÜe
, 
couÁ
) {

1704 
public
 
aá”TextChªged
(
Ed™abË
 
s
) {

1705 ià(
mS¹Text
.
hasFocus
()) {

1706 
Œy
 {

1707 
mS¹Pos
 = 
mWavefÜmV›w
.
£cÚdsToPix–s
(

1708 
DoubË
.
·r£DoubË
(

1709 
mS¹Text
.
g‘Text
().
toSŒšg
()));

1710 
upd©eDi¥Ïy
();

1711 } 
ÿtch
 (
Numb”FÜm©Exû±iÚ
 
e
) {

1714 ià(
	gmEndText
.
hasFocus
()) {

1715 
	gŒy
 {

1716 
	gmEndPos
 = 
mWavefÜmV›w
.
£cÚdsToPix–s
(

1717 
DoubË
.
·r£DoubË
(

1718 
mEndText
.
g‘Text
().
toSŒšg
()));

1719 
upd©eDi¥Ïy
();

1720 } 
ÿtch
 (
Numb”FÜm©Exû±iÚ
 
e
) {

1726 
´iv©e
 
SŒšg
 
g‘SckT¿û
(
Exû±iÚ
 
e
) {

1727 
By‹A¼ayOuutSŒ—m
 
	g¡»am
 = 
Ãw
 ByteArrayOutputStream();

1728 
PrštWr™”
 
	gwr™”
 = 
Ãw
 PrštWr™”(
¡»am
, 
Œue
);

1729 
	ge
.
´štSckT¿û
(
wr™”
);

1730  
	g¡»am
.
toSŒšg
();

1736 
´iv©e
 
SŒšg
 
g‘Ex‹nsiÚFromF’ame
(SŒšg 
f’ame
) {

1737  
	gf’ame
.
sub¡ršg
(
f’ame
.
Ï¡IndexOf
('.'),

1738 
f’ame
.
Ëngth
());

1741 
´iv©e
 
SŒšg
 
g‘F’ameFromUri
(
Uri
 
uri
) {

1742 
CursÜ
 
	gc
 = 
mªagedQu”y
(
uri
, 
nuÎ
, "",‚ull,‚ull);

1743 ià(
	gc
.
g‘CouÁ
() == 0) {

1744  
nuÎ
;

1746 
	gc
.
moveToFœ¡
();

1747 
	gd©aIndex
 = 
c
.
g‘CŞumnIndexOrThrow
(

1748 
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
);

1750  
	gc
.
g‘SŒšg
(
d©aIndex
);

1753 
´iv©e
 
£ndStsToS”v”IfAÎowedAndFšish
() {

1754 
	gLog
.
i
("Ringdroid", "sendStatsToServerIfAllowedAndFinish");

1756 
fš®
 
Sh¬edP»ã»nûs
 
	g´efs
 = 
g‘P»ã»nûs
(
CÚ‹xt
.
MODE_PRIVATE
);

1760 
	g£rv”AÎowed
 = 
´efs
.
g‘IÁ
(
PREF_STATS_SERVER_ALLOWED
,

1761 
SERVER_ALLOWED_UNKNOWN
);

1762 ià(
	g£rv”AÎowed
 =ğ
SERVER_ALLOWED_NO
) {

1763 
Log
.
i
("Ringdroid", "SERVER_ALLOWED_NO");

1764 
fšish
();

1768 ià(
	g£rv”AÎowed
 =ğ
SERVER_ALLOWED_YES
) {

1769 
Log
.
i
("Ringdroid", "SERVER_ALLOWED_YES");

1770 
£ndStsToS”v”AndFšish
();

1775 
	gsucûssCouÁ
 = 
´efs
.
g‘IÁ
(
PREF_SUCCESS_COUNT
, 0);

1780 
fš®
 
	g®lowS”v”CheckIndex
 =

1781 
´efs
.
g‘IÁ
(
PREF_STATS_SERVER_CHECK
, 2);

1782 ià(
	gsucûssCouÁ
 < 
	g®lowS”v”CheckIndex
) {

1783 
	gLog
.
i
("Ršgdroid", "sucûssCouÁ " + 
sucûssCouÁ
 +

1784 " i Ës thª " + 
®lowS”v”CheckIndex
);

1785 
fšish
();

1789 
showS”v”Prom±
(
çl£
);

1792 
showS”v”Prom±
(
fš®
 
boŞ—n
 
u£rIn™Ÿ‹d
) {

1793 
fš®
 
Sh¬edP»ã»nûs
 
	g´efs
 = 
g‘P»ã»nûs
(
CÚ‹xt
.
MODE_PRIVATE
);

1795 
fš®
 
S·ÂabËSŒšg
 
	gmes§ge
 = 
Ãw
 SpannableString(

1796 
g‘Resourûs
().
g‘Text
(
R
.
¡ršg
.
£rv”_´om±
));

1797 
	gLškify
.
addLšks
(
mes§ge
, 
Lškify
.
ALL
);

1799 
fš®
 
AË¹DŸlog
 
	gdŸlog
 = 
Ãw
 AË¹DŸlog.
Bud”
(
RšgdroidEd™Aùiv™y
.
this
)

1800 .
£tT™Ë
(
R
.
¡ršg
.
£rv”_t™Ë
)

1801 .
£tMes§ge
(
mes§ge
)

1802 .
£tPos™iveBu‰Ú
(

1803 
R
.
¡ršg
.
£rv”_yes
,

1804 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1805 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1806 
whichBu‰Ú
) {

1807 
Sh¬edP»ã»nûs
.
Ed™Ü
 
´efsEd™Ü
 = 
´efs
.
ed™
();

1808 
´efsEd™Ü
.
putIÁ
(
PREF_STATS_SERVER_ALLOWED
,

1809 
SERVER_ALLOWED_YES
);

1810 
´efsEd™Ü
.
comm™
();

1811 ià(
u£rIn™Ÿ‹d
) {

1812 
fšish
();

1814 
£ndStsToS”v”AndFšish
();

1818 .
£tNeuŒ®Bu‰Ú
(

1819 
R
.
¡ršg
.
£rv”_Ï‹r
,

1820 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1821 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1822 
whichBu‰Ú
) {

1823 
®lowS”v”CheckIndex
 =

1824 
´efs
.
g‘IÁ
(
PREF_STATS_SERVER_CHECK
, 2);

1825 
sucûssCouÁ
 = 
´efs
.
g‘IÁ
(
PREF_SUCCESS_COUNT
, 0);

1826 
Sh¬edP»ã»nûs
.
Ed™Ü
 
´efsEd™Ü
 = 
´efs
.
ed™
();

1827 ià(
u£rIn™Ÿ‹d
) {

1828 
´efsEd™Ü
.
putIÁ
(
PREF_STATS_SERVER_CHECK
,

1829 
sucûssCouÁ
 + 2);

1832 
´efsEd™Ü
.
putIÁ
(
PREF_STATS_SERVER_CHECK
,

1833 
®lowS”v”CheckIndex
 * 2);

1835 
´efsEd™Ü
.
comm™
();

1836 
fšish
();

1839 .
£tNeg©iveBu‰Ú
(

1840 
R
.
¡ršg
.
£rv”_Ãv”
,

1841 
Ãw
 
DŸlogIÁ”çû
.
OnClickLi¡’”
() {

1842 
public
 
ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

1843 
whichBu‰Ú
) {

1844 
Sh¬edP»ã»nûs
.
Ed™Ü
 
´efsEd™Ü
 = 
´efs
.
ed™
();

1845 
´efsEd™Ü
.
putIÁ
(
PREF_STATS_SERVER_ALLOWED
,

1846 
SERVER_ALLOWED_NO
);

1847 ià(
u£rIn™Ÿ‹d
) {

1853 
´efsEd™Ü
.
putIÁ
(
PREF_ERR_SERVER_ALLOWED
,

1854 
SERVER_ALLOWED_NO
);

1856 
´efsEd™Ü
.
comm™
();

1857 
fšish
();

1860 .
£tCªûÏbË
(
çl£
)

1861 .
show
();

1864 ((
	gTextV›w
)
	gdŸlog
.
fšdV›wById
(
ªdroid
.
R
.
id
.
mes§ge
))

1865 .
£tMovem’tM‘hod
(
LškMovem’tM‘hod
.
g‘In¡ªû
());

1868 
£ndStsToS”v”AndFšish
() {

1869 
	gLog
.
i
("Ringdroid", "sendStatsToServerAndFinish");

1870 
Ãw
 
Th»ad
() {

1871 
public
 
run
() {

1872 
£ndToS”v”
(
STATS_SERVER_URL
, 
nuÎ
,‚ull);

1874 }.
¡¬t
();

1875 
	gLog
.
i
("Ringdroid", "sendStatsToServerAndFinish calling finish");

1876 
fšish
();

1879 
£ndE¼ToS”v”AndFšish
(
fš®
 
Ch¬Sequ’û
 
”rTy³
,

1880 
fš®
 
Exû±iÚ
 
exû±iÚ
) {

1881 
	gLog
.
i
("Ringdroid", "sendErrToServerAndFinish");

1882 
Ãw
 
Th»ad
() {

1883 
public
 
run
() {

1884 
£ndToS”v”
(
ERR_SERVER_URL
, 
”rTy³
, 
exû±iÚ
);

1886 }.
¡¬t
();

1887 
	gLog
.
i
("Ringdroid", "sendErrToServerAndFinish calling finish");

1888 
fšish
();

1896 
g‘UniqueId
() {

1897 
Sh¬edP»ã»nûs
 
	g´efs
 = 
g‘P»ã»nûs
(
CÚ‹xt
.
MODE_PRIVATE
);

1898 
	guniqueId
 = 
´efs
.
g‘LÚg
(
PREF_UNIQUE_ID
, 0);

1899 ià(
	guniqueId
 == 0) {

1900 
uniqueId
 = 
Ãw
 
Rªdom
().
ÃxtLÚg
();

1902 
	gSh¬edP»ã»nûs
.
Ed™Ü
 
	g´efsEd™Ü
 = 
´efs
.
ed™
();

1903 
	g´efsEd™Ü
.
putLÚg
(
PREF_UNIQUE_ID
, 
uniqueId
);

1904 
	g´efsEd™Ü
.
comm™
();

1907  
	guniqueId
;

1913 
£ndToS”v”
(
SŒšg
 
£rv”U¾
,

1914 
Ch¬Sequ’û
 
”rTy³
,

1915 
Exû±iÚ
 
exû±iÚ
) {

1916 ià(
	gmT™Ë
 =ğ
nuÎ
)

1919 
	gLog
.
i
("Ringdroid", "sendStatsToServer");

1921 
boŞ—n
 
	gisSucûss
 = (
exû±iÚ
 =ğ
nuÎ
);

1923 
SŒšgBud”
 
	gpo¡Mes§ge
 = 
Ãw
 StringBuilder();

1924 
SŒšg
 
	gršgdroidV”siÚ
 = "unknown";

1925 
	gŒy
 {

1926 
	gršgdroidV”siÚ
 =

1927 
g‘PackageMªag”
().
g‘PackageInfo
(
g‘PackageName
(), -1)

1928 .
	gv”siÚName
;

1929 } 
ÿtch
 (
ªdroid
.
cÚ‹Á
.
pm
.
PackageMªag”
.
NameNÙFoundExû±iÚ
 
e
) {

1931 
	gpo¡Mes§ge
.
­³nd
("ringdroid_version=");

1932 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
ršgdroidV”siÚ
));

1934 
	gpo¡Mes§ge
.
­³nd
("&android_version=");

1935 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
Bud
.
VERSION
.
RELEASE
));

1937 
	gpo¡Mes§ge
.
­³nd
("&unique_id=");

1938 
	gpo¡Mes§ge
.
­³nd
(
g‘UniqueId
());

1940 
	gpo¡Mes§ge
.
­³nd
("&accurate_seek=");

1941 
	gpo¡Mes§ge
.
­³nd
(
mCªS“kAccu¿‹ly
);

1943 ià(
	gisSucûss
) {

1944 
	gpo¡Mes§ge
.
­³nd
("&title=");

1945 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
mT™Ë
));

1946 ià(
	gmA¹i¡
 !ğ
nuÎ
) {

1947 
po¡Mes§ge
.
­³nd
("&artist=");

1948 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
mA¹i¡
));

1950 ià(
	gmAlbum
 !ğ
nuÎ
) {

1951 
po¡Mes§ge
.
­³nd
("&album=");

1952 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
mAlbum
));

1954 ià(
	gmG’»
 !ğ
nuÎ
) {

1955 
po¡Mes§ge
.
­³nd
("&genre=");

1956 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
mG’»
));

1958 
	gpo¡Mes§ge
.
­³nd
("&year=");

1959 
	gpo¡Mes§ge
.
­³nd
(
mY—r
);

1961 
	gpo¡Mes§ge
.
­³nd
("&filename=");

1962 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
mF’ame
));

1966 
	gÏt™ude
 = 0.0;

1967 
	glÚg™ude
 = 0.0;

1968 
	gpo¡Mes§ge
.
­³nd
("&user_lat=");

1969 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
("" + 
Ït™ude
));

1970 
	gpo¡Mes§ge
.
­³nd
("&user_lon=");

1971 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
("" + 
lÚg™ude
));

1973 
Sh¬edP»ã»nûs
 
	g´efs
 = 
g‘P»ã»nûs
(
CÚ‹xt
.
MODE_PRIVATE
);

1974 
	gsucûssCouÁ
 = 
´efs
.
g‘IÁ
(
PREF_SUCCESS_COUNT
, 0);

1975 
	gpo¡Mes§ge
.
­³nd
("&success_count=");

1976 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
("" + 
sucûssCouÁ
));

1978 
	gpo¡Mes§ge
.
­³nd
("&bitrate=");

1979 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(

1980 "" + 
mSoundFe
.
g‘AvgB™¿‹Kbps
()));

1982 
	gpo¡Mes§ge
.
­³nd
("&channels=");

1983 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(

1984 "" + 
mSoundFe
.
g‘ChªÃls
()));

1986 
SŒšg
 
	gmd5
;

1987 
	gŒy
 {

1988 
	gmd5
 = 
mSoundFe
.
compu‹Md5OfFœ¡10F¿mes
();

1989 } 
ÿtch
 (
Exû±iÚ
 
e
) {

1990 
	gmd5
 = "";

1992 
	gpo¡Mes§ge
.
­³nd
("&md5=");

1993 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
md5
));

1998 
	gpo¡Mes§ge
.
­³nd
("&err_type=");

1999 
	gpo¡Mes§ge
.
­³nd
(
”rTy³
);

2000 
	gpo¡Mes§ge
.
­³nd
("&err_str=");

2001 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
g‘SckT¿û
(
exû±iÚ
)));

2003 
	gpo¡Mes§ge
.
­³nd
("&src_filename=");

2004 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
mF’ame
));

2006 ià(
	gmD¡F’ame
 !ğ
nuÎ
) {

2007 
po¡Mes§ge
.
­³nd
("&dst_filename=");

2008 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
mD¡F’ame
));

2012 ià(
	gmSoundFe
 !ğ
nuÎ
) {

2013 
äamesToSecs
 = 0.0;

2014 
	g§m¶eR©e
 = 
mSoundFe
.
g‘Sam¶eR©e
();

2015 ià(
	g§m¶eR©e
 > 0.0) {

2016 
	gäamesToSecs
 = 
mSoundFe
.
g‘Sam¶esP”F¿me
()

2017 * 1.0 / 
§m¶eR©e
;

2020 
	gsÚgL’
 = 
äamesToSecs
 * 
mSoundFe
.
g‘NumF¿mes
();

2021 
	gpo¡Mes§ge
.
­³nd
("&songlen=");

2022 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
("" + 
sÚgL’
));

2024 
	gpo¡Mes§ge
.
­³nd
("&sound_type=");

2025 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
mSoundFe
.
g‘F‘y³
()));

2027 
	gşS¹
 = 
mS¹Pos
 * 
äamesToSecs
;

2028 
	gşL’
 = (
mEndPos
 - 
mS¹Pos
è* 
äamesToSecs
;

2029 
	gpo¡Mes§ge
.
­³nd
("&clip_start=");

2030 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
("" + 
şS¹
));

2031 
	gpo¡Mes§ge
.
­³nd
("&clip_len=");

2032 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
("" + 
şL’
));

2035 
SŒšg
 
	gfeKšdName
 = 
FeSaveDŸlog
.
KšdToName
(
mNewFeKšd
);

2036 
	gpo¡Mes§ge
.
­³nd
("&clip_kind=");

2037 
	gpo¡Mes§ge
.
­³nd
(
URLEncod”
.
’code
(
feKšdName
));

2039 
	gLog
.
i
("Ršgdroid", 
po¡Mes§ge
.
toSŒšg
());

2041 
	gŒy
 {

2042 
	gTIMEOUT_MILLISEC
 = 10000;

2043 
H‰pP¬ams
 
	gh‰pP¬ams
 = 
Ãw
 
BasicH‰pP¬ams
();

2044 
	gH‰pCÚÃùiÚP¬ams
.
£tCÚÃùiÚTimeout
(
h‰pP¬ams
,

2045 
TIMEOUT_MILLISEC
);

2046 
	gH‰pCÚÃùiÚP¬ams
.
£tSoTimeout
(
h‰pP¬ams
, 
TIMEOUT_MILLISEC
);

2047 
H‰pCl›Á
 
	gş›Á
 = 
Ãw
 
DeçuÉH‰pCl›Á
(
h‰pP¬ams
);

2049 
H‰pPo¡
 
	g»que¡
 = 
Ãw
 H‰pPo¡(
£rv”U¾
);

2050 
	g»que¡
.
£tEÁ™y
(
Ãw
 
By‹A¼ayEÁ™y
(

2051 
po¡Mes§ge
.
toSŒšg
().
g‘By‹s
("UTF8")));

2053 
	gLog
.
i
("Ringdroid", "Executing„equest");

2054 
H‰pRe¥Ú£
 
	g»¥Ú£
 = 
ş›Á
.
execu‹
(
»que¡
);

2056 
	gLog
.
i
("Ršgdroid", "Re¥Ú£: " + 
»¥Ú£
.
toSŒšg
());

2058 } 
ÿtch
 (
Exû±iÚ
 
e
) {

2059 
	ge
.
´štSckT¿û
();

	@src/com/ringdroid/RingdroidSelectActivity.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	g­p
.
	gAË¹DŸlog
;

20 
impÜt
 
	gªdroid
.
	g­p
.
	gLi¡Aùiv™y
;

21 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹ÁResŞv”
;

22 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gDŸlogIÁ”çû
;

23 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gIÁ’t
;

24 
impÜt
 
	gªdroid
.
	gd©aba£
.
	gCursÜ
;

25 
impÜt
 
	gªdroid
.
	gd©aba£
.
	gM”geCursÜ
;

26 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gRšgtÚeMªag”
;

27 
impÜt
 
	gªdroid
.
	gÃt
.
	gUri
;

28 
impÜt
 
	gªdroid
.
	gos
.
	gBundË
;

29 
impÜt
 
	gªdroid
.
	gos
.
	gEnvœÚm’t
;

30 
impÜt
 
	gªdroid
.
	g´ovid”
.
	gMedŸStÜe
;

31 
impÜt
 
	gªdroid
.
	g‹xt
.
	gEd™abË
;

32 
impÜt
 
	gªdroid
.
	g‹xt
.
	gTextW©ch”
;

33 
impÜt
 
	gªdroid
.
	gut
.
	gLog
;

34 
impÜt
 
	gªdroid
.
	gv›w
.
	gCÚ‹xtM’u
;

35 
impÜt
 
	gªdroid
.
	gv›w
.
	gCÚ‹xtM’u
.
	gCÚ‹xtM’uInfo
;

36 
impÜt
 
	gªdroid
.
	gv›w
.
	gM’u
;

37 
impÜt
 
	gªdroid
.
	gv›w
.
	gM’uI‹m
;

38 
impÜt
 
	gªdroid
.
	gv›w
.
	gV›w
;

39 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAd­‹rV›w
.
	gAd­‹rCÚ‹xtM’uInfo
;

40 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAd­‹rV›w
.
	gOnI‹mClickLi¡’”
;

41 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gAd­‹rV›w
;

42 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gBu‰Ú
;

43 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gImageV›w
;

44 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gSim¶eCursÜAd­‹r
;

45 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gTextV›w
;

46 
impÜt
 
	gªdroid
.
	gwidg‘
.
	gTß¡
;

48 
impÜt
 
	gcom
.
	gršgdroid
.
	gsoundfe
.
	gCh—pSoundFe
;

50 
impÜt
 
	gjava
.
	gio
.
	gFe
;

51 
impÜt
 
	gjava
.
	gut
.
	gA¼ayLi¡
;

58 
public
 cÏs 
	cRšgdroidS–eùAùiv™y


59 
ex‹nds
 
Li¡Aùiv™y


60 
im¶em’ts
 
	mTextW©ch”


62 
´iv©e
 
TextV›w
 
	mmF‹r
;

63 
´iv©e
 
Sim¶eCursÜAd­‹r
 
	mmAd­‹r
;

64 
´iv©e
 
boŞ—n
 
	mmWasG‘CÚ‹ÁIÁ’t
;

65 
´iv©e
 
boŞ—n
 
	mmShowAÎ
;

68 
´iv©e
 
fš®
 
	mREQUEST_CODE_EDIT
 = 1;

69 
´iv©e
 
fš®
 
	mREQUEST_CODE_CHOOSE_CONTACT
 = 2;

72 
´iv©e
 
fš®
 
	mCMD_ABOUT
 = 1;

73 
´iv©e
 
fš®
 
	mCMD_PRIVACY
 = 2;

74 
´iv©e
 
fš®
 
	mCMD_SHOW_ALL
 = 3;

77 
´iv©e
 
fš®
 
	mCMD_EDIT
 = 4;

78 
´iv©e
 
fš®
 
	mCMD_DELETE
 = 5;

79 
´iv©e
 
fš®
 
	mCMD_SET_AS_DEFAULT
 = 6;

80 
´iv©e
 
fš®
 
	mCMD_SET_AS_CONTACT
 = 7;

83 
public
 
	$RšgdroidS–eùAùiv™y
() {

89 @
Ov”ride


90 
public
 
	$ÚC»©e
(
BundË
 
icişe
) {

91 
su³r
.
	`ÚC»©e
(
icişe
);

93 
mShowAÎ
 = 
çl£
;

95 
SŒšg
 
¡©us
 = 
EnvœÚm’t
.
	`g‘Ex‹º®StÜageS‹
();

96 ià(
¡©us
.
	`equ®s
(
EnvœÚm’t
.
MEDIA_MOUNTED_READ_ONLY
)) {

97 
	`showFš®AË¹
(
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
sdÿrd_»adÚly
));

100 ià(
¡©us
.
	`equ®s
(
EnvœÚm’t
.
MEDIA_SHARED
)) {

101 
	`showFš®AË¹
(
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
sdÿrd_sh¬ed
));

104 ià(!
¡©us
.
	`equ®s
(
EnvœÚm’t
.
MEDIA_MOUNTED
)) {

105 
	`showFš®AË¹
(
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
no_sdÿrd
));

109 
IÁ’t
 
š‹Á
 = 
	`g‘IÁ’t
();

110 
mWasG‘CÚ‹ÁIÁ’t
 = 
š‹Á
.
	`g‘AùiÚ
().
	`equ®s
(

111 
IÁ’t
.
ACTION_GET_CONTENT
);

114 
	`£tCÚ‹ÁV›w
(
R
.
Ïyout
.
medŸ_£Ëù
);

116 
Bu‰Ú
 
»cÜdBu‰Ú
 = (Bu‰Úè
	`fšdV›wById
(
R
.
id
.
»cÜd
);

117 
»cÜdBu‰Ú
.
	`£tOnClickLi¡’”
(
Ãw
 
V›w
.
	`OnClickLi¡’”
() {

118 
public
 
	`ÚClick
(
V›w
 
şickedBu‰Ú
) {

119 
	`ÚRecÜd
();

123 
Œy
 {

124 
mAd­‹r
 = 
Ãw
 
	`Sim¶eCursÜAd­‹r
(

125 
this
,

127 
R
.
Ïyout
.
medŸ_£Ëù_row
,

129 
	`ü—‹CursÜ
(""),

131 
Ãw
 
SŒšg
[] {

132 
MedŸStÜe
.
Audio
.
MedŸ
.
ARTIST
,

133 
MedŸStÜe
.
Audio
.
MedŸ
.
ALBUM
,

134 
MedŸStÜe
.
Audio
.
MedŸ
.
TITLE
,

135 
MedŸStÜe
.
Audio
.
MedŸ
.
_ID
,

136 
MedŸStÜe
.
Audio
.
MedŸ
.
_ID
},

138 
Ãw
 [] {

139 
R
.
id
.
row_¬ti¡
,

140 
R
.
id
.
row_®bum
,

141 
R
.
id
.
row_t™Ë
,

142 
R
.
id
.
row_icÚ
,

143 
R
.
id
.
row_İtiÚs_bu‰Ú
});

145 
	`£tLi¡Ad­‹r
(
mAd­‹r
);

147 
	`g‘Li¡V›w
().
	`£tI‹msCªFocus
(
Œue
);

150 
	`g‘Li¡V›w
().
	`£tOnI‹mClickLi¡’”
(
Ãw
 
	`OnI‹mClickLi¡’”
() {

151 
public
 
	`ÚI‹mClick
(
Ad­‹rV›w
 
·»Á
,

152 
V›w
 
v›w
,

153 
pos™iÚ
,

154 
id
) {

155 
	`¡¬tRšgdroidEd™Ü
();

159 } 
	`ÿtch
 (
Secur™yExû±iÚ
 
e
) {

161 
Log
.
	`e
("Ršgdroid", 
e
.
	`toSŒšg
());

164 } 
	`ÿtch
 (
IÎeg®Argum’tExû±iÚ
 
e
) {

166 
Log
.
	`e
("Ršgdroid", 
e
.
	`toSŒšg
());

171 
mAd­‹r
.
	`£tV›wBšd”
(
Ãw
 
Sim¶eCursÜAd­‹r
.
	`V›wBšd”
() {

172 
public
 
boŞ—n
 
	`£tV›wV®ue
(
V›w
 
v›w
,

173 
CursÜ
 
cursÜ
,

174 
cŞumnIndex
) {

175 ià(
v›w
.
	`g‘Id
(è=ğ
R
.
id
.
row_İtiÚs_bu‰Ú
){

177 
ImageV›w
 
iv
 = (ImageV›w)
v›w
;

178 
iv
.
	`£tOnClickLi¡’”
(
Ãw
 
V›w
.
	`OnClickLi¡’”
() {

179 
public
 
	`ÚClick
(
V›w
 
v
) {

180 
	`İ’CÚ‹xtM’u
(
v
);

183  
Œue
;

184 } ià(
v›w
.
	`g‘Id
(è=ğ
R
.
id
.
row_icÚ
) {

185 
	`£tSoundIcÚFromCursÜ
((
ImageV›w
è
v›w
, 
cursÜ
);

186  
Œue
;

189  
çl£
;

194 
	`»gi¡”FÜCÚ‹xtM’u
(
	`g‘Li¡V›w
());

196 
mF‹r
 = (
TextV›w
è
	`fšdV›wById
(
R
.
id
.
£¬ch_f‹r
);

197 ià(
mF‹r
 !ğ
nuÎ
) {

198 
mF‹r
.
	`addTextChªgedLi¡’”
(
this
);

200 
	}
}

202 
´iv©e
 
	$£tSoundIcÚFromCursÜ
(
ImageV›w
 
v›w
, 
CursÜ
 
cursÜ
) {

203 ià(0 !ğ
cursÜ
.
	`g‘IÁ
(cursÜ.
	`g‘CŞumnIndexOrThrow
(

204 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_RINGTONE
))) {

205 
v›w
.
	`£tImageResourû
(
R
.
d¿wabË
.
ty³_ršgtÚe
);

206 ((
V›w
è
v›w
.
	`g‘P¬’t
()).
	`£tBackgroundCŞÜ
(

207 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
ty³_bkgnd_ršgtÚe
));

208 } ià(0 !ğ
cursÜ
.
	`g‘IÁ
(cursÜ.
	`g‘CŞumnIndexOrThrow
(

209 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_ALARM
))) {

210 
v›w
.
	`£tImageResourû
(
R
.
d¿wabË
.
ty³_®¬m
);

211 ((
V›w
è
v›w
.
	`g‘P¬’t
()).
	`£tBackgroundCŞÜ
(

212 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
ty³_bkgnd_®¬m
));

213 } ià(0 !ğ
cursÜ
.
	`g‘IÁ
(cursÜ.
	`g‘CŞumnIndexOrThrow
(

214 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_NOTIFICATION
))) {

215 
v›w
.
	`£tImageResourû
(
R
.
d¿wabË
.
ty³_nÙifiÿtiÚ
);

216 ((
V›w
è
v›w
.
	`g‘P¬’t
()).
	`£tBackgroundCŞÜ
(

217 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
ty³_bkgnd_nÙifiÿtiÚ
));

218 } ià(0 !ğ
cursÜ
.
	`g‘IÁ
(cursÜ.
	`g‘CŞumnIndexOrThrow
(

219 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_MUSIC
))) {

220 
v›w
.
	`£tImageResourû
(
R
.
d¿wabË
.
ty³_music
);

221 ((
V›w
è
v›w
.
	`g‘P¬’t
()).
	`£tBackgroundCŞÜ
(

222 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
ty³_bkgnd_music
));

225 
SŒšg
 
f’ame
 = 
cursÜ
.
	`g‘SŒšg
(cursÜ.
	`g‘CŞumnIndexOrThrow
(

226 
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
));

227 ià(!
Ch—pSoundFe
.
	`isF’ameSuµÜ‹d
(
f’ame
)) {

228 ((
V›w
è
v›w
.
	`g‘P¬’t
()).
	`£tBackgroundCŞÜ
(

229 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
ty³_bkgnd_unsuµÜ‹d
));

231 
	}
}

234 @
Ov”ride


235 
´Ùeùed
 
	$ÚAùiv™yResuÉ
(
»que¡Code
, 
»suÉCode
,

236 
IÁ’t
 
d©aIÁ’t
) {

237 ià(
»que¡Code
 !ğ
REQUEST_CODE_EDIT
) {

241 ià(
»suÉCode
 !ğ
RESULT_OK
) {

245 
	`£tResuÉ
(
RESULT_OK
, 
d©aIÁ’t
);

246 
	`fšish
();

247 
	}
}

249 @
Ov”ride


250 
public
 
boŞ—n
 
	$ÚC»©eO±iÚsM’u
(
M’u
 
m’u
) {

251 
su³r
.
	`ÚC»©eO±iÚsM’u
(
m’u
);

252 
M’uI‹m
 
™em
;

254 
™em
 = 
m’u
.
	`add
(0, 
CMD_ABOUT
, 0, 
R
.
¡ršg
.
m’u_about
);

255 
™em
.
	`£tIcÚ
(
R
.
d¿wabË
.
m’u_about
);

257 
™em
 = 
m’u
.
	`add
(0, 
CMD_PRIVACY
, 0, 
R
.
¡ršg
.
m’u_´ivacy
);

258 
™em
.
	`£tIcÚ
(
ªdroid
.
R
.
d¿wabË
.
ic_m’u_sh¬e
);

260 
™em
 = 
m’u
.
	`add
(0, 
CMD_SHOW_ALL
, 0, 
R
.
¡ršg
.
m’u_show_®l_audio
);

261 
™em
.
	`£tIcÚ
(
R
.
d¿wabË
.
m’u_show_®l_audio
);

263  
Œue
;

264 
	}
}

266 @
Ov”ride


267 
public
 
boŞ—n
 
	$ÚP»·»O±iÚsM’u
(
M’u
 
m’u
) {

268 
su³r
.
	`ÚP»·»O±iÚsM’u
(
m’u
);

269 
m’u
.
	`fšdI‹m
(
CMD_ABOUT
).
	`£tVisibË
(
Œue
);

270 
m’u
.
	`fšdI‹m
(
CMD_PRIVACY
).
	`£tVisibË
(
Œue
);

271 
m’u
.
	`fšdI‹m
(
CMD_SHOW_ALL
).
	`£tVisibË
(
Œue
);

272 
m’u
.
	`fšdI‹m
(
CMD_SHOW_ALL
).
	`£tEÇbËd
(!
mShowAÎ
);

273  
Œue
;

274 
	}
}

276 @
Ov”ride


277 
public
 
boŞ—n
 
	$ÚO±iÚsI‹mS–eùed
(
M’uI‹m
 
™em
) {

278 
™em
.
	`g‘I‹mId
()) {

279 
CMD_ABOUT
:

280 
RšgdroidEd™Aùiv™y
.
	`ÚAbout
(
this
);

281  
Œue
;

282 
CMD_PRIVACY
:

283 
	`showPrivacyDŸlog
();

284  
Œue
;

285 
CMD_SHOW_ALL
:

286 
mShowAÎ
 = 
Œue
;

287 
	`»äeshLi¡V›w
();

288  
Œue
;

290  
çl£
;

292 
	}
}

294 @
Ov”ride


295 
public
 
	$ÚC»©eCÚ‹xtM’u
(
CÚ‹xtM’u
 
m’u
,

296 
V›w
 
v
,

297 
CÚ‹xtM’uInfo
 
m’uInfo
) {

298 
su³r
.
	`ÚC»©eCÚ‹xtM’u
(
m’u
, 
v
, 
m’uInfo
);

300 
CursÜ
 
c
 = 
mAd­‹r
.
	`g‘CursÜ
();

301 
SŒšg
 
t™Ë
 = 
c
.
	`g‘SŒšg
(c.
	`g‘CŞumnIndexOrThrow
(

302 
MedŸStÜe
.
Audio
.
MedŸ
.
TITLE
));

304 
m’u
.
	`£tH—d”T™Ë
(
t™Ë
);

306 
m’u
.
	`add
(0, 
CMD_EDIT
, 0, 
R
.
¡ršg
.
cÚ‹xt_m’u_ed™
);

307 
m’u
.
	`add
(0, 
CMD_DELETE
, 0, 
R
.
¡ršg
.
cÚ‹xt_m’u_d–‘e
);

310 ià(0 !ğ
c
.
	`g‘IÁ
(c.
	`g‘CŞumnIndexOrThrow
(

311 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_RINGTONE
))) {

312 
m’u
.
	`add
(0, 
CMD_SET_AS_DEFAULT
, 0, 
R
.
¡ršg
.
cÚ‹xt_m’u_deçuÉ_ršgtÚe
);

313 
m’u
.
	`add
(0, 
CMD_SET_AS_CONTACT
, 0, 
R
.
¡ršg
.
cÚ‹xt_m’u_cÚù
);

314 } ià(0 !ğ
c
.
	`g‘IÁ
(c.
	`g‘CŞumnIndexOrThrow
(

315 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_NOTIFICATION
))) {

316 
m’u
.
	`add
(0, 
CMD_SET_AS_DEFAULT
, 0, 
R
.
¡ršg
.
cÚ‹xt_m’u_deçuÉ_nÙifiÿtiÚ
);

318 
	}
}

320 @
Ov”ride


321 
public
 
boŞ—n
 
	$ÚCÚ‹xtI‹mS–eùed
(
M’uI‹m
 
™em
) {

322 
Ad­‹rCÚ‹xtM’uInfo
 
šfo
 =

323 (
Ad­‹rCÚ‹xtM’uInfo
è
™em
.
	`g‘M’uInfo
();

324 
™em
.
	`g‘I‹mId
()) {

325 
CMD_EDIT
:

326 
	`¡¬tRšgdroidEd™Ü
();

327  
Œue
;

328 
CMD_DELETE
:

329 
	`cÚfœmD–‘e
();

330  
Œue
;

331 
CMD_SET_AS_DEFAULT
:

332 
	`£tAsDeçuÉRšgtÚeOrNÙifiÿtiÚ
();

333  
Œue
;

334 
CMD_SET_AS_CONTACT
:

335  
	`choo£CÚùFÜRšgtÚe
(
™em
);

337  
su³r
.
	`ÚCÚ‹xtI‹mS–eùed
(
™em
);

339 
	}
}

341 
´iv©e
 
	$showPrivacyDŸlog
() {

342 
Œy
 {

343 
IÁ’t
 
š‹Á
 = 
Ãw
 
	`IÁ’t
(IÁ’t.
ACTION_EDIT
, 
Uri
.
	`·r£
(""));

344 
š‹Á
.
	`putExŒa
("´ivacy", 
Œue
);

345 
š‹Á
.
	`£tCÏssName
("com.ringdroid",

347 
	`¡¬tAùiv™yFÜResuÉ
(
š‹Á
, 
REQUEST_CODE_EDIT
);

348 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

349 
Log
.
	`e
("Ringdroid", "Couldn't show…rivacy dialog");

351 
	}
}

353 
´iv©e
 
	$£tAsDeçuÉRšgtÚeOrNÙifiÿtiÚ
(){

354 
CursÜ
 
c
 = 
mAd­‹r
.
	`g‘CursÜ
();

358 ià(0 !ğ
c
.
	`g‘IÁ
(c.
	`g‘CŞumnIndexOrThrow
(
MedŸStÜe
.
Audio
.
MedŸ
.
IS_RINGTONE
))){

359 
RšgtÚeMªag”
.
	`£tAùu®DeçuÉRšgtÚeUri
(

360 
RšgdroidS–eùAùiv™y
.
this
,

361 
RšgtÚeMªag”
.
TYPE_RINGTONE
,

362 
	`g‘Uri
());

363 
Tß¡
.
	`makeText
(

364 
RšgdroidS–eùAùiv™y
.
this
,

365 
R
.
¡ršg
.
deçuÉ_ršgtÚe_sucûss_mes§ge
,

366 
Tß¡
.
LENGTH_SHORT
)

367 .
	`show
();

369 
RšgtÚeMªag”
.
	`£tAùu®DeçuÉRšgtÚeUri
(

370 
RšgdroidS–eùAùiv™y
.
this
,

371 
RšgtÚeMªag”
.
TYPE_NOTIFICATION
,

372 
	`g‘Uri
());

373 
Tß¡
.
	`makeText
(

374 
RšgdroidS–eùAùiv™y
.
this
,

375 
R
.
¡ršg
.
deçuÉ_nÙifiÿtiÚ_sucûss_mes§ge
,

376 
Tß¡
.
LENGTH_SHORT
)

377 .
	`show
();

379 
	}
}

381 
´iv©e
 
Uri
 
	$g‘Uri
(){

383 
CursÜ
 
c
 = 
mAd­‹r
.
	`g‘CursÜ
();

384 
uriIndex
 = 
c
.
	`g‘CŞumnIndex
(

385 "\"" + 
MedŸStÜe
.
Audio
.
MedŸ
.
INTERNAL_CONTENT_URI
 + "\"");

386 ià(
uriIndex
 == -1) {

387 
uriIndex
 = 
c
.
	`g‘CŞumnIndex
(

388 "\"" + 
MedŸStÜe
.
Audio
.
MedŸ
.
EXTERNAL_CONTENT_URI
 + "\"");

390 
SŒšg
 
™emUri
 = 
c
.
	`g‘SŒšg
(
uriIndex
) + "/" +

391 
c
.
	`g‘SŒšg
(c.
	`g‘CŞumnIndexOrThrow
(
MedŸStÜe
.
Audio
.
MedŸ
.
_ID
));

392  (
Uri
.
	`·r£
(
™emUri
));

393 
	}
}

395 
´iv©e
 
boŞ—n
 
	$choo£CÚùFÜRšgtÚe
(
M’uI‹m
 
™em
){

396 
Œy
 {

398 
IÁ’t
 
š‹Á
 = 
Ãw
 
	`IÁ’t
(IÁ’t.
ACTION_EDIT
, 
	`g‘Uri
());

399 
š‹Á
.
	`£tCÏssName
(

402 
	`¡¬tAùiv™yFÜResuÉ
(
š‹Á
, 
REQUEST_CODE_CHOOSE_CONTACT
);

403 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

404 
Log
.
	`e
("Ringdroid", "Couldn't open Choose Contact window");

406  
Œue
;

407 
	}
}

409 
´iv©e
 
	$cÚfœmD–‘e
() {

412 
CursÜ
 
c
 = 
mAd­‹r
.
	`g‘CursÜ
();

413 
¬ti¡Index
 = 
c
.
	`g‘CŞumnIndexOrThrow
(

414 
MedŸStÜe
.
Audio
.
MedŸ
.
ARTIST
);

415 
SŒšg
 
¬ti¡
 = 
c
.
	`g‘SŒšg
(c.
	`g‘CŞumnIndexOrThrow
(

416 
MedŸStÜe
.
Audio
.
MedŸ
.
ARTIST
));

417 
Ch¬Sequ’û
 
ršgdroidA¹i¡
 =

418 
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
¬ti¡_Çme
);

420 
Ch¬Sequ’û
 
mes§ge
;

421 ià(
¬ti¡
.
	`equ®s
(
ršgdroidA¹i¡
)) {

422 
mes§ge
 = 
	`g‘Resourûs
().
	`g‘Text
(

423 
R
.
¡ršg
.
cÚfœm_d–‘e_ršgdroid
);

425 
mes§ge
 = 
	`g‘Resourûs
().
	`g‘Text
(

426 
R
.
¡ršg
.
cÚfœm_d–‘e_nÚ_ršgdroid
);

429 
Ch¬Sequ’û
 
t™Ë
;

430 ià(0 !ğ
c
.
	`g‘IÁ
(c.
	`g‘CŞumnIndexOrThrow
(

431 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_RINGTONE
))) {

432 
t™Ë
 = 
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
d–‘e_ršgtÚe
);

433 } ià(0 !ğ
c
.
	`g‘IÁ
(c.
	`g‘CŞumnIndexOrThrow
(

434 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_ALARM
))) {

435 
t™Ë
 = 
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
d–‘e_®¬m
);

436 } ià(0 !ğ
c
.
	`g‘IÁ
(c.
	`g‘CŞumnIndexOrThrow
(

437 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_NOTIFICATION
))) {

438 
t™Ë
 = 
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
d–‘e_nÙifiÿtiÚ
);

439 } ià(0 !ğ
c
.
	`g‘IÁ
(c.
	`g‘CŞumnIndexOrThrow
(

440 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_MUSIC
))) {

441 
t™Ë
 = 
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
d–‘e_music
);

443 
t™Ë
 = 
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
d–‘e_audio
);

446 
Ãw
 
AË¹DŸlog
.
	`Bud”
(
RšgdroidS–eùAùiv™y
.
this
)

447 .
	`£tT™Ë
(
t™Ë
)

448 .
	`£tMes§ge
(
mes§ge
)

449 .
	`£tPos™iveBu‰Ú
(

450 
R
.
¡ršg
.
d–‘e_ok_bu‰Ú
,

451 
Ãw
 
DŸlogIÁ”çû
.
	`OnClickLi¡’”
() {

452 
public
 
	`ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

453 
whichBu‰Ú
) {

454 
	`ÚD–‘e
();

457 .
	`£tNeg©iveBu‰Ú
(

458 
R
.
¡ršg
.
d–‘e_ÿnûl_bu‰Ú
,

459 
Ãw
 
DŸlogIÁ”çû
.
	`OnClickLi¡’”
() {

460 
public
 
	`ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

461 
whichBu‰Ú
) {

464 .
	`£tCªûÏbË
(
Œue
)

465 .
	`show
();

466 
	}
}

468 
´iv©e
 
	$ÚD–‘e
() {

469 
CursÜ
 
c
 = 
mAd­‹r
.
	`g‘CursÜ
();

470 
d©aIndex
 = 
c
.
	`g‘CŞumnIndexOrThrow
(
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
);

471 
SŒšg
 
f’ame
 = 
c
.
	`g‘SŒšg
(
d©aIndex
);

473 
uriIndex
 = 
c
.
	`g‘CŞumnIndex
(

474 "\"" + 
MedŸStÜe
.
Audio
.
MedŸ
.
INTERNAL_CONTENT_URI
 + "\"");

475 ià(
uriIndex
 == -1) {

476 
uriIndex
 = 
c
.
	`g‘CŞumnIndex
(

477 "\"" + 
MedŸStÜe
.
Audio
.
MedŸ
.
EXTERNAL_CONTENT_URI
 + "\"");

479 ià(
uriIndex
 == -1) {

480 
	`showFš®AË¹
(
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
d–‘e_çed
));

484 ià(!
Ãw
 
	`Fe
(
f’ame
).
	`d–‘e
()) {

485 
	`showFš®AË¹
(
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
d–‘e_çed
));

488 
SŒšg
 
™emUri
 = 
c
.
	`g‘SŒšg
(
uriIndex
) + "/" +

489 
c
.
	`g‘SŒšg
(c.
	`g‘CŞumnIndexOrThrow
(
MedŸStÜe
.
Audio
.
MedŸ
.
_ID
));

490 
	`g‘CÚ‹ÁResŞv”
().
	`d–‘e
(
Uri
.
	`·r£
(
™emUri
), 
nuÎ
,‚ull);

491 
	}
}

493 
´iv©e
 
	$showFš®AË¹
(
Ch¬Sequ’û
 
mes§ge
) {

494 
Ãw
 
AË¹DŸlog
.
	`Bud”
(
RšgdroidS–eùAùiv™y
.
this
)

495 .
	`£tT™Ë
(
	`g‘Resourûs
().
	`g‘Text
(
R
.
¡ršg
.
®”t_t™Ë_çu»
))

496 .
	`£tMes§ge
(
mes§ge
)

497 .
	`£tPos™iveBu‰Ú
(

498 
R
.
¡ršg
.
®”t_ok_bu‰Ú
,

499 
Ãw
 
DŸlogIÁ”çû
.
	`OnClickLi¡’”
() {

500 
public
 
	`ÚClick
(
DŸlogIÁ”çû
 
dŸlog
,

501 
whichBu‰Ú
) {

502 
	`fšish
();

505 .
	`£tCªûÏbË
(
çl£
)

506 .
	`show
();

507 
	}
}

509 
´iv©e
 
	$ÚRecÜd
() {

510 
Œy
 {

511 
IÁ’t
 
š‹Á
 = 
Ãw
 
	`IÁ’t
(IÁ’t.
ACTION_EDIT
,

512 
Uri
.
	`·r£
("record"));

513 
š‹Á
.
	`putExŒa
("was_get_content_intent",

514 
mWasG‘CÚ‹ÁIÁ’t
);

515 
š‹Á
.
	`£tCÏssName
(

518 
	`¡¬tAùiv™yFÜResuÉ
(
š‹Á
, 
REQUEST_CODE_EDIT
);

519 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

520 
Log
.
	`e
("Ringdroid", "Couldn't startƒditor");

522 
	}
}

524 
´iv©e
 
	$¡¬tRšgdroidEd™Ü
() {

525 
CursÜ
 
c
 = 
mAd­‹r
.
	`g‘CursÜ
();

526 
d©aIndex
 = 
c
.
	`g‘CŞumnIndexOrThrow
(
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
);

527 
SŒšg
 
f’ame
 = 
c
.
	`g‘SŒšg
(
d©aIndex
);

528 
Œy
 {

529 
IÁ’t
 
š‹Á
 = 
Ãw
 
	`IÁ’t
(IÁ’t.
ACTION_EDIT
,

530 
Uri
.
	`·r£
(
f’ame
));

531 
š‹Á
.
	`putExŒa
("was_get_content_intent",

532 
mWasG‘CÚ‹ÁIÁ’t
);

533 
š‹Á
.
	`£tCÏssName
(

536 
	`¡¬tAùiv™yFÜResuÉ
(
š‹Á
, 
REQUEST_CODE_EDIT
);

537 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

538 
Log
.
	`e
("Ringdroid", "Couldn't startƒditor");

540 
	}
}

542 
´iv©e
 
CursÜ
 
	$g‘IÁ”ÇlAudioCursÜ
(
SŒšg
 
£ËùiÚ
,

543 
SŒšg
[] 
£ËùiÚArgs
) {

544  
	`mªagedQu”y
(

545 
MedŸStÜe
.
Audio
.
MedŸ
.
INTERNAL_CONTENT_URI
,

546 
INTERNAL_COLUMNS
,

547 
£ËùiÚ
,

548 
£ËùiÚArgs
,

549 
MedŸStÜe
.
Audio
.
MedŸ
.
DEFAULT_SORT_ORDER
);

550 
	}
}

552 
´iv©e
 
CursÜ
 
	$g‘Ex‹º®AudioCursÜ
(
SŒšg
 
£ËùiÚ
,

553 
SŒšg
[] 
£ËùiÚArgs
) {

554  
	`mªagedQu”y
(

555 
MedŸStÜe
.
Audio
.
MedŸ
.
EXTERNAL_CONTENT_URI
,

556 
EXTERNAL_COLUMNS
,

557 
£ËùiÚ
,

558 
£ËùiÚArgs
,

559 
MedŸStÜe
.
Audio
.
MedŸ
.
DEFAULT_SORT_ORDER
);

560 
	}
}

562 
public
 
CursÜ
 
	$£¬chMySDC¬dMusic
() {

563 
CÚ‹ÁResŞv”
 
»sŞv”
 = 
this
.
	`g‘CÚ‹ÁResŞv”
();

564 
SŒšg
 [] 
´ojeù
 = {"*"};

565 
CursÜ
 
cursÜ
;

566 
SŒšg
 
¡r
 = "%/sdcard/Music/%.mp3";

567 
cursÜ
 = 
»sŞv”
.
	`qu”y
(
MedŸStÜe
.
Audio
.
MedŸ
.
EXTERNAL_CONTENT_URI
, 
´ojeù
, "_d©a"+" LIKE "+'"'+
¡r
+'"', 
nuÎ
,‚ull);

568 
Log
.
	`d
("@@@", "cursÜ = " + 
cursÜ
);

569 ià(
cursÜ
 !ğ
nuÎ
) {

570 
Log
.
	`d
("@@@", "couÁ = " + 
cursÜ
.
	`g‘CouÁ
());

572  
cursÜ
;

573 
	}
}

575 
CursÜ
 
	$ü—‹CursÜ
(
SŒšg
 
f‹r
) {

576 
A¼ayLi¡
<
SŒšg
> 
¬gs
 = 
Ãw
 ArrayList<String>();

577 
SŒšg
 
£ËùiÚ
;

579 ià(
mShowAÎ
) {

581 
£ËùiÚ
 = "(_DATA LIKE ?)";

582 
¬gs
.
	`add
("%");

584 
£ËùiÚ
 += "(_DATA LIKE ?)";

585 
¬gs
.
	`add
("%");

587 
£ËùiÚ
 = "(";

588 
SŒšg
 
ex‹nsiÚ
 : 
Ch—pSoundFe
.
	`g‘SuµÜ‹dEx‹nsiÚs
()) {

589 
¬gs
.
	`add
("%." + 
ex‹nsiÚ
);

590 ià(
£ËùiÚ
.
	`Ëngth
() > 1) {

591 
£ËùiÚ
 += " OR ";

593 
£ËùiÚ
 += "(_DATA LIKE ?)";

595 
£ËùiÚ
 += ")";

597 
£ËùiÚ
 = "(" + selection + ") AND (_DATA NOT LIKE ?)";

598 
¬gs
.
	`add
("%espeak-data/scratch%");

601 ià(
f‹r
 !ğ
nuÎ
 && f‹r.
	`Ëngth
() > 0) {

602 
f‹r
 = "%" + filter + "%";

603 
£ËùiÚ
 =

604 "(" + 
£ËùiÚ
 + " AND " +

606 
¬gs
.
	`add
(
f‹r
);

607 
¬gs
.
	`add
(
f‹r
);

608 
¬gs
.
	`add
(
f‹r
);

611 
SŒšg
[] 
¬gsA¼ay
 = 
¬gs
.
	`toA¼ay
(
Ãw
 SŒšg[¬gs.
	`size
()]);

613 
CursÜ
 
ex‹º®
 = 
	`g‘Ex‹º®AudioCursÜ
(
£ËùiÚ
, 
¬gsA¼ay
);

614 
CursÜ
 
š‹º®
 = 
	`g‘IÁ”ÇlAudioCursÜ
(
£ËùiÚ
, 
¬gsA¼ay
);

624 
CursÜ
 
c
 = 
	`£¬chMySDC¬dMusic
();

625 
	`¡¬tMªagšgCursÜ
(
c
);

626  
c
;

627 
	}
}

629 
public
 
	$befÜeTextChªged
(
Ch¬Sequ’û
 
s
, 
¡¬t
,

630 
couÁ
, 
aá”
) {

631 
	}
}

633 
public
 
	$ÚTextChªged
(
Ch¬Sequ’û
 
s
,

634 
¡¬t
, 
befÜe
, 
couÁ
) {

635 
	}
}

637 
public
 
	$aá”TextChªged
(
Ed™abË
 
s
) {

638 
	`»äeshLi¡V›w
();

639 
	}
}

641 
´iv©e
 
	$»äeshLi¡V›w
() {

642 
SŒšg
 
f‹rSŒ
 = 
mF‹r
.
	`g‘Text
().
	`toSŒšg
();

643 
CursÜ
 
c
 = 
	`ü—‹CursÜ
(
f‹rSŒ
);

644 
mAd­‹r
.
	`chªgeCursÜ
(
c
);

645 
c
.
	`şo£
();

646 
	}
}

648 
´iv©e
 
fš®
 
	gSŒšg
[] 
	gINTERNAL_COLUMNS
 = 
Ãw
 
SŒšg
[] {

649 
MedŸStÜe
.
Audio
.
MedŸ
.
_ID
,

650 
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
,

651 
MedŸStÜe
.
Audio
.
MedŸ
.
TITLE
,

652 
MedŸStÜe
.
Audio
.
MedŸ
.
ARTIST
,

653 
MedŸStÜe
.
Audio
.
MedŸ
.
ALBUM
,

654 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_RINGTONE
,

655 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_ALARM
,

656 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_NOTIFICATION
,

657 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_MUSIC
,

658 "\"" + 
MedŸStÜe
.
Audio
.
MedŸ
.
INTERNAL_CONTENT_URI
 + "\""

661 
´iv©e
 
fš®
 
	gSŒšg
[] 
	gEXTERNAL_COLUMNS
 = 
Ãw
 
SŒšg
[] {

662 
MedŸStÜe
.
Audio
.
MedŸ
.
_ID
,

663 
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
,

664 
MedŸStÜe
.
Audio
.
MedŸ
.
TITLE
,

665 
MedŸStÜe
.
Audio
.
MedŸ
.
ARTIST
,

666 
MedŸStÜe
.
Audio
.
MedŸ
.
ALBUM
,

667 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_RINGTONE
,

668 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_ALARM
,

669 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_NOTIFICATION
,

670 
MedŸStÜe
.
Audio
.
MedŸ
.
IS_MUSIC
,

671 "\"" + 
MedŸStÜe
.
Audio
.
MedŸ
.
EXTERNAL_CONTENT_URI
 + "\""

	@src/com/ringdroid/SeekTest.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gSh¬edP»ã»nûs
;

20 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gAudioMªag”
;

21 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gMedŸPÏy”
.
	gOnCom¶‘iÚLi¡’”
;

22 
impÜt
 
	gªdroid
.
	gmedŸ
.
	gMedŸPÏy”
;

23 
impÜt
 
	gªdroid
.
	gut
.
	gLog
;

25 
impÜt
 
	gjava
.
	gio
.
	gFe
;

26 
impÜt
 
	gjava
.
	gio
.
	gFeIÅutSŒ—m
;

27 
impÜt
 
	gjava
.
	gio
.
	gFeOuutSŒ—m
;

28 
impÜt
 
	gjava
.
	gio
.
	gRªdomAcûssFe
;

29 
impÜt
 
	gjava
.
	gut
.
	gD©e
;

30 
impÜt
 
	gjava
.
	gut
.
	gRªdom
;

45 
public
 cÏs 
	cS“kTe¡
 {

46 
public
 
fš®
 
SŒšg
 
	mPREF_SEEK_TEST_RESULT
 = "seek_test_result";

47 
public
 
fš®
 
SŒšg
 
	mPREF_SEEK_TEST_DATE
 = "seek_test_date";

49 
	mbefÜe
;

50 
	maá”
;

52 
boŞ—n
 
	$CªS“kAccu¿‹ly
(
Sh¬edP»ã»nûs
 
´efs
) {

53 
Log
.
	`i
("Ringdroid", "Running CanSeekAccurately");

54 
boŞ—n
 
»suÉ
 = 
çl£
;

56 
»suÉ
 = 
´efs
.
	`g‘BoŞ—n
(
PREF_SEEK_TEST_RESULT
, 
çl£
);

57 
‹¡D©e
 = 
´efs
.
	`g‘LÚg
(
PREF_SEEK_TEST_DATE
, 0);

58 
now
 = (
Ãw
 
	`D©e
()).
	`g‘Time
();

59 
ÚeW“kMS
 = 1000 * 60 * 60 * 24 * 7;

61 ià(
now
 - 
‹¡D©e
 < 
ÚeW“kMS
) {

62 
Log
.
	`i
("Ršgdroid", "Fa¡ MP3 s“k„esuÉ cached: " + 
»suÉ
);

63  
»suÉ
;

66 
SŒšg
 
f’ame
 = "/sdÿrd/s’û" + 
Ãw
 
	`Rªdom
().
	`ÃxtLÚg
() + ".mp3";

67 
Fe
 
fe
 = 
Ãw
 
	`Fe
(
f’ame
);

68 
boŞ—n
 
ok
 = 
çl£
;

69 
Œy
 {

70 
RªdomAcûssFe
 
f
 = 
Ãw
 
	`RªdomAcûssFe
(
fe
, "r");

71 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

73 
ok
 = 
Œue
;

76 ià(!
ok
) {

77 
Log
.
	`i
("Ringdroid", "Couldn't findemporary filename");

78  
çl£
;

81 
Log
.
	`i
("Ršgdroid", "Wr™šg " + 
f’ame
);

83 
Œy
 {

84 
fe
.
	`ü—‹NewFe
();

85 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

87 
Log
.
	`i
("Ringdroid", "Couldn't output for writing");

88  
çl£
;

91 
Œy
 {

92 
FeOuutSŒ—m
 
out
 = 
Ãw
 
	`FeOuutSŒ—m
(
fe
);

93 
i
 = 0; i < 80; i++) {

94 
out
.
	`wr™e
(
SILENCE_MP3_FRAME
, 0, SILENCE_MP3_FRAME.
Ëngth
);

96 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

97 
Log
.
	`i
("Ringdroid", "Couldn't writeemp silence file");

98 
Œy
 {

99 
fe
.
	`d–‘e
();

100 } 
	`ÿtch
 (
Exû±iÚ
 
e2
) {}

101  
çl£
;

104 
Œy
 {

105 
Log
.
	`i
("Ringdroid", "File written, startingo…lay");

106 
MedŸPÏy”
 
¶ay”
 = 
Ãw
 
	`MedŸPÏy”
();

107 
¶ay”
.
	`£tAudioSŒ—mTy³
(
AudioMªag”
.
STREAM_MUSIC
);

108 
FeIÅutSŒ—m
 
sub£tIÅutSŒ—m
 = 
Ãw
 
	`FeIÅutSŒ—m
(
f’ame
);

109 
¡¬t
 = 70 * 
SILENCE_MP3_FRAME
.
Ëngth
;

110 
Ën
 = 10 * 
SILENCE_MP3_FRAME
.
Ëngth
;

111 
¶ay”
.
	`£tD©aSourû
(
sub£tIÅutSŒ—m
.
	`g‘FD
(),

112 
¡¬t
,

113 
Ën
);

114 
Log
.
	`i
("Ringdroid", "Preparing");

115 
¶ay”
.
	`´•¬e
();

116 
befÜe
 = 0;

117 
aá”
 = 0;

118 
¶ay”
.
	`£tOnCom¶‘iÚLi¡’”
(
Ãw
 
	`OnCom¶‘iÚLi¡’”
() {

119 
public
 
synchrÚized
 
	`ÚCom¶‘iÚ
(
MedŸPÏy”
 
¬g0
) {

120 
Log
.
	`i
("Ringdroid", "Got callback");

121 
aá”
 = 
Sy¡em
.
	`cu¼’tTimeMlis
();

125 
Log
.
	`i
("Ringdroid", "Starting");

126 
¶ay”
.
	`¡¬t
();

128 
i
 = 0; i < 200 && 
befÜe
 == 0; i++) {

129 ià(
¶ay”
.
	`g‘Cu¼’tPos™iÚ
() > 0) {

130 
Log
.
	`i
("Ršgdroid", "S¹ed…Ïyšg‡á” " + (
i
 * 10) +

132 
befÜe
 = 
Sy¡em
.
	`cu¼’tTimeMlis
();

134 
Th»ad
.
	`¦“p
(10);

136 ià(
befÜe
 == 0) {

137 
Log
.
	`i
("Ringdroid", "Never started…laying.");

138 
Log
.
	`i
("Ringdroid", "Fast MP3 seek disabled by default");

139 
Œy
 {

140 
fe
.
	`d–‘e
();

141 } 
	`ÿtch
 (
Exû±iÚ
 
e2
) {}

143 
Sh¬edP»ã»nûs
.
Ed™Ü
 
´efsEd™Ü
 = 
´efs
.
	`ed™
();

144 
´efsEd™Ü
.
	`putLÚg
(
PREF_SEEK_TEST_DATE
, 
now
);

145 
´efsEd™Ü
.
	`putBoŞ—n
(
PREF_SEEK_TEST_RESULT
, 
»suÉ
);

146 
´efsEd™Ü
.
	`comm™
();

148  
çl£
;

151 
Log
.
	`i
("Ringdroid", "Sleeping");

152 
i
 = 0; i < 300 && 
aá”
 == 0; i++) {

153 
Log
.
	`i
("Ršgdroid", "Pos: " + 
¶ay”
.
	`g‘Cu¼’tPos™iÚ
());

154 
Th»ad
.
	`¦“p
(10);

157 
Log
.
	`i
("Ršgdroid", "ResuÉ: " + 
befÜe
 + ", " + 
aá”
);

159 ià(
aá”
 > 
befÜe
 &&‡fter < before + 2000) {

160 
d–
 = 
aá”
 > 
befÜe
?‡fter - before: -1;

161 
Log
.
	`i
("Ršgdroid", "Fa¡ MP3 s“kƒÇbËd: " + 
d–
);

162 
»suÉ
 = 
Œue
;

164 
Log
.
	`i
("Ringdroid", "Fast MP3 seek disabled");

166 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

167 
e
.
	`´štSckT¿û
();

168 
Log
.
	`i
("Ršgdroid", "Couldn'ˆ¶ay: " + 
e
.
	`toSŒšg
());

169 
Log
.
	`i
("Ringdroid", "Fast MP3 seek disabled by default");

170 
Œy
 {

171 
fe
.
	`d–‘e
();

172 } 
	`ÿtch
 (
Exû±iÚ
 
e2
) {}

174 
Sh¬edP»ã»nûs
.
Ed™Ü
 
´efsEd™Ü
 = 
´efs
.
	`ed™
();

175 
´efsEd™Ü
.
	`putLÚg
(
PREF_SEEK_TEST_DATE
, 
now
);

176 
´efsEd™Ü
.
	`putBoŞ—n
(
PREF_SEEK_TEST_RESULT
, 
»suÉ
);

177 
´efsEd™Ü
.
	`comm™
();

179  
çl£
;

182 
Sh¬edP»ã»nûs
.
Ed™Ü
 
´efsEd™Ü
 = 
´efs
.
	`ed™
();

183 
´efsEd™Ü
.
	`putLÚg
(
PREF_SEEK_TEST_DATE
, 
now
);

184 
´efsEd™Ü
.
	`putBoŞ—n
(
PREF_SEEK_TEST_RESULT
, 
»suÉ
);

185 
´efsEd™Ü
.
	`comm™
();

187 
Œy
 {

188 
fe
.
	`d–‘e
();

189 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {}

191  
»suÉ
;

194 
´iv©e
 
by‹
 
SILENCE_MP3_FRAME
[] = {

195 (
by‹
)0xff, (byte)0xfb, (byte)0x10, (byte)0xc4, (byte)0x00,

196 (
by‹
)0x03, (byte)0x81, (byte)0xf4, (byte)0x01, (byte)0x26,

197 (
by‹
)0x60, (byte)0x00, (byte)0x40, (byte)0x20, (byte)0x59,

198 (
by‹
)0x80, (byte)0x23, (byte)0x48, (byte)0x00, (byte)0x09,

199 (
by‹
)0x74, (byte)0x00, (byte)0x01, (byte)0x12, (byte)0x03,

200 (
by‹
)0xff, (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xfe,

201 (
by‹
)0x9f, (byte)0x63, (byte)0xbf, (byte)0xd1, (byte)0x7a,

202 (
by‹
)0x3f, (byte)0x5d, (byte)0x01, (byte)0xff, (byte)0xff,

203 (
by‹
)0xff, (byte)0xff, (byte)0xfe, (byte)0x8d, (byte)0xad,

204 (
by‹
)0x6c, (byte)0x31, (byte)0x42, (byte)0xc3, (byte)0x02,

205 (
by‹
)0xc7, (byte)0x0c, (byte)0x09, (byte)0x86, (byte)0x83,

206 (
by‹
)0xa8, (byte)0x7a, (byte)0x3a, (byte)0x68, (byte)0x4c,

207 (
by‹
)0x41, (byte)0x4d, (byte)0x45, (byte)0x33, (byte)0x2e,

208 (
by‹
)0x39, (byte)0x38, (byte)0x2e, (byte)0x32, (byte)0x00,

209 (
by‹
)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,

210 (
by‹
)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,

211 (
by‹
)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,

212 (
by‹
)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,

213 (
by‹
)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,

214 (
by‹
)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,

215 (
by‹
)0x00, (by‹)0x00, (by‹)0x00, (by‹)0x00 
	}
};

	@src/com/ringdroid/SongMetadataReader.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	g­p
.
	gAùiv™y
;

20 
impÜt
 
	gªdroid
.
	gd©aba£
.
	gCursÜ
;

21 
impÜt
 
	gªdroid
.
	gÃt
.
	gUri
;

22 
impÜt
 
	gªdroid
.
	g´ovid”
.
	gMedŸStÜe
;

24 
impÜt
 
	gjava
.
	gut
.
	gHashM­
;

26 
public
 cÏs 
	cSÚgM‘ad©aR—d”
 {

27 
public
 
Uri
 
	mGENRES_URI
 = 
MedŸStÜe
.
Audio
.
G’»s
.
EXTERNAL_CONTENT_URI
;

28 
public
 
Aùiv™y
 
	mmAùiv™y
 = 
nuÎ
;

29 
public
 
SŒšg
 
	mmF’ame
 = "";

30 
public
 
SŒšg
 
	mmT™Ë
 = "";

31 
public
 
SŒšg
 
	mmA¹i¡
 = "";

32 
public
 
SŒšg
 
	mmAlbum
 = "";

33 
public
 
SŒšg
 
	mmG’»
 = "";

34 
public
 
	mmY—r
 = -1;

36 
	$SÚgM‘ad©aR—d”
(
Aùiv™y
 
aùiv™y
, 
SŒšg
 
f’ame
) {

37 
mAùiv™y
 = 
aùiv™y
;

38 
mF’ame
 = 
f’ame
;

39 
mT™Ë
 = 
	`g‘Ba£Çme
(
f’ame
);

40 
Œy
 {

41 
	`R—dM‘ad©a
();

42 } 
	`ÿtch
 (
Exû±iÚ
 
e
) {

46 
´iv©e
 
	$R—dM‘ad©a
() {

47 
SŒšg
 
GENRE_ID
 = 
MedŸStÜe
.
Audio
.
G’»s
.
_ID
;

48 
SŒšg
 
GENRE_NAME
 = 
MedŸStÜe
.
Audio
.
G’»s
.
NAME
;

49 
SŒšg
 
AUDIO_ID
 = 
MedŸStÜe
.
Audio
.
MedŸ
.
_ID
;

52 
HashM­
<
SŒšg
, SŒšg> 
g’»IdM­
 = 
Ãw
 HashMap<String, String>();

53 
CursÜ
 
c
 = 
mAùiv™y
.
	`mªagedQu”y
(

54 
GENRES_URI
,

55 
Ãw
 
SŒšg
[] { 
GENRE_ID
, 
GENRE_NAME
 },

56 
nuÎ
,‚ull,‚ull);

57 
c
.
	`moveToFœ¡
(); !c.
	`isAá”La¡
(); c.
	`moveToNext
()) {

58 
g’»IdM­
.
	`put
(
c
.
	`g‘SŒšg
(0), c.getString(1));

60 
mG’»
 = "";

61 
SŒšg
 
g’»Id
 : 
g’»IdM­
.
	`keyS‘
()) {

62 
c
 = 
mAùiv™y
.
	`mªagedQu”y
(

63 
	`makeG’»Uri
(
g’»Id
),

64 
Ãw
 
SŒšg
[] { 
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
 },

65 
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
 + " LIKE \"" + 
mF’ame
 + "\"",

66 
nuÎ
,‚ull);

67 ià(
c
.
	`g‘CouÁ
() != 0) {

68 
mG’»
 = 
g’»IdM­
.
	`g‘
(
g’»Id
);

71 
c
 = 
nuÎ
;

74 
Uri
 
uri
 = 
MedŸStÜe
.
Audio
.
MedŸ
.
	`g‘CÚ‹ÁUriFÜP©h
(
mF’ame
);

75 
c
 = 
mAùiv™y
.
	`mªagedQu”y
(

76 
uri
,

77 
Ãw
 
SŒšg
[] {

78 
MedŸStÜe
.
Audio
.
MedŸ
.
_ID
,

79 
MedŸStÜe
.
Audio
.
MedŸ
.
TITLE
,

80 
MedŸStÜe
.
Audio
.
MedŸ
.
ARTIST
,

81 
MedŸStÜe
.
Audio
.
MedŸ
.
ALBUM
,

82 
MedŸStÜe
.
Audio
.
MedŸ
.
YEAR
,

83 
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
 },

84 
MedŸStÜe
.
Audio
.
MedŸ
.
DATA
 + " LIKE \"" + 
mF’ame
 + "\"",

85 
nuÎ
,‚ull);

86 ià(
c
.
	`g‘CouÁ
() == 0) {

87 
mT™Ë
 = 
	`g‘Ba£Çme
(
mF’ame
);

88 
mA¹i¡
 = "";

89 
mAlbum
 = "";

90 
mY—r
 = -1;

93 
c
.
	`moveToFœ¡
();

94 
mT™Ë
 = 
	`g‘SŒšgFromCŞumn
(
c
, 
MedŸStÜe
.
Audio
.
MedŸ
.
TITLE
);

95 ià(
mT™Ë
 =ğ
nuÎ
 || mT™Ë.
	`Ëngth
() == 0) {

96 
mT™Ë
 = 
	`g‘Ba£Çme
(
mF’ame
);

98 
mA¹i¡
 = 
	`g‘SŒšgFromCŞumn
(
c
, 
MedŸStÜe
.
Audio
.
MedŸ
.
ARTIST
);

99 
mAlbum
 = 
	`g‘SŒšgFromCŞumn
(
c
, 
MedŸStÜe
.
Audio
.
MedŸ
.
ALBUM
);

100 
mY—r
 = 
	`g‘IÁeg”FromCŞumn
(
c
, 
MedŸStÜe
.
Audio
.
MedŸ
.
YEAR
);

101 
	}
}

103 
´iv©e
 
Uri
 
	$makeG’»Uri
(
SŒšg
 
g’»Id
) {

104 
SŒšg
 
CONTENTDIR
 = 
MedŸStÜe
.
Audio
.
G’»s
.
Memb”s
.
CONTENT_DIRECTORY
;

105  
Uri
.
	`·r£
(

106 
Ãw
 
	`SŒšgBud”
()

107 .
	`­³nd
(
GENRES_URI
.
	`toSŒšg
())

108 .
	`­³nd
("/")

109 .
	`­³nd
(
g’»Id
)

110 .
	`­³nd
("/")

111 .
	`­³nd
(
CONTENTDIR
)

112 .
	`toSŒšg
());

113 
	}
}

115 
´iv©e
 
SŒšg
 
	$g‘SŒšgFromCŞumn
(
CursÜ
 
c
, 
SŒšg
 
cŞumnName
) {

116 
šdex
 = 
c
.
	`g‘CŞumnIndexOrThrow
(
cŞumnName
);

117 
SŒšg
 
v®ue
 = 
c
.
	`g‘SŒšg
(
šdex
);

118 ià(
v®ue
 !ğ
nuÎ
 && v®ue.
	`Ëngth
() > 0) {

119  
v®ue
;

121  
nuÎ
;

123 
	}
}

125 
´iv©e
 
	$g‘IÁeg”FromCŞumn
(
CursÜ
 
c
, 
SŒšg
 
cŞumnName
) {

126 
šdex
 = 
c
.
	`g‘CŞumnIndexOrThrow
(
cŞumnName
);

127 
IÁeg”
 
v®ue
 = 
c
.
	`g‘IÁ
(
šdex
);

128 ià(
v®ue
 !ğ
nuÎ
) {

129  
v®ue
;

133 
	}
}

135 
´iv©e
 
SŒšg
 
	$g‘Ba£Çme
(
SŒšg
 
f’ame
) {

136  
f’ame
.
	`sub¡ršg
(f’ame.
	`Ï¡IndexOf
('/') + 1,

137 
f’ame
.
	`Ï¡IndexOf
('.'));

138 
	}
}

	@src/com/ringdroid/WaveformView.java

17 
·ckage
 
	gcom
.
	gršgdroid
;

19 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	gCÚ‹xt
;

20 
impÜt
 
	gªdroid
.
	gcÚ‹Á
.
	g»s
.
	gResourûs
;

21 
impÜt
 
	gªdroid
.
	gg¿phics
.
	gCªvas
;

22 
impÜt
 
	gªdroid
.
	gg¿phics
.
	gPašt
;

23 
impÜt
 
	gªdroid
.
	gg¿phics
.
	gDashP©hEfãù
;

24 
impÜt
 
	gªdroid
.
	gut
.
	gA‰ribu‹S‘
;

25 
impÜt
 
	gªdroid
.
	gv›w
.
	gGe¡u»D‘eùÜ
;

26 
impÜt
 
	gªdroid
.
	gv›w
.
	gMÙiÚEv’t
;

27 
impÜt
 
	gªdroid
.
	gv›w
.
	gV›w
;

29 
impÜt
 
	gcom
.
	gršgdroid
.
	gsoundfe
.
	gCh—pSoundFe
;

31 
impÜt
 
	gjava
.
	gut
.
	gM­
;

46 
public
 cÏs 
	cWavefÜmV›w
 
ex‹nds
 
	mV›w
 {

47 
public
 
š‹rçû
 
	mWavefÜmLi¡’”
 {

48 
public
 
wavefÜmTouchS¹
(
x
);

49 
public
 
wavefÜmTouchMove
(
x
);

50 
public
 
wavefÜmTouchEnd
();

51 
public
 
wavefÜmFlšg
(
x
);

52 
public
 
wavefÜmD¿w
();

56 
´iv©e
 
Pašt
 
	gmGridPašt
;

57 
´iv©e
 
Pašt
 
	gmS–eùedLšePašt
;

58 
´iv©e
 
Pašt
 
	gmUn£ËùedLšePašt
;

59 
´iv©e
 
Pašt
 
	gmUn£ËùedBkgndLšePašt
;

60 
´iv©e
 
Pašt
 
	gmBÜd”LšePašt
;

61 
´iv©e
 
Pašt
 
	gmPÏybackLšePašt
;

62 
´iv©e
 
Pašt
 
	gmTimecodePašt
;

64 
´iv©e
 
Ch—pSoundFe
 
	gmSoundFe
;

65 
´iv©e
 [] 
	gmL’ByZoomLev–
;

66 
´iv©e
 [][] 
	gmV®uesByZoomLev–
;

67 
´iv©e
 [] 
	gmZoomFaùÜByZoomLev–
;

68 
´iv©e
 [] 
	gmHeightsAtThisZoomLev–
;

69 
´iv©e
 
	gmZoomLev–
;

70 
´iv©e
 
	gmNumZoomLev–s
;

71 
´iv©e
 
	gmSam¶eR©e
;

72 
´iv©e
 
	gmSam¶esP”F¿me
;

73 
´iv©e
 
	gmOff£t
;

74 
´iv©e
 
	gmS–eùiÚS¹
;

75 
´iv©e
 
	gmS–eùiÚEnd
;

76 
´iv©e
 
	gmPÏybackPos
;

77 
´iv©e
 
	gmD’s™y
;

78 
´iv©e
 
WavefÜmLi¡’”
 
	gmLi¡’”
;

79 
´iv©e
 
Ge¡u»D‘eùÜ
 
	gmGe¡u»D‘eùÜ
;

80 
´iv©e
 
boŞ—n
 
	gmIn™Ÿlized
;

82 
public
 
	$WavefÜmV›w
(
CÚ‹xt
 
cÚ‹xt
, 
A‰ribu‹S‘
 
©Œs
) {

83 
	`su³r
(
cÚ‹xt
, 
©Œs
);

86 
	`£tFocu§bË
(
çl£
);

88 
mGridPašt
 = 
Ãw
 
	`Pašt
();

89 
mGridPašt
.
	`£tAÁiAlŸs
(
çl£
);

90 
mGridPašt
.
	`£tCŞÜ
(

91 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
grid_lše
));

92 
mS–eùedLšePašt
 = 
Ãw
 
	`Pašt
();

93 
mS–eùedLšePašt
.
	`£tAÁiAlŸs
(
çl£
);

94 
mS–eùedLšePašt
.
	`£tCŞÜ
(

95 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
wavefÜm_£Ëùed
));

96 
mUn£ËùedLšePašt
 = 
Ãw
 
	`Pašt
();

97 
mUn£ËùedLšePašt
.
	`£tAÁiAlŸs
(
çl£
);

98 
mUn£ËùedLšePašt
.
	`£tCŞÜ
(

99 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
wavefÜm_un£Ëùed
));

100 
mUn£ËùedBkgndLšePašt
 = 
Ãw
 
	`Pašt
();

101 
mUn£ËùedBkgndLšePašt
.
	`£tAÁiAlŸs
(
çl£
);

102 
mUn£ËùedBkgndLšePašt
.
	`£tCŞÜ
(

103 
	`g‘Resourûs
().
	`g‘CŞÜ
(

104 
R
.
d¿wabË
.
wavefÜm_un£Ëùed_bkgnd_ov”Ïy
));

105 
mBÜd”LšePašt
 = 
Ãw
 
	`Pašt
();

106 
mBÜd”LšePašt
.
	`£tAÁiAlŸs
(
Œue
);

107 
mBÜd”LšePašt
.
	`£tSŒokeWidth
(1.5f);

108 
mBÜd”LšePašt
.
	`£tP©hEfãù
(

109 
Ãw
 
	`DashP©hEfãù
(new [] { 3.0f, 2.0f }, 0.0f));

110 
mBÜd”LšePašt
.
	`£tCŞÜ
(

111 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
£ËùiÚ_bÜd”
));

112 
mPÏybackLšePašt
 = 
Ãw
 
	`Pašt
();

113 
mPÏybackLšePašt
.
	`£tAÁiAlŸs
(
çl£
);

114 
mPÏybackLšePašt
.
	`£tCŞÜ
(

115 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
¶ayback_šdiÿtÜ
));

116 
mTimecodePašt
 = 
Ãw
 
	`Pašt
();

117 
mTimecodePašt
.
	`£tTextSize
(12);

118 
mTimecodePašt
.
	`£tAÁiAlŸs
(
Œue
);

119 
mTimecodePašt
.
	`£tCŞÜ
(

120 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
timecode
));

121 
mTimecodePašt
.
	`£tShadowLay”
(

123 
	`g‘Resourûs
().
	`g‘CŞÜ
(
R
.
d¿wabË
.
timecode_shadow
));

125 
mGe¡u»D‘eùÜ
 = 
Ãw
 
	`Ge¡u»D‘eùÜ
(

126 
cÚ‹xt
,

127 
Ãw
 
Ge¡u»D‘eùÜ
.
	`Sim¶eOnGe¡u»Li¡’”
() {

128 
public
 
boŞ—n
 
	`ÚFlšg
(

129 
MÙiÚEv’t
 
e1
, MÙiÚEv’ˆ
e2
, 
vx
, 
vy
) {

130 
mLi¡’”
.
	`wavefÜmFlšg
(
vx
);

131  
Œue
;

135 
mSoundFe
 = 
nuÎ
;

136 
mL’ByZoomLev–
 = 
nuÎ
;

137 
mV®uesByZoomLev–
 = 
nuÎ
;

138 
mHeightsAtThisZoomLev–
 = 
nuÎ
;

139 
mOff£t
 = 0;

140 
mPÏybackPos
 = -1;

141 
mS–eùiÚS¹
 = 0;

142 
mS–eùiÚEnd
 = 0;

143 
mD’s™y
 = 1.0f;

144 
mIn™Ÿlized
 = 
çl£
;

145 
	}
}

147 @
Ov”ride


148 
public
 
boŞ—n
 
	$ÚTouchEv’t
(
MÙiÚEv’t
 
ev’t
) {

149 ià(
mGe¡u»D‘eùÜ
.
	`ÚTouchEv’t
(
ev’t
)) {

150  
Œue
;

153 
ev’t
.
	`g‘AùiÚ
()) {

154 
MÙiÚEv’t
.
ACTION_DOWN
:

155 
mLi¡’”
.
	`wavefÜmTouchS¹
(
ev’t
.
	`g‘X
());

157 
MÙiÚEv’t
.
ACTION_MOVE
:

158 
mLi¡’”
.
	`wavefÜmTouchMove
(
ev’t
.
	`g‘X
());

160 
MÙiÚEv’t
.
ACTION_UP
:

161 
mLi¡’”
.
	`wavefÜmTouchEnd
();

164  
Œue
;

165 
	}
}

167 
public
 
	$£tSoundFe
(
Ch—pSoundFe
 
soundFe
) {

168 
mSoundFe
 = 
soundFe
;

169 
mSam¶eR©e
 = 
mSoundFe
.
	`g‘Sam¶eR©e
();

170 
mSam¶esP”F¿me
 = 
mSoundFe
.
	`g‘Sam¶esP”F¿me
();

171 
	`compu‹DoubËsFÜAÎZoomLev–s
();

172 
mHeightsAtThisZoomLev–
 = 
nuÎ
;

173 
	}
}

175 
public
 
boŞ—n
 
	$isIn™Ÿlized
() {

176  
mIn™Ÿlized
;

177 
	}
}

179 
public
 
	$g‘ZoomLev–
() {

180  
mZoomLev–
;

181 
	}
}

183 
public
 
	$£tZoomLev–
(
zoomLev–
) {

184 
mZoomLev–
 > 
zoomLev–
) {

185 
	`zoomIn
();

187 
mZoomLev–
 < 
zoomLev–
) {

188 
	`zoomOut
();

190 
	}
}

192 
public
 
boŞ—n
 
	$ÿnZoomIn
() {

193  (
mZoomLev–
 > 0);

194 
	}
}

196 
public
 
	$zoomIn
() {

197 ià(
	`ÿnZoomIn
()) {

198 
mZoomLev–
--;

199 
mS–eùiÚS¹
 *= 2;

200 
mS–eùiÚEnd
 *= 2;

201 
mHeightsAtThisZoomLev–
 = 
nuÎ
;

202 
off£tC’‹r
 = 
mOff£t
 + 
	`g‘M—su»dWidth
() / 2;

203 
off£tC’‹r
 *= 2;

204 
mOff£t
 = 
off£tC’‹r
 - 
	`g‘M—su»dWidth
() / 2;

205 ià(
mOff£t
 < 0)

206 
mOff£t
 = 0;

207 
	`šv®id©e
();

209 
	}
}

211 
public
 
boŞ—n
 
	$ÿnZoomOut
() {

212  (
mZoomLev–
 < 
mNumZoomLev–s
 - 1);

213 
	}
}

215 
public
 
	$zoomOut
() {

216 ià(
	`ÿnZoomOut
()) {

217 
mZoomLev–
++;

218 
mS–eùiÚS¹
 /= 2;

219 
mS–eùiÚEnd
 /= 2;

220 
off£tC’‹r
 = 
mOff£t
 + 
	`g‘M—su»dWidth
() / 2;

221 
off£tC’‹r
 /= 2;

222 
mOff£t
 = 
off£tC’‹r
 - 
	`g‘M—su»dWidth
() / 2;

223 ià(
mOff£t
 < 0)

224 
mOff£t
 = 0;

225 
mHeightsAtThisZoomLev–
 = 
nuÎ
;

226 
	`šv®id©e
();

228 
	}
}

230 
public
 
	$maxPos
() {

231  
mL’ByZoomLev–
[
mZoomLev–
];

232 
	}
}

234 
public
 
	$£cÚdsToF¿mes
(
£cÚds
) {

235  ()(1.0 * 
£cÚds
 * 
mSam¶eR©e
 / 
mSam¶esP”F¿me
 + 0.5);

236 
	}
}

238 
public
 
	$£cÚdsToPix–s
(
£cÚds
) {

239 
z
 = 
mZoomFaùÜByZoomLev–
[
mZoomLev–
];

240  ()(
z
 * 
£cÚds
 * 
mSam¶eR©e
 / 
mSam¶esP”F¿me
 + 0.5);

241 
	}
}

243 
public
 
	$pix–sToSecÚds
(
pix–s
) {

244 
z
 = 
mZoomFaùÜByZoomLev–
[
mZoomLev–
];

245  (
pix–s
 * ()
mSam¶esP”F¿me
 / (
mSam¶eR©e
 * 
z
));

246 
	}
}

248 
public
 
	$mli£csToPix–s
(
m£cs
) {

249 
z
 = 
mZoomFaùÜByZoomLev–
[
mZoomLev–
];

250  ()((
m£cs
 * 1.0 * 
mSam¶eR©e
 * 
z
) /

251 (1000.0 * 
mSam¶esP”F¿me
) + 0.5);

252 
	}
}

254 
public
 
	$pix–sToMli£cs
(
pix–s
) {

255 
z
 = 
mZoomFaùÜByZoomLev–
[
mZoomLev–
];

256  ()(
pix–s
 * (1000.0 * 
mSam¶esP”F¿me
) /

257 (
mSam¶eR©e
 * 
z
) + 0.5);

258 
	}
}

260 
public
 
	$£tP¬am‘”s
(
¡¬t
, 
’d
, 
off£t
) {

261 
mS–eùiÚS¹
 = 
¡¬t
;

262 
mS–eùiÚEnd
 = 
’d
;

263 
mOff£t
 = 
off£t
;

264 
	}
}

266 
public
 
	$g‘S¹
() {

267  
mS–eùiÚS¹
;

268 
	}
}

270 
public
 
	$g‘End
() {

271  
mS–eùiÚEnd
;

272 
	}
}

274 
public
 
	$g‘Off£t
() {

275  
mOff£t
;

276 
	}
}

278 
public
 
	$£tPÏyback
(
pos
) {

279 
mPÏybackPos
 = 
pos
;

280 
	}
}

282 
public
 
	$£tLi¡’”
(
WavefÜmLi¡’”
 
li¡’”
) {

283 
mLi¡’”
 = 
li¡’”
;

284 
	}
}

286 
public
 
	$»compu‹Heights
(
d’s™y
) {

287 
mHeightsAtThisZoomLev–
 = 
nuÎ
;

288 
mD’s™y
 = 
d’s™y
;

289 
mTimecodePašt
.
	`£tTextSize
(()(12 * 
d’s™y
));

291 
	`šv®id©e
();

292 
	}
}

294 
´Ùeùed
 
	$d¿wWavefÜmLše
(
Cªvas
 
ÿnvas
,

295 
x
, 
y0
, 
y1
,

296 
Pašt
 
·št
) {

297 
ÿnvas
.
	`d¿wLše
(
x
, 
y0
, x, 
y1
, 
·št
);

298 
	}
}

300 @
Ov”ride


301 
´Ùeùed
 
	$ÚD¿w
(
Cªvas
 
ÿnvas
) {

302 
su³r
.
	`ÚD¿w
(
ÿnvas
);

303 ià(
mSoundFe
 =ğ
nuÎ
)

306 ià(
mHeightsAtThisZoomLev–
 =ğ
nuÎ
)

307 
	`compu‹IÁsFÜThisZoomLev–
();

310 
m—su»dWidth
 = 
	`g‘M—su»dWidth
();

311 
m—su»dHeight
 = 
	`g‘M—su»dHeight
();

312 
¡¬t
 = 
mOff£t
;

313 
width
 = 
mHeightsAtThisZoomLev–
.
Ëngth
 - 
¡¬t
;

314 
ùr
 = 
m—su»dHeight
 / 2;

316 ià(
width
 > 
m—su»dWidth
)

317 
width
 = 
m—su»dWidth
;

320 
ÚePix–InSecs
 = 
	`pix–sToSecÚds
(1);

321 
boŞ—n
 
ÚlyEv”yFiveSecs
 = (
ÚePix–InSecs
 > 1.0 / 50.0);

322 
äaùiÚ®Secs
 = 
mOff£t
 * 
ÚePix–InSecs
;

323 
š‹g”Secs
 = (è
äaùiÚ®Secs
;

324 
i
 = 0;

325 
i
 < 
width
) {

326 
i
++;

327 
äaùiÚ®Secs
 +ğ
ÚePix–InSecs
;

328 
š‹g”SecsNew
 = (è
äaùiÚ®Secs
;

329 ià(
š‹g”SecsNew
 !ğ
š‹g”Secs
) {

330 
š‹g”Secs
 = 
š‹g”SecsNew
;

331 ià(!
ÚlyEv”yFiveSecs
 || 0 =ğ(
š‹g”Secs
 % 5)) {

332 
ÿnvas
.
	`d¿wLše
(
i
, 0, i, 
m—su»dHeight
, 
mGridPašt
);

338 
i
 = 0; i < 
width
; i++) {

339 
Pašt
 
·št
;

340 ià(
i
 + 
¡¬t
 >ğ
mS–eùiÚS¹
 &&

341 
i
 + 
¡¬t
 < 
mS–eùiÚEnd
) {

342 
·št
 = 
mS–eùedLšePašt
;

344 
	`d¿wWavefÜmLše
(
ÿnvas
, 
i
, 0, 
m—su»dHeight
,

345 
mUn£ËùedBkgndLšePašt
);

346 
·št
 = 
mUn£ËùedLšePašt
;

348 
	`d¿wWavefÜmLše
(

349 
ÿnvas
, 
i
,

350 
ùr
 - 
mHeightsAtThisZoomLev–
[
¡¬t
 + 
i
],

351 
ùr
 + 1 + 
mHeightsAtThisZoomLev–
[
¡¬t
 + 
i
],

352 
·št
);

354 ià(
i
 + 
¡¬t
 =ğ
mPÏybackPos
) {

355 
ÿnvas
.
	`d¿wLše
(
i
, 0, i, 
m—su»dHeight
, 
mPÏybackLšePašt
);

361 
i
 = 
width
; i < 
m—su»dWidth
; i++) {

362 
	`d¿wWavefÜmLše
(
ÿnvas
, 
i
, 0, 
m—su»dHeight
,

363 
mUn£ËùedBkgndLšePašt
);

367 
ÿnvas
.
	`d¿wLše
(

368 
mS–eùiÚS¹
 - 
mOff£t
 + 0.5f, 30,

369 
mS–eùiÚS¹
 - 
mOff£t
 + 0.5f, 
m—su»dHeight
,

370 
mBÜd”LšePašt
);

371 
ÿnvas
.
	`d¿wLše
(

372 
mS–eùiÚEnd
 - 
mOff£t
 + 0.5f, 0,

373 
mS–eùiÚEnd
 - 
mOff£t
 + 0.5f, 
m—su»dHeight
 - 30,

374 
mBÜd”LšePašt
);

377 
timecodeIÁ”v®Secs
 = 1.0;

378 ià(
timecodeIÁ”v®Secs
 / 
ÚePix–InSecs
 < 50) {

379 
timecodeIÁ”v®Secs
 = 5.0;

381 ià(
timecodeIÁ”v®Secs
 / 
ÚePix–InSecs
 < 50) {

382 
timecodeIÁ”v®Secs
 = 15.0;

386 
äaùiÚ®Secs
 = 
mOff£t
 * 
ÚePix–InSecs
;

387 
š‹g”Timecode
 = (è(
äaùiÚ®Secs
 / 
timecodeIÁ”v®Secs
);

388 
i
 = 0;

389 
i
 < 
width
) {

390 
i
++;

391 
äaùiÚ®Secs
 +ğ
ÚePix–InSecs
;

392 
š‹g”Secs
 = (è
äaùiÚ®Secs
;

393 
š‹g”TimecodeNew
 = (è(
äaùiÚ®Secs
 /

394 
timecodeIÁ”v®Secs
);

395 ià(
š‹g”TimecodeNew
 !ğ
š‹g”Timecode
) {

396 
š‹g”Timecode
 = 
š‹g”TimecodeNew
;

399 
SŒšg
 
timecodeMšu‹s
 = "" + (
š‹g”Secs
 / 60);

400 
SŒšg
 
timecodeSecÚds
 = "" + (
š‹g”Secs
 % 60);

401 ià((
š‹g”Secs
 % 60) < 10) {

402 
timecodeSecÚds
 = "0" +imecodeSeconds;

404 
SŒšg
 
timecodeSŒ
 = 
timecodeMšu‹s
 + ":" + 
timecodeSecÚds
;

405 
off£t
 = () (

406 0.5 * 
mTimecodePašt
.
	`m—su»Text
(
timecodeSŒ
));

407 
ÿnvas
.
	`d¿wText
(
timecodeSŒ
,

408 
i
 - 
off£t
,

409 ()(12 * 
mD’s™y
),

410 
mTimecodePašt
);

414 ià(
mLi¡’”
 !ğ
nuÎ
) {

415 
mLi¡’”
.
	`wavefÜmD¿w
();

417 
	}
}

422 
´iv©e
 
	$compu‹DoubËsFÜAÎZoomLev–s
() {

423 
numF¿mes
 = 
mSoundFe
.
	`g‘NumF¿mes
();

424 [] 
äameGašs
 = 
mSoundFe
.
	`g‘F¿meGašs
();

425 [] 
smoÙhedGašs
 = 
Ãw
 [
numF¿mes
];

426 ià(
numF¿mes
 == 1) {

427 
smoÙhedGašs
[0] = 
äameGašs
[0];

428 } ià(
numF¿mes
 == 2) {

429 
smoÙhedGašs
[0] = 
äameGašs
[0];

430 
smoÙhedGašs
[1] = 
äameGašs
[1];

431 } ià(
numF¿mes
 > 2) {

432 
smoÙhedGašs
[0] = ()(

433 (
äameGašs
[0] / 2.0) +

434 (
äameGašs
[1] / 2.0));

435 
i
 = 1; i < 
numF¿mes
 - 1; i++) {

436 
smoÙhedGašs
[
i
] = ()(

437 (
äameGašs
[
i
 - 1] / 3.0) +

438 (
äameGašs
[
i
 ] / 3.0) +

439 (
äameGašs
[
i
 + 1] / 3.0));

441 
smoÙhedGašs
[
numF¿mes
 - 1] = ()(

442 (
äameGašs
[
numF¿mes
 - 2] / 2.0) +

443 (
äameGašs
[
numF¿mes
 - 1] / 2.0));

447 
maxGaš
 = 1.0;

448 
i
 = 0; i < 
numF¿mes
; i++) {

449 ià(
smoÙhedGašs
[
i
] > 
maxGaš
) {

450 
maxGaš
 = 
smoÙhedGašs
[
i
];

453 
sÿËFaùÜ
 = 1.0;

454 ià(
maxGaš
 > 255.0) {

455 
sÿËFaùÜ
 = 255 / 
maxGaš
;

459 
maxGaš
 = 0;

460 
gašHi¡
[] = 
Ãw
 [256];

461 
i
 = 0; i < 
numF¿mes
; i++) {

462 
smoÙhedGaš
 = ()(
smoÙhedGašs
[
i
] * 
sÿËFaùÜ
);

463 ià(
smoÙhedGaš
 < 0)

464 
smoÙhedGaš
 = 0;

465 ià(
smoÙhedGaš
 > 255)

466 
smoÙhedGaš
 = 255;

468 ià(
smoÙhedGaš
 > 
maxGaš
)

469 
maxGaš
 = 
smoÙhedGaš
;

471 
gašHi¡
[
smoÙhedGaš
]++;

475 
mšGaš
 = 0;

476 
sum
 = 0;

477 
mšGaš
 < 255 && 
sum
 < 
numF¿mes
 / 20) {

478 
sum
 +ğ
gašHi¡
[()
mšGaš
];

479 
mšGaš
++;

483 
sum
 = 0;

484 
maxGaš
 > 2 && 
sum
 < 
numF¿mes
 / 100) {

485 
sum
 +ğ
gašHi¡
[()
maxGaš
];

486 
maxGaš
--;

490 [] 
heights
 = 
Ãw
 [
numF¿mes
];

491 
¿nge
 = 
maxGaš
 - 
mšGaš
;

492 
i
 = 0; i < 
numF¿mes
; i++) {

493 
v®ue
 = (
smoÙhedGašs
[
i
] * 
sÿËFaùÜ
 - 
mšGaš
è/ 
¿nge
;

494 ià(
v®ue
 < 0.0)

495 
v®ue
 = 0.0;

496 ià(
v®ue
 > 1.0)

497 
v®ue
 = 1.0;

498 
heights
[
i
] = 
v®ue
 * value;

501 
mNumZoomLev–s
 = 5;

502 
mL’ByZoomLev–
 = 
Ãw
 [5];

503 
mZoomFaùÜByZoomLev–
 = 
Ãw
 [5];

504 
mV®uesByZoomLev–
 = 
Ãw
 [5][];

507 
mL’ByZoomLev–
[0] = 
numF¿mes
 * 2;

508 
mZoomFaùÜByZoomLev–
[0] = 2.0;

509 
mV®uesByZoomLev–
[0] = 
Ãw
 [
mL’ByZoomLev–
[0]];

510 ià(
numF¿mes
 > 0) {

511 
mV®uesByZoomLev–
[0][0] = 0.5 * 
heights
[0];

512 
mV®uesByZoomLev–
[0][1] = 
heights
[0];

514 
i
 = 1; i < 
numF¿mes
; i++) {

515 
mV®uesByZoomLev–
[0][2 * 
i
] = 0.5 * (
heights
[i - 1] + heights[i]);

516 
mV®uesByZoomLev–
[0][2 * 
i
 + 1] = 
heights
[i];

520 
mL’ByZoomLev–
[1] = 
numF¿mes
;

521 
mV®uesByZoomLev–
[1] = 
Ãw
 [
mL’ByZoomLev–
[1]];

522 
mZoomFaùÜByZoomLev–
[1] = 1.0;

523 
i
 = 0; i < 
mL’ByZoomLev–
[1]; i++) {

524 
mV®uesByZoomLev–
[1][
i
] = 
heights
[i];

528 
j
 = 2; j < 5; j++) {

529 
mL’ByZoomLev–
[
j
] = mLenByZoomLevel[j - 1] / 2;

530 
mV®uesByZoomLev–
[
j
] = 
Ãw
 [
mL’ByZoomLev–
[j]];

531 
mZoomFaùÜByZoomLev–
[
j
] = mZoomFactorByZoomLevel[j - 1] / 2.0;

532 
i
 = 0; i < 
mL’ByZoomLev–
[
j
]; i++) {

533 
mV®uesByZoomLev–
[
j
][
i
] =

534 0.5 * (
mV®uesByZoomLev–
[
j
 - 1][2 * 
i
] +

535 
mV®uesByZoomLev–
[
j
 - 1][2 * 
i
 + 1]);

539 ià(
numF¿mes
 > 5000) {

540 
mZoomLev–
 = 3;

541 } ià(
numF¿mes
 > 1000) {

542 
mZoomLev–
 = 2;

543 } ià(
numF¿mes
 > 300) {

544 
mZoomLev–
 = 1;

546 
mZoomLev–
 = 0;

549 
mIn™Ÿlized
 = 
Œue
;

550 
	}
}

556 
´iv©e
 
	$compu‹IÁsFÜThisZoomLev–
() {

557 
h®fHeight
 = (
	`g‘M—su»dHeight
() / 2) - 1;

558 
mHeightsAtThisZoomLev–
 = 
Ãw
 [
mL’ByZoomLev–
[
mZoomLev–
]];

559 
i
 = 0; i < 
mL’ByZoomLev–
[
mZoomLev–
]; i++) {

560 
mHeightsAtThisZoomLev–
[
i
] =

561 ()(
mV®uesByZoomLev–
[
mZoomLev–
][
i
] * 
h®fHeight
);

563 
	}
}

	@src/com/ringdroid/soundfile/CheapAAC.java

17 
·ckage
 
	gcom
.
	gršgdroid
.
	gsoundfe
;

19 
impÜt
 
	gjava
.
	gio
.
	gFe
;

20 
impÜt
 
	gjava
.
	gio
.
	gFeIÅutSŒ—m
;

21 
impÜt
 
	gjava
.
	gio
.
	gFeOuutSŒ—m
;

22 
impÜt
 
	gjava
.
	gio
.
	gIÅutSŒ—m
;

24 
impÜt
 
	gjava
.
	gut
.
	gHashM­
;

32 
public
 cÏs 
	cCh—pAAC
 
ex‹nds
 
	mCh—pSoundFe
 {

33 
public
 
FaùÜy
 
	$g‘FaùÜy
() {

34  
Ãw
 
	`FaùÜy
() {

35 
public
 
Ch—pSoundFe
 
	`ü—‹
() {

36  
Ãw
 
	`Ch—pAAC
();

38 
public
 
SŒšg
[] 
	`g‘SuµÜ‹dEx‹nsiÚs
() {

39  
Ãw
 
SŒšg
[] { "aac", "m4a" };

44 şas 
	cAtom
 {

45 
public
 
¡¬t
;

46 
public
 
Ën
;

47 
public
 
by‹
[] 
d©a
;

48 
	}
};

50 
public
 
fš®
 
	gkDINF
 = 0x64696e66;

51 
public
 
fš®
 
	gkFTYP
 = 0x66747970;

52 
public
 
fš®
 
	gkHDLR
 = 0x68646c72;

53 
public
 
fš®
 
	gkMDAT
 = 0x6d646174;

54 
public
 
fš®
 
	gkMDHD
 = 0x6d646864;

55 
public
 
fš®
 
	gkMDIA
 = 0x6d646961;

56 
public
 
fš®
 
	gkMINF
 = 0x6d696e66;

57 
public
 
fš®
 
	gkMOOV
 = 0x6d6f6f76;

58 
public
 
fš®
 
	gkMP4A
 = 0x6d703461;

59 
public
 
fš®
 
	gkMVHD
 = 0x6d766864;

60 
public
 
fš®
 
	gkSMHD
 = 0x736d6864;

61 
public
 
fš®
 
	gkSTBL
 = 0x7374626c;

62 
public
 
fš®
 
	gkSTCO
 = 0x7374636f;

63 
public
 
fš®
 
	gkSTSC
 = 0x73747363;

64 
public
 
fš®
 
	gkSTSD
 = 0x73747364;

65 
public
 
fš®
 
	gkSTSZ
 = 0x7374737a;

66 
public
 
fš®
 
	gkSTTS
 = 0x73747473;

67 
public
 
fš®
 
	gkTKHD
 = 0x746b6864;

68 
public
 
fš®
 
	gkTRAK
 = 0x7472616b;

70 
public
 
fš®
 [] 
	gkRequœedAtoms
 = {

71 
kDINF
,

72 
kHDLR
,

73 
kMDHD
,

74 
kMDIA
,

75 
kMINF
,

76 
kMOOV
,

77 
kMVHD
,

78 
kSMHD
,

79 
kSTBL
,

80 
kSTSD
,

81 
kSTSZ
,

82 
kSTTS
,

83 
kTKHD
,

84 
kTRAK
,

87 
public
 
fš®
 [] 
	gkSaveD©aAtoms
 = {

88 
kDINF
,

89 
kHDLR
,

90 
kMDHD
,

91 
kMVHD
,

92 
kSMHD
,

93 
kTKHD
,

94 
kSTSD
,

98 
´iv©e
 
	gmNumF¿mes
;

99 
´iv©e
 [] 
	gmF¿meOff£ts
;

100 
´iv©e
 [] 
	gmF¿meL’s
;

101 
´iv©e
 [] 
	gmF¿meGašs
;

102 
´iv©e
 
	gmFeSize
;

103 
´iv©e
 
	gHashM­
<
	gIÁeg”
, 
	gAtom
> 
	gmAtomM­
;

106 
´iv©e
 
	gmB™¿‹
;

107 
´iv©e
 
	gmSam¶eR©e
;

108 
´iv©e
 
	gmChªÃls
;

109 
´iv©e
 
	gmSam¶esP”F¿me
;

112 
´iv©e
 
	gmOff£t
;

113 
´iv©e
 
	gmMšGaš
;

114 
´iv©e
 
	gmMaxGaš
;

115 
´iv©e
 
	gmMd©Off£t
;

116 
´iv©e
 
	gmMd©L’gth
;

118 
public
 
	$Ch—pAAC
() {

119 
	}
}

121 
public
 
	$g‘NumF¿mes
() {

122  
mNumF¿mes
;

123 
	}
}

125 
public
 
	$g‘Sam¶esP”F¿me
() {

126  
mSam¶esP”F¿me
;

127 
	}
}

129 
public
 [] 
	$g‘F¿meOff£ts
() {

130  
mF¿meOff£ts
;

131 
	}
}

133 
public
 [] 
	$g‘F¿meL’s
() {

134  
mF¿meL’s
;

135 
	}
}

137 
public
 [] 
	$g‘F¿meGašs
() {

138  
mF¿meGašs
;

139 
	}
}

141 
public
 
	$g‘FeSizeBy‹s
() {

142  
mFeSize
;

143 
	}
}

145 
public
 
	$g‘AvgB™¿‹Kbps
() {

146  
mFeSize
 / (
mNumF¿mes
 * 
mSam¶esP”F¿me
);

147 
	}
}

149 
public
 
	$g‘Sam¶eR©e
() {

150  
mSam¶eR©e
;

151 
	}
}

153 
public
 
	$g‘ChªÃls
() {

154  
mChªÃls
;

155 
	}
}

157 
public
 
SŒšg
 
	$g‘F‘y³
() {

159 
	}
}

161 
public
 
SŒšg
 
	$©omToSŒšg
(
©omTy³
) {

162 
SŒšg
 
¡r
 = "";

163 
¡r
 +ğ()((
©omTy³
 >> 24) & 0xff);

164 
¡r
 +ğ()((
©omTy³
 >> 16) & 0xff);

165 
¡r
 +ğ()((
©omTy³
 >> 8) & 0xff);

166 
¡r
 +ğ()(
©omTy³
 & 0xff);

167  
¡r
;

168 
	}
}

170 
public
 
	$R—dFe
(
Fe
 
šputFe
)

171 
throws
 
java
.
io
.
FeNÙFoundExû±iÚ
,

172 
java
.
io
.
IOExû±iÚ
 {

173 
su³r
.
	`R—dFe
(
šputFe
);

174 
mChªÃls
 = 0;

175 
mSam¶eR©e
 = 0;

176 
mB™¿‹
 = 0;

177 
mSam¶esP”F¿me
 = 0;

178 
mNumF¿mes
 = 0;

179 
mMšGaš
 = 255;

180 
mMaxGaš
 = 0;

181 
mOff£t
 = 0;

182 
mMd©Off£t
 = -1;

183 
mMd©L’gth
 = -1;

185 
mAtomM­
 = 
Ãw
 
HashM­
<
IÁeg”
, 
Atom
>();

188 
mFeSize
 = ()
mIÅutFe
.
	`Ëngth
();

192 ià(
mFeSize
 < 128) {

193 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
("Fileoo smallo…arse");

197 
FeIÅutSŒ—m
 
¡»am
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

198 
by‹
[] 
h—d”
 = 
Ãw
 byte[8];

199 
¡»am
.
	`»ad
(
h—d”
, 0, 8);

201 ià(
h—d”
[0] == 0 &&

202 
h—d”
[4] == 'f' &&

203 
h—d”
[5] == 't' &&

204 
h—d”
[6] == 'y' &&

205 
h—d”
[7] == 'p') {

207 
¡»am
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

208 
	`·r£Mp4
(
¡»am
, 
mFeSize
);

210 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
("Unknown file format");

213 ià(
mMd©Off£t
 > 0 && 
mMd©L’gth
 > 0) {

214 
¡»am
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

215 
¡»am
.
	`sk
(
mMd©Off£t
);

216 
mOff£t
 = 
mMd©Off£t
;

217 
	`·r£Md©
(
¡»am
, 
mMd©L’gth
);

219 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
("Didn't find mdat");

233 
boŞ—n
 
bad
 = 
çl£
;

234 
»quœedAtomTy³
 : 
kRequœedAtoms
) {

235 ià(!
mAtomM­
.
	`cÚšsKey
(
»quœedAtomTy³
)) {

236 
Sy¡em
.
out
.
	`´šn
("Missing‡tom: " +

237 
	`©omToSŒšg
(
»quœedAtomTy³
));

238 
bad
 = 
Œue
;

242 ià(
bad
) {

243 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
("Could‚ot…arse MP4 file");

245 
	}
}

247 
´iv©e
 
	$·r£Mp4
(
IÅutSŒ—m
 
¡»am
, 
maxL’
)

248 
throws
 
java
.
io
.
IOExû±iÚ
 {

251 
maxL’
 > 8) {

252 
š™ŸlOff£t
 = 
mOff£t
;

254 
by‹
[] 
©omH—d”
 = 
Ãw
 byte[8];

255 
¡»am
.
	`»ad
(
©omH—d”
, 0, 8);

256 
©omL’
 =

257 ((0xfà& 
©omH—d”
[0]) << 24) |

258 ((0xfà& 
©omH—d”
[1]) << 16) |

259 ((0xfà& 
©omH—d”
[2]) << 8) |

260 ((0xfà& 
©omH—d”
[3]));

270 ià(
©omL’
 > 
maxL’
)

271 
©omL’
 = 
maxL’
;

272 
©omTy³
 =

273 ((0xfà& 
©omH—d”
[4]) << 24) |

274 ((0xfà& 
©omH—d”
[5]) << 16) |

275 ((0xfà& 
©omH—d”
[6]) << 8) |

276 ((0xfà& 
©omH—d”
[7]));

278 
Atom
 
©om
 = 
Ãw
 
	`Atom
();

279 
©om
.
¡¬t
 = 
mOff£t
;

280 
©om
.
Ën
 = 
©omL’
;

281 
mAtomM­
.
	`put
(
©omTy³
, 
©om
);

283 
mOff£t
 += 8;

285 ià(
©omTy³
 =ğ
kMOOV
 ||

286 
©omTy³
 =ğ
kTRAK
 ||

287 
©omTy³
 =ğ
kMDIA
 ||

288 
©omTy³
 =ğ
kMINF
 ||

289 
©omTy³
 =ğ
kSTBL
) {

290 
	`·r£Mp4
(
¡»am
, 
©omL’
);

291 } ià(
©omTy³
 =ğ
kSTSZ
) {

292 
	`·r£Stsz
(
¡»am
, 
©omL’
 - 8);

293 } ià(
©omTy³
 =ğ
kSTTS
) {

294 
	`·r£S‰s
(
¡»am
, 
©omL’
 - 8);

295 } ià(
©omTy³
 =ğ
kMDAT
) {

296 
mMd©Off£t
 = 
mOff£t
;

297 
mMd©L’gth
 = 
©omL’
 - 8;

299 
§vedAtomTy³
 : 
kSaveD©aAtoms
) {

300 ià(
§vedAtomTy³
 =ğ
©omTy³
) {

301 
by‹
[] 
d©a
 = 
Ãw
 by‹[
©omL’
 - 8];

302 
¡»am
.
	`»ad
(
d©a
, 0, 
©omL’
 - 8);

303 
mOff£t
 +ğ
©omL’
 - 8;

304 
mAtomM­
.
	`g‘
(
©omTy³
).
d©a
 = data;

309 ià(
©omTy³
 =ğ
kSTSD
) {

310 
	`·r£Mp4aFromStsd
();

313 
maxL’
 -ğ
©omL’
;

314 
skL’
 = 
©omL’
 - (
mOff£t
 - 
š™ŸlOff£t
);

321 ià(
skL’
 < 0) {

322 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
(

323 "W’ˆov” by " + (-
skL’
) + " bytes");

326 
¡»am
.
	`sk
(
skL’
);

327 
mOff£t
 +ğ
skL’
;

329 
	}
}

331 
	$·r£S‰s
(
IÅutSŒ—m
 
¡»am
, 
maxL’
)

332 
throws
 
java
.
io
.
IOExû±iÚ
 {

333 
by‹
[] 
¡tsD©a
 = 
Ãw
 byte[16];

334 
¡»am
.
	`»ad
(
¡tsD©a
, 0, 16);

335 
mOff£t
 += 16;

336 
mSam¶esP”F¿me
 =

337 ((0xfà& 
¡tsD©a
[12]) << 24) |

338 ((0xfà& 
¡tsD©a
[13]) << 16) |

339 ((0xfà& 
¡tsD©a
[14]) << 8) |

340 ((0xfà& 
¡tsD©a
[15]));

343 
	}
}

345 
	$·r£Stsz
(
IÅutSŒ—m
 
¡»am
, 
maxL’
)

346 
throws
 
java
.
io
.
IOExû±iÚ
 {

347 
by‹
[] 
¡szH—d”
 = 
Ãw
 byte[12];

348 
¡»am
.
	`»ad
(
¡szH—d”
, 0, 12);

349 
mOff£t
 += 12;

350 
mNumF¿mes
 =

351 ((0xfà& 
¡szH—d”
[8]) << 24) |

352 ((0xfà& 
¡szH—d”
[9]) << 16) |

353 ((0xfà& 
¡szH—d”
[10]) << 8) |

354 ((0xfà& 
¡szH—d”
[11]));

357 
mF¿meOff£ts
 = 
Ãw
 [
mNumF¿mes
];

358 
mF¿meL’s
 = 
Ãw
 [
mNumF¿mes
];

359 
mF¿meGašs
 = 
Ãw
 [
mNumF¿mes
];

360 
by‹
[] 
äameL’By‹s
 = 
Ãw
 by‹[4 * 
mNumF¿mes
];

361 
¡»am
.
	`»ad
(
äameL’By‹s
, 0, 4 * 
mNumF¿mes
);

362 
mOff£t
 +ğ4 * 
mNumF¿mes
;

363 
i
 = 0; i < 
mNumF¿mes
; i++) {

364 
mF¿meL’s
[
i
] =

365 ((0xfà& 
äameL’By‹s
[4 * 
i
 + 0]) << 24) |

366 ((0xfà& 
äameL’By‹s
[4 * 
i
 + 1]) << 16) |

367 ((0xfà& 
äameL’By‹s
[4 * 
i
 + 2]) << 8) |

368 ((0xfà& 
äameL’By‹s
[4 * 
i
 + 3]));

371 
	}
}

373 
	$·r£Mp4aFromStsd
() {

374 
by‹
[] 
¡sdD©a
 = 
mAtomM­
.
	`g‘
(
kSTSD
).
d©a
;

375 
mChªÃls
 =

376 ((0xfà& 
¡sdD©a
[32]) << 8) |

377 ((0xfà& 
¡sdD©a
[33]));

378 
mSam¶eR©e
 =

379 ((0xfà& 
¡sdD©a
[40]) << 8) |

380 ((0xfà& 
¡sdD©a
[41]));

384 
	}
}

386 
	$·r£Md©
(
IÅutSŒ—m
 
¡»am
, 
maxL’
)

387 
throws
 
java
.
io
.
IOExû±iÚ
 {

389 
š™ŸlOff£t
 = 
mOff£t
;

390 
i
 = 0; i < 
mNumF¿mes
; i++) {

391 
mF¿meOff£ts
[
i
] = 
mOff£t
;

397 ià(
mOff£t
 - 
š™ŸlOff£t
 + 
mF¿meL’s
[
i
] > 
maxL’
 - 8) {

398 
mF¿meGašs
[
i
] = 0;

400 
	`»adF¿meAndCompu‹Gaš
(
¡»am
, 
i
);

402 ià(
mF¿meGašs
[
i
] < 
mMšGaš
)

403 
mMšGaš
 = 
mF¿meGašs
[
i
];

404 ià(
mF¿meGašs
[
i
] > 
mMaxGaš
)

405 
mMaxGaš
 = 
mF¿meGašs
[
i
];

407 ià(
mProg»ssLi¡’”
 !ğ
nuÎ
) {

408 
boŞ—n
 
k“pGošg
 = 
mProg»ssLi¡’”
.
	`»pÜtProg»ss
(

409 
mOff£t
 * 1.0 / 
mFeSize
);

410 ià(!
k“pGošg
) {

415 
	}
}

417 
	$»adF¿meAndCompu‹Gaš
(
IÅutSŒ—m
 
¡»am
, 
äameIndex
)

418 
throws
 
java
.
io
.
IOExû±iÚ
 {

420 ià(
mF¿meL’s
[
äameIndex
] < 4) {

421 
mF¿meGašs
[
äameIndex
] = 0;

422 
¡»am
.
	`sk
(
mF¿meL’s
[
äameIndex
]);

426 
š™ŸlOff£t
 = 
mOff£t
;

428 
by‹
[] 
d©a
 = 
Ãw
 byte[4];

429 
¡»am
.
	`»ad
(
d©a
, 0, 4);

430 
mOff£t
 += 4;

439 
idSynEË
 = (0xe0 & 
d©a
[0]) >> 5;

442 
idSynEË
) {

444 
mÚoGaš
 = ((0x01 & 
d©a
[0]) << 7) | ((0xfe & data[1]) >> 1);

446 
mF¿meGašs
[
äameIndex
] = 
mÚoGaš
;

449 
wšdowSequ’û
 = (0x60 & 
d©a
[1]) >> 5;

451 
wšdowSh­e
 = (0x10 & 
d©a
[1]) >> 4;

454 
maxSfb
;

455 
sÿËFaùÜGroupšg
;

456 
maskP»£Á
;

457 
¡¬tB™
;

459 ià(
wšdowSequ’û
 == 2) {

460 
maxSfb
 = 0x0à& 
d©a
[1];

462 
sÿËFaùÜGroupšg
 = (0xã & 
d©a
[2]) >> 1;

464 
maskP»£Á
 =

465 ((0x01 & 
d©a
[2]) << 1) |

466 ((0x80 & 
d©a
[3]) >> 7);

468 
¡¬tB™
 = 25;

470 
maxSfb
 =

471 ((0x0à& 
d©a
[1]) << 2) |

472 ((0xc0 & 
d©a
[2]) >> 6);

474 
sÿËFaùÜGroupšg
 = -1;

476 
maskP»£Á
 = (0x18 & 
d©a
[2]) >> 3;

478 
¡¬tB™
 = 21;

487 ià(
maskP»£Á
 == 1) {

488 
sfgZ”oB™CouÁ
 = 0;

489 
b
 = 0; b < 7; b++) {

490 ià((
sÿËFaùÜGroupšg
 & (1 << 
b
)) == 0) {

494 
sfgZ”oB™CouÁ
++;

499 
numWšdowGroups
 = 1 + 
sfgZ”oB™CouÁ
;

502 
sk
 = 
maxSfb
 * 
numWšdowGroups
;

505 
¡¬tB™
 +ğ
sk
;

511 
by‹sN“ded
 = 1 + ((
¡¬tB™
 + 7) / 8);

512 
by‹
[] 
ŞdD©a
 = 
d©a
;

513 
d©a
 = 
Ãw
 
by‹
[
by‹sN“ded
];

514 
d©a
[0] = 
ŞdD©a
[0];

515 
d©a
[1] = 
ŞdD©a
[1];

516 
d©a
[2] = 
ŞdD©a
[2];

517 
d©a
[3] = 
ŞdD©a
[3];

518 
¡»am
.
	`»ad
(
d©a
, 4, 
by‹sN“ded
 - 4);

519 
mOff£t
 +ğ(
by‹sN“ded
 - 4);

522 
fœ¡ChªÃlGaš
 = 0;

523 
b
 = 0; b < 8; b++) {

524 
b0
 = (
b
 + 
¡¬tB™
) / 8;

525 
b1
 = 7 - ((
b
 + 
¡¬tB™
) % 8);

526 
add
 = (((1 << 
b1
è& 
d©a
[
b0
]è>> b1è<< (7 - 
b
);

531 
fœ¡ChªÃlGaš
 +ğ
add
;

535 
mF¿meGašs
[
äameIndex
] = 
fœ¡ChªÃlGaš
;

539 ià(
äameIndex
 > 0) {

540 
mF¿meGašs
[
äameIndex
] = mFrameGains[frameIndex - 1];

542 
mF¿meGašs
[
äameIndex
] = 0;

548 
sk
 = 
mF¿meL’s
[
äameIndex
] - (
mOff£t
 - 
š™ŸlOff£t
);

552 
¡»am
.
	`sk
(
sk
);

553 
mOff£t
 +ğ
sk
;

554 
	}
}

556 
public
 
	$S¹Atom
(
FeOuutSŒ—m
 
out
, 
©omTy³
)

557 
throws
 
java
.
io
.
IOExû±iÚ
 {

558 
by‹
[] 
©omH—d”
 = 
Ãw
 byte[8];

559 
©omL’
 = 
mAtomM­
.
	`g‘
(
©omTy³
).
Ën
;

560 
©omH—d”
[0] = (
by‹
)((
©omL’
 >> 24) & 0xff);

561 
©omH—d”
[1] = (
by‹
)((
©omL’
 >> 16) & 0xff);

562 
©omH—d”
[2] = (
by‹
)((
©omL’
 >> 8) & 0xff);

563 
©omH—d”
[3] = (
by‹
)(
©omL’
 & 0xff);

564 
©omH—d”
[4] = (
by‹
)((
©omTy³
 >> 24) & 0xff);

565 
©omH—d”
[5] = (
by‹
)((
©omTy³
 >> 16) & 0xff);

566 
©omH—d”
[6] = (
by‹
)((
©omTy³
 >> 8) & 0xff);

567 
©omH—d”
[7] = (
by‹
)(
©omTy³
 & 0xff);

568 
out
.
	`wr™e
(
©omH—d”
, 0, 8);

569 
	}
}

571 
public
 
	$Wr™eAtom
(
FeOuutSŒ—m
 
out
, 
©omTy³
)

572 
throws
 
java
.
io
.
IOExû±iÚ
 {

573 
Atom
 
©om
 = 
mAtomM­
.
	`g‘
(
©omTy³
);

574 
	`S¹Atom
(
out
, 
©omTy³
);

575 
out
.
	`wr™e
(
©om
.
d©a
, 0,‡tom.
Ën
 - 8);

576 
	}
}

578 
public
 
	$S‘AtomD©a
(
©omTy³
, 
by‹
[] 
d©a
) {

579 
Atom
 
©om
 = 
mAtomM­
.
	`g‘
(
©omTy³
);

580 ià(
©om
 =ğ
nuÎ
) {

581 
©om
 = 
Ãw
 
	`Atom
();

582 
mAtomM­
.
	`put
(
©omTy³
, 
©om
);

584 
©om
.
Ën
 = 
d©a
.
Ëngth
 + 8;

585 
©om
.
d©a
 = data;

586 
	}
}

588 
public
 
	$Wr™eFe
(
Fe
 
ouutFe
, 
¡¬tF¿me
, 
numF¿mes
)

589 
throws
 
java
.
io
.
IOExû±iÚ
 {

590 
ouutFe
.
	`ü—‹NewFe
();

591 
FeIÅutSŒ—m
 
š
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

592 
FeOuutSŒ—m
 
out
 = 
Ãw
 
	`FeOuutSŒ—m
(
ouutFe
);

594 
	`S‘AtomD©a
(
kFTYP
, 
Ãw
 
by‹
[] {

603 
	`S‘AtomD©a
(
kSTTS
, 
Ãw
 
by‹
[] {

606 (
by‹
è((
numF¿mes
 >> 24) & 0xff),

607 (
by‹
è((
numF¿mes
 >> 16) & 0xff),

608 (
by‹
è((
numF¿mes
 >> 8) & 0xff),

609 (
by‹
è(
numF¿mes
 & 0xff),

610 (
by‹
è((
mSam¶esP”F¿me
 >> 24) & 0xff),

611 (
by‹
è((
mSam¶esP”F¿me
 >> 16) & 0xff),

612 (
by‹
è((
mSam¶esP”F¿me
 >> 8) & 0xff),

613 (
by‹
è(
mSam¶esP”F¿me
 & 0xff)

616 
	`S‘AtomD©a
(
kSTSC
, 
Ãw
 
by‹
[] {

620 (
by‹
è((
numF¿mes
 >> 24) & 0xff),

621 (
by‹
è((
numF¿mes
 >> 16) & 0xff),

622 (
by‹
è((
numF¿mes
 >> 8) & 0xff),

623 (
by‹
è(
numF¿mes
 & 0xff),

627 
by‹
[] 
¡szD©a
 = 
Ãw
 by‹[12 + 4 * 
numF¿mes
];

628 
¡szD©a
[8] = (
by‹
)((
numF¿mes
 >> 24) & 0xff);

629 
¡szD©a
[9] = (
by‹
)((
numF¿mes
 >> 16) & 0xff);

630 
¡szD©a
[10] = (
by‹
)((
numF¿mes
 >> 8) & 0xff);

631 
¡szD©a
[11] = (
by‹
)(
numF¿mes
 & 0xff);

632 
i
 = 0; i < 
numF¿mes
; i++) {

633 
¡szD©a
[12 + 4 * 
i
] =

634 (
by‹
)((
mF¿meL’s
[
¡¬tF¿me
 + 
i
] >> 24) & 0xff);

635 
¡szD©a
[13 + 4 * 
i
] =

636 (
by‹
)((
mF¿meL’s
[
¡¬tF¿me
 + 
i
] >> 16) & 0xff);

637 
¡szD©a
[14 + 4 * 
i
] =

638 (
by‹
)((
mF¿meL’s
[
¡¬tF¿me
 + 
i
] >> 8) & 0xff);

639 
¡szD©a
[15 + 4 * 
i
] =

640 (
by‹
)(
mF¿meL’s
[
¡¬tF¿me
 + 
i
] & 0xff);

642 
	`S‘AtomD©a
(
kSTSZ
, 
¡szD©a
);

644 
md©Off£t
 =

646 4 * 
numF¿mes
 +

647 
mAtomM­
.
	`g‘
(
kSTSD
).
Ën
 +

648 
mAtomM­
.
	`g‘
(
kSTSC
).
Ën
 +

649 
mAtomM­
.
	`g‘
(
kMVHD
).
Ën
 +

650 
mAtomM­
.
	`g‘
(
kTKHD
).
Ën
 +

651 
mAtomM­
.
	`g‘
(
kMDHD
).
Ën
 +

652 
mAtomM­
.
	`g‘
(
kHDLR
).
Ën
 +

653 
mAtomM­
.
	`g‘
(
kSMHD
).
Ën
 +

654 
mAtomM­
.
	`g‘
(
kDINF
).
Ën
;

658 
	`S‘AtomD©a
(
kSTCO
, 
Ãw
 
by‹
[] {

661 (
by‹
è((
md©Off£t
 >> 24) & 0xff),

662 (
by‹
è((
md©Off£t
 >> 16) & 0xff),

663 (
by‹
è((
md©Off£t
 >> 8) & 0xff),

664 (
by‹
è(
md©Off£t
 & 0xff),

667 
mAtomM­
.
	`g‘
(
kSTBL
).
Ën
 =

669 
mAtomM­
.
	`g‘
(
kSTSD
).
Ën
 +

670 
mAtomM­
.
	`g‘
(
kSTTS
).
Ën
 +

671 
mAtomM­
.
	`g‘
(
kSTSC
).
Ën
 +

672 
mAtomM­
.
	`g‘
(
kSTSZ
).
Ën
 +

673 
mAtomM­
.
	`g‘
(
kSTCO
).
Ën
;

675 
mAtomM­
.
	`g‘
(
kMINF
).
Ën
 =

677 
mAtomM­
.
	`g‘
(
kDINF
).
Ën
 +

678 
mAtomM­
.
	`g‘
(
kSMHD
).
Ën
 +

679 
mAtomM­
.
	`g‘
(
kSTBL
).
Ën
;

681 
mAtomM­
.
	`g‘
(
kMDIA
).
Ën
 =

683 
mAtomM­
.
	`g‘
(
kMDHD
).
Ën
 +

684 
mAtomM­
.
	`g‘
(
kHDLR
).
Ën
 +

685 
mAtomM­
.
	`g‘
(
kMINF
).
Ën
;

687 
mAtomM­
.
	`g‘
(
kTRAK
).
Ën
 =

689 
mAtomM­
.
	`g‘
(
kTKHD
).
Ën
 +

690 
mAtomM­
.
	`g‘
(
kMDIA
).
Ën
;

692 
mAtomM­
.
	`g‘
(
kMOOV
).
Ën
 =

694 
mAtomM­
.
	`g‘
(
kMVHD
).
Ën
 +

695 
mAtomM­
.
	`g‘
(
kTRAK
).
Ën
;

697 
md©L’
 = 8;

698 
i
 = 0; i < 
numF¿mes
; i++) {

699 
md©L’
 +ğ
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

701 
mAtomM­
.
	`g‘
(
kMDAT
).
Ën
 = 
md©L’
;

703 
	`Wr™eAtom
(
out
, 
kFTYP
);

704 
	`S¹Atom
(
out
, 
kMOOV
);

706 
	`Wr™eAtom
(
out
, 
kMVHD
);

707 
	`S¹Atom
(
out
, 
kTRAK
);

709 
	`Wr™eAtom
(
out
, 
kTKHD
);

710 
	`S¹Atom
(
out
, 
kMDIA
);

712 
	`Wr™eAtom
(
out
, 
kMDHD
);

713 
	`Wr™eAtom
(
out
, 
kHDLR
);

714 
	`S¹Atom
(
out
, 
kMINF
);

716 
	`Wr™eAtom
(
out
, 
kDINF
);

717 
	`Wr™eAtom
(
out
, 
kSMHD
);

718 
	`S¹Atom
(
out
, 
kSTBL
);

720 
	`Wr™eAtom
(
out
, 
kSTSD
);

721 
	`Wr™eAtom
(
out
, 
kSTTS
);

722 
	`Wr™eAtom
(
out
, 
kSTSC
);

723 
	`Wr™eAtom
(
out
, 
kSTSZ
);

724 
	`Wr™eAtom
(
out
, 
kSTCO
);

730 
	`S¹Atom
(
out
, 
kMDAT
);

732 
maxF¿meL’
 = 0;

733 
i
 = 0; i < 
numF¿mes
; i++) {

734 ià(
mF¿meL’s
[
¡¬tF¿me
 + 
i
] > 
maxF¿meL’
)

735 
maxF¿meL’
 = 
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

737 
by‹
[] 
bufãr
 = 
Ãw
 by‹[
maxF¿meL’
];

738 
pos
 = 0;

739 
i
 = 0; i < 
numF¿mes
; i++) {

740 
sk
 = 
mF¿meOff£ts
[
¡¬tF¿me
 + 
i
] - 
pos
;

741 
Ën
 = 
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

742 ià(
sk
 < 0) {

745 ià(
sk
 > 0) {

746 
š
.
	`sk
(
sk
);

747 
pos
 +ğ
sk
;

749 
š
.
	`»ad
(
bufãr
, 0, 
Ën
);

750 
out
.
	`wr™e
(
bufãr
, 0, 
Ën
);

751 
pos
 +ğ
Ën
;

754 
š
.
	`şo£
();

755 
out
.
	`şo£
();

756 
	}
}

	@src/com/ringdroid/soundfile/CheapAMR.java

17 
·ckage
 
	gcom
.
	gršgdroid
.
	gsoundfe
;

19 
impÜt
 
	gjava
.
	gio
.
	gFe
;

20 
impÜt
 
	gjava
.
	gio
.
	gFeIÅutSŒ—m
;

21 
impÜt
 
	gjava
.
	gio
.
	gFeOuutSŒ—m
;

22 
impÜt
 
	gjava
.
	gio
.
	gIÅutSŒ—m
;

23 
impÜt
 
	gjava
.
	gÏng
.
	gM©h
;

36 
public
 cÏs 
	cCh—pAMR
 
ex‹nds
 
	mCh—pSoundFe
 {

37 
public
 
FaùÜy
 
	$g‘FaùÜy
() {

38  
Ãw
 
	`FaùÜy
() {

39 
public
 
Ch—pSoundFe
 
	`ü—‹
() {

40  
Ãw
 
	`Ch—pAMR
();

42 
public
 
SŒšg
[] 
	`g‘SuµÜ‹dEx‹nsiÚs
() {

43  
Ãw
 
SŒšg
[] { "3gpp", "3gp", "amr" };

49 
´iv©e
 
mNumF¿mes
;

50 
´iv©e
 [] 
mF¿meOff£ts
;

51 
´iv©e
 [] 
mF¿meL’s
;

52 
´iv©e
 [] 
mF¿meGašs
;

53 
´iv©e
 
mFeSize
;

54 
´iv©e
 
mB™R©e
;

57 
´iv©e
 
mOff£t
;

58 
´iv©e
 
mMaxF¿mes
;

59 
´iv©e
 
mMšGaš
;

60 
´iv©e
 
mMaxGaš
;

62 
public
 
	$Ch—pAMR
() {

63 
	}
}

65 
public
 
	$g‘NumF¿mes
() {

66  
mNumF¿mes
;

67 
	}
}

69 
public
 
	$g‘Sam¶esP”F¿me
() {

71 
	}
}

73 
public
 [] 
	$g‘F¿meOff£ts
() {

74  
mF¿meOff£ts
;

75 
	}
}

77 
public
 [] 
	$g‘F¿meL’s
() {

78  
mF¿meL’s
;

79 
	}
}

81 
public
 [] 
	$g‘F¿meGašs
() {

82  
mF¿meGašs
;

83 
	}
}

85 
public
 
	$g‘FeSizeBy‹s
() {

86  
mFeSize
;

87 
	}
}

89 
public
 
	$g‘AvgB™¿‹Kbps
() {

90  
mB™R©e
;

91 
	}
}

93 
public
 
	$g‘Sam¶eR©e
() {

95 
	}
}

97 
public
 
	$g‘ChªÃls
() {

99 
	}
}

101 
public
 
SŒšg
 
	$g‘F‘y³
() {

103 
	}
}

105 
public
 
	$R—dFe
(
Fe
 
šputFe
)

106 
throws
 
java
.
io
.
FeNÙFoundExû±iÚ
,

107 
java
.
io
.
IOExû±iÚ
 {

108 
su³r
.
	`R—dFe
(
šputFe
);

109 
mNumF¿mes
 = 0;

110 
mMaxF¿mes
 = 64;

111 
mF¿meOff£ts
 = 
Ãw
 [
mMaxF¿mes
];

112 
mF¿meL’s
 = 
Ãw
 [
mMaxF¿mes
];

113 
mF¿meGašs
 = 
Ãw
 [
mMaxF¿mes
];

114 
mMšGaš
 = 1000000000;

115 
mMaxGaš
 = 0;

116 
mB™R©e
 = 10;

117 
mOff£t
 = 0;

120 
mFeSize
 = ()
mIÅutFe
.
	`Ëngth
();

122 ià(
mFeSize
 < 128) {

123 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
("Fileoo smallo…arse");

126 
FeIÅutSŒ—m
 
¡»am
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

127 
by‹
[] 
h—d”
 = 
Ãw
 byte[12];

128 
¡»am
.
	`»ad
(
h—d”
, 0, 6);

129 
mOff£t
 += 6;

130 ià(
h—d”
[0] == '#' &&

131 
h—d”
[1] == '!' &&

132 
h—d”
[2] == 'A' &&

133 
h—d”
[3] == 'M' &&

134 
h—d”
[4] == 'R' &&

135 
h—d”
[5] == '\n') {

136 
	`·r£AMR
(
¡»am
, 
mFeSize
 - 6);

139 
¡»am
.
	`»ad
(
h—d”
, 6, 6);

140 
mOff£t
 += 6;

142 ià(
h—d”
[4] == 'f' &&

143 
h—d”
[5] == 't' &&

144 
h—d”
[6] == 'y' &&

145 
h—d”
[7] == 'p' &&

146 
h—d”
[8] == '3' &&

147 
h—d”
[9] == 'g' &&

148 
h—d”
[10] == 'p' &&

149 
h—d”
[11] == '4') {

151 
boxL’
 =

152 ((0xfà& 
h—d”
[0]) << 24) |

153 ((0xfà& 
h—d”
[1]) << 16) |

154 ((0xfà& 
h—d”
[2]) << 8) |

155 ((0xfà& 
h—d”
[3]));

157 ià(
boxL’
 >ğ4 && boxL’ <ğ
mFeSize
 - 8) {

158 
¡»am
.
	`sk
(
boxL’
 - 12);

159 
mOff£t
 +ğ
boxL’
 - 12;

162 
	`·r£3gµ
(
¡»am
, 
mFeSize
 - 
boxL’
);

164 
	}
}

166 
´iv©e
 
	$·r£3gµ
(
IÅutSŒ—m
 
¡»am
, 
maxL’
)

167 
throws
 
java
.
io
.
IOExû±iÚ
 {

168 ià(
maxL’
 < 8)

171 
by‹
[] 
boxH—d”
 = 
Ãw
 byte[8];

172 
¡»am
.
	`»ad
(
boxH—d”
, 0, 8);

173 
mOff£t
 += 8;

175 
boxL’
 =

176 ((0xfà& 
boxH—d”
[0]) << 24) |

177 ((0xfà& 
boxH—d”
[1]) << 16) |

178 ((0xfà& 
boxH—d”
[2]) << 8) |

179 ((0xfà& 
boxH—d”
[3]));

181 ià(
boxL’
 > 
maxL’
 || boxLen <= 0)

184 ià(
boxH—d”
[4] == 'm' &&

185 
boxH—d”
[5] == 'd' &&

186 
boxH—d”
[6] == 'a' &&

187 
boxH—d”
[7] == 't') {

188 
	`·r£AMR
(
¡»am
, 
boxL’
);

192 
¡»am
.
	`sk
(
boxL’
 - 8);

193 
mOff£t
 +ğ(
boxL’
 - 8);

195 
	`·r£3gµ
(
¡»am
, 
maxL’
 - 
boxL’
);

196 
	}
}

198 
	$·r£AMR
(
IÅutSŒ—m
 
¡»am
, 
maxL’
)

199 
throws
 
java
.
io
.
IOExû±iÚ
 {

200 [] 
´evEÃr
 = 
Ãw
 [4];

201 
i
 = 0; i < 4; i++) {

202 
´evEÃr
[
i
] = 0;

205 [] 
´evEÃrMR122
 = 
Ãw
 [4];

206 
i
 = 0; i < 4; i++) {

207 
´evEÃrMR122
[
i
] = -2381;

210 
Üigš®MaxL’
 = 
maxL’
;

211 
by‹sTÙ®
 = 0;

212 
maxL’
 > 0) {

213 
by‹sCÚsumed
 = 
	`·r£AMRF¿me
(
¡»am
, 
maxL’
, 
´evEÃr
);

214 
by‹sTÙ®
 +ğ
by‹sCÚsumed
;

215 
maxL’
 -ğ
by‹sCÚsumed
;

217 ià(
mProg»ssLi¡’”
 !ğ
nuÎ
) {

218 
boŞ—n
 
k“pGošg
 = 
mProg»ssLi¡’”
.
	`»pÜtProg»ss
(

219 
by‹sTÙ®
 * 1.0 / 
Üigš®MaxL’
);

220 ià(!
k“pGošg
) {

225 
	}
}

227 
	$·r£AMRF¿me
(
IÅutSŒ—m
 
¡»am
, 
maxL’
, [] 
´evEÃr
)

228 
throws
 
java
.
io
.
IOExû±iÚ
 {

229 
äameOff£t
 = 
mOff£t
;

230 
by‹
[] 
äameTy³H—d”
 = 
Ãw
 byte[1];

231 
¡»am
.
	`»ad
(
äameTy³H—d”
, 0, 1);

232 
mOff£t
 += 1;

233 
äameTy³
 = ((0xfà& 
äameTy³H—d”
[0]) >> 3) % 0x0F;

234 
äameQu®™y
 = ((0xfà& 
äameTy³H—d”
[0]) >> 2) & 0x01;

235 
blockSize
 = 
BLOCK_SIZES
[
äameTy³
];

237 ià(
blockSize
 + 1 > 
maxL’
) {

240  
maxL’
;

243 ià(
blockSize
 == 0) {

247 
by‹
[] 
v
 = 
Ãw
 by‹[
blockSize
];

248 
¡»am
.
	`»ad
(
v
, 0, 
blockSize
);

249 
mOff£t
 +ğ
blockSize
;

251 [] 
b™s
 = 
Ãw
 [
blockSize
 * 8];

252 
ii
 = 0;

253 
v®ue
 = 0xfà& 
v
[
ii
];

254 
i
 = 0; i < 
blockSize
 * 8; i++) {

255 
b™s
[
i
] = ((
v®ue
 & 0x80) >> 7);

256 
v®ue
 <<= 1;

257 ià((
i
 & 0x07è=ğ0x07 && i < 
blockSize
 * 8 - 1) {

258 
ii
 += 1;

259 
v®ue
 = 0xfà& 
v
[
ii
];

263 [] 
gaš
;

264 
äameTy³
) {

266 
mB™R©e
 = 5;

267 
gaš
 = 
Ãw
 [4];

268 
gaš
[0] =

269 0x01 * 
b™s
[28] +

270 0x02 * 
b™s
[29] +

271 0x04 * 
b™s
[30] +

272 0x08 * 
b™s
[31] +

273 0x10 * 
b™s
[46] +

274 0x20 * 
b™s
[47] +

275 0x40 * 
b™s
[48] +

276 0x80 * 
b™s
[49];

277 
gaš
[1] = gain[0];

278 
gaš
[2] =

279 0x01 * 
b™s
[32] +

280 0x02 * 
b™s
[33] +

281 0x04 * 
b™s
[34] +

282 0x08 * 
b™s
[35] +

283 0x10 * 
b™s
[40] +

284 0x20 * 
b™s
[41] +

285 0x40 * 
b™s
[42] +

286 0x80 * 
b™s
[43];

287 
gaš
[3] = gain[2];

289 
i
 = 0; i < 4; i++) {

290 
šdex
 = 
gaš
[
i
] * 4 + (i & 1) * 2 + 1;

291 
gFac
 = 
GAIN_FAC_MR475
[
šdex
];

293 
log2
 = 
M©h
.
	`log
(
gFac
) / Math.log(2);

294 
exp
 = ()
log2
;

295 
äac
 = ()((
log2
 - 
exp
) * 32768);

297 
exp
 -= 12;

298 
tmp
 = 
exp
 * 49320;

299 
tmp
 +ğ((
äac
 * 24660) >> 15) * 2;

300 
quaEÃr
 = ((
tmp
 * 8192) + 0x8000) >> 16;

302 
gcode0
 =

304 
´evEÃr
[0] * 5571 +

305 
´evEÃr
[1] * 4751 +

306 
´evEÃr
[2] * 2785 +

307 
´evEÃr
[3] * 1556) >> 15;

309 
´evEÃr
[3] =…revEner[2];

310 
´evEÃr
[2] =…revEner[1];

311 
´evEÃr
[1] =…revEner[0];

312 
´evEÃr
[0] = 
quaEÃr
;

314 
äameGašE¡im©e
 = (
gcode0
 * 
gFac
) >> 24;

316 
	`addF¿me
(
äameOff£t
, 
blockSize
 + 1, 
äameGašE¡im©e
);

322 
mB™R©e
 = 5;

323 
gaš
 = 
Ãw
 [4];

324 
gaš
[0] =

325 0x01 * 
b™s
[24] +

326 0x02 * 
b™s
[25] +

327 0x04 * 
b™s
[26] +

328 0x08 * 
b™s
[36] +

329 0x10 * 
b™s
[45] +

330 0x20 * 
b™s
[55];

331 
gaš
[1] =

332 0x01 * 
b™s
[27] +

333 0x02 * 
b™s
[28] +

334 0x04 * 
b™s
[29] +

335 0x08 * 
b™s
[37] +

336 0x10 * 
b™s
[46] +

337 0x20 * 
b™s
[56];

338 
gaš
[2] =

339 0x01 * 
b™s
[30] +

340 0x02 * 
b™s
[31] +

341 0x04 * 
b™s
[32] +

342 0x08 * 
b™s
[38] +

343 0x10 * 
b™s
[47] +

344 0x20 * 
b™s
[57];

345 
gaš
[3] =

346 0x01 * 
b™s
[33] +

347 0x02 * 
b™s
[34] +

348 0x04 * 
b™s
[35] +

349 0x08 * 
b™s
[39] +

350 0x10 * 
b™s
[48] +

351 0x20 * 
b™s
[58];

353 
i
 = 0; i < 4; i++) {

354 
gcode0
 =

356 
´evEÃr
[0] * 5571 +

357 
´evEÃr
[1] * 4751 +

358 
´evEÃr
[2] * 2785 +

359 
´evEÃr
[3] * 1556) >> 15;

360 
quaEÃr
 = 
QUA_ENER_MR515
[
gaš
[
i
]];

361 
gFac
 = 
GAIN_FAC_MR515
[
gaš
[
i
]];

363 
´evEÃr
[3] =…revEner[2];

364 
´evEÃr
[2] =…revEner[1];

365 
´evEÃr
[1] =…revEner[0];

366 
´evEÃr
[0] = 
quaEÃr
;

368 
äameGašE¡im©e
 = (
gcode0
 * 
gFac
) >> 24;

370 
	`addF¿me
(
äameOff£t
, 
blockSize
 + 1, 
äameGašE¡im©e
);

375 
mB™R©e
 = 12;

376 [] 
ad­tiveIndex
 = 
Ãw
 [4];

377 [] 
ad­tiveGaš
 = 
Ãw
 [4];

378 [] 
fixedGaš
 = 
Ãw
 [4];

379 [][] 
pul£
 = 
Ãw
 [4][];

380 
i
 = 0; i < 4; i++) {

381 
pul£
[
i
] = 
Ãw
 [10];

383 
	`g‘MR122P¬ams
(
b™s
, 
ad­tiveIndex
, 
ad­tiveGaš
, 
fixedGaš
, 
pul£
);

385 
T0
 = 0;

386 
subäame
 = 0; subframe < 4; subframe++) {

387 [] 
code
 = 
Ãw
 [40];

388 
i
 = 0; i < 40; i++) {

389 
code
[
i
] = 0;

392 
sign
;

393 
j
 = 0; j < 5; j++) {

394 ià(((
pul£
[
subäame
][
j
] >> 3) & 1) == 0) {

395 
sign
 = 4096;

397 
sign
 = -4096;

400 
pos1
 = 
j
 + 
GRAY
[
pul£
[
subäame
][j] & 7] * 5;

401 
pos2
 = 
j
 + 
GRAY
[
pul£
[
subäame
][j + 5] & 7] * 5;

402 
code
[
pos1
] = 
sign
;

403 ià(
pos2
 < 
pos1
) {

404 
sign
 = -sign;

406 
code
[
pos2
] = code[pos2] + 
sign
;

409 
šdex
 = 
ad­tiveIndex
[
subäame
];

411 ià(
subäame
 == 0 || subframe == 2) {

412 ià(
šdex
 < 463) {

413 
T0
 = (
šdex
 + 5) / 6 + 17;

415 
T0
 = 
šdex
 - 368;

418 
p™Mš
 = 18;

419 
p™Max
 = 143;

420 
T0Mš
 = 
T0
 - 5;

421 ià(
T0Mš
 < 
p™Mš
) {

422 
T0Mš
 = 
p™Mš
;

424 
T0Max
 = 
T0Mš
 + 9;

425 ià(
T0Max
 > 
p™Max
) {

426 
T0Max
 = 
p™Max
;

427 
T0Mš
 = 
T0Max
 - 9;

429 
T0
 = 
T0Mš
 + (
šdex
 + 5) / 6 - 1;

432 
p™Sh¬p
 =

433 (
QUA_GAIN_PITCH
[
ad­tiveGaš
[
subäame
]] >> 2) << 2;

434 ià(
p™Sh¬p
 > 16383) {

435 
p™Sh¬p
 = 32767;

437 
p™Sh¬p
 *= 2;

440 
j
 = 
T0
; j < 40; j++) {

441 
code
[
j
] +ğ(code[j - 
T0
] * 
p™Sh¬p
) >> 15;

444 
’”Code
 = 0;

445 
j
 = 0; j < 40; j++) {

446 
’”Code
 +ğ
code
[
j
] * code[j];

449 ià((0x3ffffffà<ğ
’”Code
) || (enerCode < 0)) {

450 
’”Code
 = 0x7fffffff;

452 
’”Code
 *= 2;

454 
’”Code
 = ((enerCode + 0x8000) >> 16) * 52428;

456 
log2
 = 
M©h
.
	`log
(
’”Code
) / Math.log(2);

457 
exp
 = ()
log2
;

458 
äac
 = ()((
log2
 - 
exp
) * 32768);

459 
’”Code
 = ((
exp
 - 30è<< 16è+ (
äac
 * 2);

461 
’”
 =

462 
´evEÃr
[0] * 44 +

463 
´evEÃr
[1] * 37 +

464 
´evEÃr
[2] * 22 +

465 
´evEÃr
[3] * 12;

467 
’”
 = 2 *ƒner + 783741;

468 
’”
 = (’” - 
’”Code
) / 2;

470 
expGCode
 = 
’”
 >> 16;

471 
äacGCode
 = (
’”
 >> 1è- (
expGCode
 << 15);

473 
gCode0
 = ()

474 (
M©h
.
	`pow
(2.0, 
expGCode
 + (
äacGCode
 / 32768.0)) + 0.5);

476 ià(
gCode0
 <= 2047) {

477 
gCode0
 = gCode0 << 4;

479 
gCode0
 = 32767;

482 
šdex
 = 
fixedGaš
[
subäame
];

484 
gašCode
 =

485 ((
gCode0
 * 
QUA_GAIN_CODE
[3 * 
šdex
]) >> 15) << 1;

487 ià((
gašCode
 & 0xFFFF8000) != 0) {

488 
gašCode
 = 32767;

491 
äameGašE¡im©e
 = 
gašCode
;

493 
	`addF¿me
(
äameOff£t
, 
blockSize
 + 1, 
äameGašE¡im©e
);

495 
quaEÃrMR122
 = 
QUA_GAIN_CODE
[3 * 
šdex
 + 1];

496 
´evEÃr
[3] =…revEner[2];

497 
´evEÃr
[2] =…revEner[1];

498 
´evEÃr
[1] =…revEner[0];

499 
´evEÃr
[0] = 
quaEÃrMR122
;

504 
Sy¡em
.
out
.
	`´šn
("UnsuµÜ‹d f¿mty³: " + 
äameTy³
);

505 
	`addF¿me
(
äameOff£t
, 
blockSize
 + 1, 1);

510  
blockSize
 + 1;

511 
	}
}

513 
	$addF¿me
(
off£t
, 
äameSize
, 
gaš
) {

514 
mF¿meOff£ts
[
mNumF¿mes
] = 
off£t
;

515 
mF¿meL’s
[
mNumF¿mes
] = 
äameSize
;

516 
mF¿meGašs
[
mNumF¿mes
] = 
gaš
;

517 ià(
gaš
 < 
mMšGaš
)

518 
mMšGaš
 = 
gaš
;

519 ià(
gaš
 > 
mMaxGaš
)

520 
mMaxGaš
 = 
gaš
;

522 
mNumF¿mes
++;

523 ià(
mNumF¿mes
 =ğ
mMaxF¿mes
) {

524 
ÃwMaxF¿mes
 = 
mMaxF¿mes
 * 2;

526 [] 
ÃwOff£ts
 = 
Ãw
 [
ÃwMaxF¿mes
];

527 [] 
ÃwL’s
 = 
Ãw
 [
ÃwMaxF¿mes
];

528 [] 
ÃwGašs
 = 
Ãw
 [
ÃwMaxF¿mes
];

529 
i
 = 0; i < 
mNumF¿mes
; i++) {

530 
ÃwOff£ts
[
i
] = 
mF¿meOff£ts
[i];

531 
ÃwL’s
[
i
] = 
mF¿meL’s
[i];

532 
ÃwGašs
[
i
] = 
mF¿meGašs
[i];

534 
mF¿meOff£ts
 = 
ÃwOff£ts
;

535 
mF¿meL’s
 = 
ÃwL’s
;

536 
mF¿meGašs
 = 
ÃwGašs
;

537 
mMaxF¿mes
 = 
ÃwMaxF¿mes
;

539 
	}
}

541 
public
 
	$Wr™eFe
(
Fe
 
ouutFe
, 
¡¬tF¿me
, 
numF¿mes
)

542 
throws
 
java
.
io
.
IOExû±iÚ
 {

543 
ouutFe
.
	`ü—‹NewFe
();

544 
FeIÅutSŒ—m
 
š
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

545 
FeOuutSŒ—m
 
out
 = 
Ãw
 
	`FeOuutSŒ—m
(
ouutFe
);

547 
by‹
[] 
h—d”
 = 
Ãw
 byte[6];

548 
h—d”
[0] = '#';

549 
h—d”
[1] = '!';

550 
h—d”
[2] = 'A';

551 
h—d”
[3] = 'M';

552 
h—d”
[4] = 'R';

553 
h—d”
[5] = '\n';

554 
out
.
	`wr™e
(
h—d”
, 0, 6);

556 
maxF¿meL’
 = 0;

557 
i
 = 0; i < 
numF¿mes
; i++) {

558 ià(
mF¿meL’s
[
¡¬tF¿me
 + 
i
] > 
maxF¿meL’
)

559 
maxF¿meL’
 = 
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

561 
by‹
[] 
bufãr
 = 
Ãw
 by‹[
maxF¿meL’
];

562 
pos
 = 0;

563 
i
 = 0; i < 
numF¿mes
; i++) {

564 
sk
 = 
mF¿meOff£ts
[
¡¬tF¿me
 + 
i
] - 
pos
;

565 
Ën
 = 
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

566 ià(
sk
 < 0) {

569 ià(
sk
 > 0) {

570 
š
.
	`sk
(
sk
);

571 
pos
 +ğ
sk
;

573 
š
.
	`»ad
(
bufãr
, 0, 
Ën
);

574 
out
.
	`wr™e
(
bufãr
, 0, 
Ën
);

575 
pos
 +ğ
Ën
;

578 
š
.
	`şo£
();

579 
out
.
	`şo£
();

580 
	}
}

582 
	$g‘MR122P¬ams
([] 
b™s
,

583 [] 
ad­tiveIndex
,

584 [] 
ad­tiveGaš
,

585 [] 
fixedGaš
,

586 [][] 
pul£
) {

587 
ad­tiveIndex
[0] =

588 0x01 * 
b™s
[45] +

589 0x02 * 
b™s
[43] +

590 0x04 * 
b™s
[41] +

591 0x08 * 
b™s
[39] +

592 0x10 * 
b™s
[37] +

593 0x20 * 
b™s
[35] +

594 0x40 * 
b™s
[33] +

595 0x80 * 
b™s
[31] +

596 0x100 * 
b™s
[29];

597 
ad­tiveIndex
[1] =

598 0x01 * 
b™s
[242] +

599 0x02 * 
b™s
[79] +

600 0x04 * 
b™s
[77] +

601 0x08 * 
b™s
[75] +

602 0x10 * 
b™s
[73] +

603 0x20 * 
b™s
[71];

604 
ad­tiveIndex
[2] =

605 0x01 * 
b™s
[46] +

606 0x02 * 
b™s
[44] +

607 0x04 * 
b™s
[42] +

608 0x08 * 
b™s
[40] +

609 0x10 * 
b™s
[38] +

610 0x20 * 
b™s
[36] +

611 0x40 * 
b™s
[34] +

612 0x80 * 
b™s
[32] +

613 0x100 * 
b™s
[30];

614 
ad­tiveIndex
[3] =

615 0x01 * 
b™s
[243] +

616 0x02 * 
b™s
[80] +

617 0x04 * 
b™s
[78] +

618 0x08 * 
b™s
[76] +

619 0x10 * 
b™s
[74] +

620 0x20 * 
b™s
[72];

622 
ad­tiveGaš
[0] =

623 0x01 * 
b™s
[88] +

624 0x02 * 
b™s
[55] +

625 0x04 * 
b™s
[51] +

626 0x08 * 
b™s
[47];

627 
ad­tiveGaš
[1] =

628 0x01 * 
b™s
[89] +

629 0x02 * 
b™s
[56] +

630 0x04 * 
b™s
[52] +

631 0x08 * 
b™s
[48];

632 
ad­tiveGaš
[2] =

633 0x01 * 
b™s
[90] +

634 0x02 * 
b™s
[57] +

635 0x04 * 
b™s
[53] +

636 0x08 * 
b™s
[49];

637 
ad­tiveGaš
[3] =

638 0x01 * 
b™s
[91] +

639 0x02 * 
b™s
[58] +

640 0x04 * 
b™s
[54] +

641 0x08 * 
b™s
[50];

643 
fixedGaš
[0] =

644 0x01 * 
b™s
[104] +

645 0x02 * 
b™s
[92] +

646 0x04 * 
b™s
[67] +

647 0x08 * 
b™s
[63] +

648 0x10 * 
b™s
[59];

649 
fixedGaš
[1] =

650 0x01 * 
b™s
[105] +

651 0x02 * 
b™s
[93] +

652 0x04 * 
b™s
[68] +

653 0x08 * 
b™s
[64] +

654 0x10 * 
b™s
[60];

655 
fixedGaš
[2] =

656 0x01 * 
b™s
[106] +

657 0x02 * 
b™s
[94] +

658 0x04 * 
b™s
[69] +

659 0x08 * 
b™s
[65] +

660 0x10 * 
b™s
[61];

661 
fixedGaš
[3] =

662 0x01 * 
b™s
[107] +

663 0x02 * 
b™s
[95] +

664 0x04 * 
b™s
[70] +

665 0x08 * 
b™s
[66] +

666 0x10 * 
b™s
[62];

668 
pul£
[0][0] =

669 0x01 * 
b™s
[122] +

670 0x02 * 
b™s
[123] +

671 0x04 * 
b™s
[124] +

672 0x08 * 
b™s
[96];

673 
pul£
[0][1] =

674 0x01 * 
b™s
[125] +

675 0x02 * 
b™s
[126] +

676 0x04 * 
b™s
[127] +

677 0x08 * 
b™s
[100];

678 
pul£
[0][2] =

679 0x01 * 
b™s
[128] +

680 0x02 * 
b™s
[129] +

681 0x04 * 
b™s
[130] +

682 0x08 * 
b™s
[108];

683 
pul£
[0][3] =

684 0x01 * 
b™s
[131] +

685 0x02 * 
b™s
[132] +

686 0x04 * 
b™s
[133] +

687 0x08 * 
b™s
[112];

688 
pul£
[0][4] =

689 0x01 * 
b™s
[134] +

690 0x02 * 
b™s
[135] +

691 0x04 * 
b™s
[136] +

692 0x08 * 
b™s
[116];

693 
pul£
[0][5] =

694 0x01 * 
b™s
[182] +

695 0x02 * 
b™s
[183] +

696 0x04 * 
b™s
[184];

697 
pul£
[0][6] =

698 0x01 * 
b™s
[185] +

699 0x02 * 
b™s
[186] +

700 0x04 * 
b™s
[187];

701 
pul£
[0][7] =

702 0x01 * 
b™s
[188] +

703 0x02 * 
b™s
[189] +

704 0x04 * 
b™s
[190];

705 
pul£
[0][8] =

706 0x01 * 
b™s
[191] +

707 0x02 * 
b™s
[192] +

708 0x04 * 
b™s
[193];

709 
pul£
[0][9] =

710 0x01 * 
b™s
[194] +

711 0x02 * 
b™s
[195] +

712 0x04 * 
b™s
[196];

713 
pul£
[1][0] =

714 0x01 * 
b™s
[137] +

715 0x02 * 
b™s
[138] +

716 0x04 * 
b™s
[139] +

717 0x08 * 
b™s
[97];

718 
pul£
[1][1] =

719 0x01 * 
b™s
[140] +

720 0x02 * 
b™s
[141] +

721 0x04 * 
b™s
[142] +

722 0x08 * 
b™s
[101];

723 
pul£
[1][2] =

724 0x01 * 
b™s
[143] +

725 0x02 * 
b™s
[144] +

726 0x04 * 
b™s
[145] +

727 0x08 * 
b™s
[109];

728 
pul£
[1][3] =

729 0x01 * 
b™s
[146] +

730 0x02 * 
b™s
[147] +

731 0x04 * 
b™s
[148] +

732 0x08 * 
b™s
[113];

733 
pul£
[1][4] =

734 0x01 * 
b™s
[149] +

735 0x02 * 
b™s
[150] +

736 0x04 * 
b™s
[151] +

737 0x08 * 
b™s
[117];

738 
pul£
[1][5] =

739 0x01 * 
b™s
[197] +

740 0x02 * 
b™s
[198] +

741 0x04 * 
b™s
[199];

742 
pul£
[1][6] =

743 0x01 * 
b™s
[200] +

744 0x02 * 
b™s
[201] +

745 0x04 * 
b™s
[202];

746 
pul£
[1][7] =

747 0x01 * 
b™s
[203] +

748 0x02 * 
b™s
[204] +

749 0x04 * 
b™s
[205];

750 
pul£
[1][8] =

751 0x01 * 
b™s
[206] +

752 0x02 * 
b™s
[207] +

753 0x04 * 
b™s
[208];

754 
pul£
[1][9] =

755 0x01 * 
b™s
[209] +

756 0x02 * 
b™s
[210] +

757 0x04 * 
b™s
[211];

758 
pul£
[2][0] =

759 0x01 * 
b™s
[152] +

760 0x02 * 
b™s
[153] +

761 0x04 * 
b™s
[154] +

762 0x08 * 
b™s
[98];

763 
pul£
[2][1] =

764 0x01 * 
b™s
[155] +

765 0x02 * 
b™s
[156] +

766 0x04 * 
b™s
[157] +

767 0x08 * 
b™s
[102];

768 
pul£
[2][2] =

769 0x01 * 
b™s
[158] +

770 0x02 * 
b™s
[159] +

771 0x04 * 
b™s
[160] +

772 0x08 * 
b™s
[110];

773 
pul£
[2][3] =

774 0x01 * 
b™s
[161] +

775 0x02 * 
b™s
[162] +

776 0x04 * 
b™s
[163] +

777 0x08 * 
b™s
[114];

778 
pul£
[2][4] =

779 0x01 * 
b™s
[164] +

780 0x02 * 
b™s
[165] +

781 0x04 * 
b™s
[166] +

782 0x08 * 
b™s
[118];

783 
pul£
[2][5] =

784 0x01 * 
b™s
[212] +

785 0x02 * 
b™s
[213] +

786 0x04 * 
b™s
[214];

787 
pul£
[2][6] =

788 0x01 * 
b™s
[215] +

789 0x02 * 
b™s
[216] +

790 0x04 * 
b™s
[217];

791 
pul£
[2][7] =

792 0x01 * 
b™s
[218] +

793 0x02 * 
b™s
[219] +

794 0x04 * 
b™s
[220];

795 
pul£
[2][8] =

796 0x01 * 
b™s
[221] +

797 0x02 * 
b™s
[222] +

798 0x04 * 
b™s
[223];

799 
pul£
[2][9] =

800 0x01 * 
b™s
[224] +

801 0x02 * 
b™s
[225] +

802 0x04 * 
b™s
[226];

803 
pul£
[3][0] =

804 0x01 * 
b™s
[167] +

805 0x02 * 
b™s
[168] +

806 0x04 * 
b™s
[169] +

807 0x08 * 
b™s
[99];

808 
pul£
[3][1] =

809 0x01 * 
b™s
[170] +

810 0x02 * 
b™s
[171] +

811 0x04 * 
b™s
[172] +

812 0x08 * 
b™s
[103];

813 
pul£
[3][2] =

814 0x01 * 
b™s
[173] +

815 0x02 * 
b™s
[174] +

816 0x04 * 
b™s
[175] +

817 0x08 * 
b™s
[111];

818 
pul£
[3][3] =

819 0x01 * 
b™s
[176] +

820 0x02 * 
b™s
[177] +

821 0x04 * 
b™s
[178] +

822 0x08 * 
b™s
[115];

823 
pul£
[3][4] =

824 0x01 * 
b™s
[179] +

825 0x02 * 
b™s
[180] +

826 0x04 * 
b™s
[181] +

827 0x08 * 
b™s
[119];

828 
pul£
[3][5] =

829 0x01 * 
b™s
[227] +

830 0x02 * 
b™s
[228] +

831 0x04 * 
b™s
[229];

832 
pul£
[3][6] =

833 0x01 * 
b™s
[230] +

834 0x02 * 
b™s
[231] +

835 0x04 * 
b™s
[232];

836 
pul£
[3][7] =

837 0x01 * 
b™s
[233] +

838 0x02 * 
b™s
[234] +

839 0x04 * 
b™s
[235];

840 
pul£
[3][8] =

841 0x01 * 
b™s
[236] +

842 0x02 * 
b™s
[237] +

843 0x04 * 
b™s
[238];

844 
pul£
[3][9] =

845 0x01 * 
b™s
[239] +

846 0x02 * 
b™s
[240] +

847 0x04 * 
b™s
[241];

848 
	}
}

853 
´iv©e
 
	gBLOCK_SIZES
[] = {

857 
´iv©e
 
	gGAIN_FAC_MR515
[] = {

868 
´iv©e
 
	gQUA_ENER_MR515
[] = {

879 
´iv©e
 
	gQUA_GAIN_CODE
[] = {

897 
´iv©e
 
	gGAIN_FAC_MR475
[] = {

1027 
´iv©e
 
	gGRAY
[] = {0, 1, 3, 2, 5, 6, 4, 7};

1029 
´iv©e
 
	gQUA_GAIN_PITCH
[] = {

	@src/com/ringdroid/soundfile/CheapMP3.java

17 
·ckage
 
	gcom
.
	gršgdroid
.
	gsoundfe
;

19 
impÜt
 
	gjava
.
	gio
.
	gFe
;

20 
impÜt
 
	gjava
.
	gio
.
	gFeIÅutSŒ—m
;

21 
impÜt
 
	gjava
.
	gio
.
	gFeOuutSŒ—m
;

36 
public
 cÏs 
	cCh—pMP3
 
ex‹nds
 
	mCh—pSoundFe
 {

37 
public
 
FaùÜy
 
	$g‘FaùÜy
() {

38  
Ãw
 
	`FaùÜy
() {

39 
public
 
Ch—pSoundFe
 
	`ü—‹
() {

40  
Ãw
 
	`Ch—pMP3
();

42 
public
 
SŒšg
[] 
	`g‘SuµÜ‹dEx‹nsiÚs
() {

43  
Ãw
 
SŒšg
[] { "mp3" };

49 
´iv©e
 
mNumF¿mes
;

50 
´iv©e
 [] 
mF¿meOff£ts
;

51 
´iv©e
 [] 
mF¿meL’s
;

52 
´iv©e
 [] 
mF¿meGašs
;

53 
´iv©e
 
mFeSize
;

54 
´iv©e
 
mAvgB™R©e
;

55 
´iv©e
 
mGlob®Sam¶eR©e
;

56 
´iv©e
 
mGlob®ChªÃls
;

59 
´iv©e
 
mMaxF¿mes
;

60 
´iv©e
 
mB™¿‹Sum
;

61 
´iv©e
 
mMšGaš
;

62 
´iv©e
 
mMaxGaš
;

64 
public
 
	$Ch—pMP3
() {

65 
	}
}

67 
public
 
	$g‘NumF¿mes
() {

68  
mNumF¿mes
;

69 
	}
}

71 
public
 [] 
	$g‘F¿meOff£ts
() {

72  
mF¿meOff£ts
;

73 
	}
}

75 
public
 
	$g‘Sam¶esP”F¿me
() {

77 
	}
}

79 
public
 [] 
	$g‘F¿meL’s
() {

80  
mF¿meL’s
;

81 
	}
}

83 
public
 [] 
	$g‘F¿meGašs
() {

84  
mF¿meGašs
;

85 
	}
}

87 
public
 
	$g‘FeSizeBy‹s
() {

88  
mFeSize
;

89 
	}
}

91 
public
 
	$g‘AvgB™¿‹Kbps
() {

92  
mAvgB™R©e
;

93 
	}
}

95 
public
 
	$g‘Sam¶eR©e
() {

96  
mGlob®Sam¶eR©e
;

97 
	}
}

99 
public
 
	$g‘ChªÃls
() {

100  
mGlob®ChªÃls
;

101 
	}
}

103 
public
 
SŒšg
 
	$g‘F‘y³
() {

105 
	}
}

112 
public
 
	$g‘S“kabËF¿meOff£t
(
äame
) {

113 ià(
äame
 <= 0) {

115 } ià(
äame
 >ğ
mNumF¿mes
) {

116  
mFeSize
;

118  
mF¿meOff£ts
[
äame
];

120 
	}
}

122 
public
 
	$R—dFe
(
Fe
 
šputFe
)

123 
throws
 
java
.
io
.
FeNÙFoundExû±iÚ
,

124 
java
.
io
.
IOExû±iÚ
 {

125 
su³r
.
	`R—dFe
(
šputFe
);

126 
mNumF¿mes
 = 0;

127 
mMaxF¿mes
 = 64;

128 
mF¿meOff£ts
 = 
Ãw
 [
mMaxF¿mes
];

129 
mF¿meL’s
 = 
Ãw
 [
mMaxF¿mes
];

130 
mF¿meGašs
 = 
Ãw
 [
mMaxF¿mes
];

131 
mB™¿‹Sum
 = 0;

132 
mMšGaš
 = 255;

133 
mMaxGaš
 = 0;

136 
mFeSize
 = ()
mIÅutFe
.
	`Ëngth
();

138 
FeIÅutSŒ—m
 
¡»am
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

140 
pos
 = 0;

141 
off£t
 = 0;

142 
by‹
[] 
bufãr
 = 
Ãw
 byte[12];

143 
pos
 < 
mFeSize
 - 12) {

145 
off£t
 < 12) {

146 
off£t
 +ğ
¡»am
.
	`»ad
(
bufãr
, offset, 12 - offset);

148 
bufãrOff£t
 = 0;

149 
bufãrOff£t
 < 12 &&

150 
bufãr
[
bufãrOff£t
] != -1)

151 
bufãrOff£t
++;

153 ià(
mProg»ssLi¡’”
 !ğ
nuÎ
) {

154 
boŞ—n
 
k“pGošg
 = 
mProg»ssLi¡’”
.
	`»pÜtProg»ss
(

155 
pos
 * 1.0 / 
mFeSize
);

156 ià(!
k“pGošg
) {

161 ià(
bufãrOff£t
 > 0) {

164 
i
 = 0; i < 12 - 
bufãrOff£t
; i++)

165 
bufãr
[
i
] = bufãr[
bufãrOff£t
 + i];

166 
pos
 +ğ
bufãrOff£t
;

167 
off£t
 = 12 - 
bufãrOff£t
;

172 
mpgV”siÚ
 = 0;

173 ià(
bufãr
[1] == -6 || buffer[1] == -5) {

174 
mpgV”siÚ
 = 1;

175 } ià(
bufãr
[1] == -14 || buffer[1] == -13) {

176 
mpgV”siÚ
 = 2;

178 
bufãrOff£t
 = 1;

179 
i
 = 0; i < 12 - 
bufãrOff£t
; i++)

180 
bufãr
[
i
] = bufãr[
bufãrOff£t
 + i];

181 
pos
 +ğ
bufãrOff£t
;

182 
off£t
 = 12 - 
bufãrOff£t
;

187 
b™R©e
;

188 
§m¶eR©e
;

189 ià(
mpgV”siÚ
 == 1) {

191 
b™R©e
 = 
BITRATES_MPEG1_L3
[(
bufãr
[2] & 0xF0) >> 4];

192 
§m¶eR©e
 = 
SAMPLERATES_MPEG1_L3
[(
bufãr
[2] & 0x0C) >> 2];

195 
b™R©e
 = 
BITRATES_MPEG2_L3
[(
bufãr
[2] & 0xF0) >> 4];

196 
§m¶eR©e
 = 
SAMPLERATES_MPEG2_L3
[(
bufãr
[2] & 0x0C) >> 2];

199 ià(
b™R©e
 =ğ0 || 
§m¶eR©e
 == 0) {

200 
bufãrOff£t
 = 2;

201 
i
 = 0; i < 12 - 
bufãrOff£t
; i++)

202 
bufãr
[
i
] = bufãr[
bufãrOff£t
 + i];

203 
pos
 +ğ
bufãrOff£t
;

204 
off£t
 = 12 - 
bufãrOff£t
;

209 
mGlob®Sam¶eR©e
 = 
§m¶eR©e
;

210 
·ddšg
 = (
bufãr
[2] & 2) >> 1;

211 
äameL’
 = 144 * 
b™R©e
 * 1000 / 
§m¶eR©e
 + 
·ddšg
;

213 
gaš
;

214 ià((
bufãr
[3] & 0xC0) == 0xC0) {

216 
mGlob®ChªÃls
 = 1;

217 ià(
mpgV”siÚ
 == 1) {

218 
gaš
 = ((
bufãr
[10] & 0x01) << 7) +

219 ((
bufãr
[11] & 0xFE) >> 1);

221 
gaš
 = ((
bufãr
[9] & 0x03) << 6) +

222 ((
bufãr
[10] & 0xFC) >> 2);

226 
mGlob®ChªÃls
 = 2;

227 ià(
mpgV”siÚ
 == 1) {

228 
gaš
 = ((
bufãr
[9] & 0x7F) << 1) +

229 ((
bufãr
[10] & 0x80) >> 7);

231 
gaš
 = 0;

235 
mB™¿‹Sum
 +ğ
b™R©e
;

237 
mF¿meOff£ts
[
mNumF¿mes
] = 
pos
;

238 
mF¿meL’s
[
mNumF¿mes
] = 
äameL’
;

239 
mF¿meGašs
[
mNumF¿mes
] = 
gaš
;

240 ià(
gaš
 < 
mMšGaš
)

241 
mMšGaš
 = 
gaš
;

242 ià(
gaš
 > 
mMaxGaš
)

243 
mMaxGaš
 = 
gaš
;

245 
mNumF¿mes
++;

246 ià(
mNumF¿mes
 =ğ
mMaxF¿mes
) {

254 
mAvgB™R©e
 = 
mB™¿‹Sum
 / 
mNumF¿mes
;

255 
tÙ®F¿mesGuess
 =

256 ((
mFeSize
 / 
mAvgB™R©e
è* 
§m¶eR©e
) / 144000;

257 
ÃwMaxF¿mes
 = 
tÙ®F¿mesGuess
 * 11 / 10;

258 ià(
ÃwMaxF¿mes
 < 
mMaxF¿mes
 * 2)

259 
ÃwMaxF¿mes
 = 
mMaxF¿mes
 * 2;

261 [] 
ÃwOff£ts
 = 
Ãw
 [
ÃwMaxF¿mes
];

262 [] 
ÃwL’s
 = 
Ãw
 [
ÃwMaxF¿mes
];

263 [] 
ÃwGašs
 = 
Ãw
 [
ÃwMaxF¿mes
];

264 
i
 = 0; i < 
mNumF¿mes
; i++) {

265 
ÃwOff£ts
[
i
] = 
mF¿meOff£ts
[i];

266 
ÃwL’s
[
i
] = 
mF¿meL’s
[i];

267 
ÃwGašs
[
i
] = 
mF¿meGašs
[i];

269 
mF¿meOff£ts
 = 
ÃwOff£ts
;

270 
mF¿meL’s
 = 
ÃwL’s
;

271 
mF¿meGašs
 = 
ÃwGašs
;

272 
mMaxF¿mes
 = 
ÃwMaxF¿mes
;

275 
¡»am
.
	`sk
(
äameL’
 - 12);

276 
pos
 +ğ
äameL’
;

277 
off£t
 = 0;

281 ià(
mNumF¿mes
 > 0)

282 
mAvgB™R©e
 = 
mB™¿‹Sum
 / 
mNumF¿mes
;

284 
mAvgB™R©e
 = 0;

285 
	}
}

287 
public
 
	$Wr™eFe
(
Fe
 
ouutFe
, 
¡¬tF¿me
, 
numF¿mes
)

288 
throws
 
java
.
io
.
IOExû±iÚ
 {

289 
ouutFe
.
	`ü—‹NewFe
();

290 
FeIÅutSŒ—m
 
š
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

291 
FeOuutSŒ—m
 
out
 = 
Ãw
 
	`FeOuutSŒ—m
(
ouutFe
);

292 
maxF¿meL’
 = 0;

293 
i
 = 0; i < 
numF¿mes
; i++) {

294 ià(
mF¿meL’s
[
¡¬tF¿me
 + 
i
] > 
maxF¿meL’
)

295 
maxF¿meL’
 = 
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

297 
by‹
[] 
bufãr
 = 
Ãw
 by‹[
maxF¿meL’
];

298 
pos
 = 0;

299 
i
 = 0; i < 
numF¿mes
; i++) {

300 
sk
 = 
mF¿meOff£ts
[
¡¬tF¿me
 + 
i
] - 
pos
;

301 
Ën
 = 
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

302 ià(
sk
 > 0) {

303 
š
.
	`sk
(
sk
);

304 
pos
 +ğ
sk
;

306 
š
.
	`»ad
(
bufãr
, 0, 
Ën
);

307 
out
.
	`wr™e
(
bufãr
, 0, 
Ën
);

308 
pos
 +ğ
Ën
;

310 
š
.
	`şo£
();

311 
out
.
	`şo£
();

312 
	}
}

314 
´iv©e
 
	gBITRATES_MPEG1_L3
[] = {

317 
´iv©e
 
	gBITRATES_MPEG2_L3
[] = {

320 
´iv©e
 
	gSAMPLERATES_MPEG1_L3
[] = {

322 
´iv©e
 
	gSAMPLERATES_MPEG2_L3
[] = {

	@src/com/ringdroid/soundfile/CheapSoundFile.java

17 
·ckage
 
	gcom
.
	gršgdroid
.
	gsoundfe
;

19 
impÜt
 
	gjava
.
	gio
.
	gFe
;

20 
impÜt
 
	gjava
.
	gio
.
	gFeIÅutSŒ—m
;

21 
impÜt
 
	gjava
.
	g£cur™y
.
	gMes§geDige¡
;

22 
impÜt
 
	gjava
.
	gut
.
	gA¼ayLi¡
;

23 
impÜt
 
	gjava
.
	gut
.
	gHashM­
;

40 
public
 cÏs 
	cCh—pSoundFe
 {

41 
public
 
š‹rçû
 
	mProg»ssLi¡’”
 {

47 
boŞ—n
 
»pÜtProg»ss
(
äaùiÚCom¶‘e
);

50 
public
 
š‹rçû
 
	gFaùÜy
 {

51 
public
 
Ch—pSoundFe
 
ü—‹
();

52 
public
 
	gSŒšg
[] 
g‘SuµÜ‹dEx‹nsiÚs
();

55 
	gFaùÜy
[] 
	gsSubşassFaùÜ›s
 = 
Ãw
 
FaùÜy
[] {

56 
Ch—pAAC
.
g‘FaùÜy
(),

57 
Ch—pAMR
.
g‘FaùÜy
(),

58 
Ch—pMP3
.
g‘FaùÜy
(),

59 
Ch—pWAV
.
g‘FaùÜy
(),

62 
	gA¼ayLi¡
<
	gSŒšg
> 
	gsSuµÜ‹dEx‹nsiÚs
 = 
Ãw
 
A¼ayLi¡
<
SŒšg
>();

63 
	gHashM­
<
	gSŒšg
, 
	gFaùÜy
> 
	gsEx‹nsiÚM­
 =

64 
Ãw
 
HashM­
<
SŒšg
, 
	gFaùÜy
>();

67 
FaùÜy
 
	gf
 : 
sSubşassFaùÜ›s
) {

68 
SŒšg
 
ex‹nsiÚ
 : 
f
.
g‘SuµÜ‹dEx‹nsiÚs
()) {

69 
sSuµÜ‹dEx‹nsiÚs
.
add
(
ex‹nsiÚ
);

70 
	gsEx‹nsiÚM­
.
put
(
ex‹nsiÚ
, 
f
);

81 
public
 
Ch—pSoundFe
 
	$ü—‹
(
SŒšg
 
feName
,

82 
Prog»ssLi¡’”
 
´og»ssLi¡’”
)

83 
throws
 
java
.
io
.
FeNÙFoundExû±iÚ
,

84 
java
.
io
.
IOExû±iÚ
 {

85 
Fe
 
f
 = 
Ãw
 
	`Fe
(
feName
);

86 ià(!
f
.
	`exi¡s
()) {

87 
throw
 
Ãw
 
java
.
io
.
	`FeNÙFoundExû±iÚ
(
feName
);

89 
SŒšg
 
Çme
 = 
f
.
	`g‘Name
().
	`toLow”Ca£
();

90 
SŒšg
[] 
compÚ’ts
 = 
Çme
.
	`¥l™
("\\.");

91 ià(
compÚ’ts
.
Ëngth
 < 2) {

92  
nuÎ
;

94 
FaùÜy
 
çùÜy
 = 
sEx‹nsiÚM­
.
	`g‘
(
compÚ’ts
[compÚ’ts.
Ëngth
 - 1]);

95 ià(
çùÜy
 =ğ
nuÎ
) {

96  
nuÎ
;

98 
Ch—pSoundFe
 
soundFe
 = 
çùÜy
.
	`ü—‹
();

99 
soundFe
.
	`£tProg»ssLi¡’”
(
´og»ssLi¡’”
);

100 
soundFe
.
	`R—dFe
(
f
);

101  
soundFe
;

102 
	}
}

104 
public
 
boŞ—n
 
	$isF’ameSuµÜ‹d
(
SŒšg
 
f’ame
) {

105 
SŒšg
[] 
compÚ’ts
 = 
f’ame
.
	`toLow”Ca£
().
	`¥l™
("\\.");

106 ià(
compÚ’ts
.
Ëngth
 < 2) {

107  
çl£
;

109  
sEx‹nsiÚM­
.
	`cÚšsKey
(
compÚ’ts
[compÚ’ts.
Ëngth
 - 1]);

110 
	}
}

116 
public
 
	gSŒšg
[] 
	$g‘SuµÜ‹dEx‹nsiÚs
() {

117  
sSuµÜ‹dEx‹nsiÚs
.
	`toA¼ay
(

118 
Ãw
 
SŒšg
[
sSuµÜ‹dEx‹nsiÚs
.
	`size
()]);

119 
	}
}

121 
´Ùeùed
 
Prog»ssLi¡’”
 
	gmProg»ssLi¡’”
 = 
nuÎ
;

122 
´Ùeùed
 
Fe
 
	gmIÅutFe
 = 
nuÎ
;

124 
´Ùeùed
 
	$Ch—pSoundFe
() {

125 
	}
}

127 
public
 
	$R—dFe
(
Fe
 
šputFe
)

128 
throws
 
java
.
io
.
FeNÙFoundExû±iÚ
,

129 
java
.
io
.
IOExû±iÚ
 {

130 
mIÅutFe
 = 
šputFe
;

131 
	}
}

133 
public
 
	$£tProg»ssLi¡’”
(
Prog»ssLi¡’”
 
´og»ssLi¡’”
) {

134 
mProg»ssLi¡’”
 = 
´og»ssLi¡’”
;

135 
	}
}

137 
public
 
	$g‘NumF¿mes
() {

139 
	}
}

141 
public
 
	$g‘Sam¶esP”F¿me
() {

143 
	}
}

145 
public
 [] 
	$g‘F¿meOff£ts
() {

146  
nuÎ
;

147 
	}
}

149 
public
 [] 
	$g‘F¿meL’s
() {

150  
nuÎ
;

151 
	}
}

153 
public
 [] 
	$g‘F¿meGašs
() {

154  
nuÎ
;

155 
	}
}

157 
public
 
	$g‘FeSizeBy‹s
() {

159 
	}
}

161 
public
 
	$g‘AvgB™¿‹Kbps
() {

163 
	}
}

165 
public
 
	$g‘Sam¶eR©e
() {

167 
	}
}

169 
public
 
	$g‘ChªÃls
() {

171 
	}
}

173 
public
 
SŒšg
 
	$g‘F‘y³
() {

175 
	}
}

183 
public
 
	$g‘S“kabËF¿meOff£t
(
äame
) {

185 
	}
}

187 
´iv©e
 
fš®
 [] 
	gHEX_CHARS
 = {

190 
public
 
SŒšg
 
	$by‹sToHex
 (
by‹
 
hash
[]) {

191 
buf
[] = 
Ãw
 [
hash
.
Ëngth
 * 2];

192 
i
 = 0, 
x
 = 0; i < 
hash
.
Ëngth
; i++) {

193 
buf
[
x
++] = 
HEX_CHARS
[(
hash
[
i
] >>> 4) & 0xf];

194 
buf
[
x
++] = 
HEX_CHARS
[
hash
[
i
] & 0xf];

196  
Ãw
 
	`SŒšg
(
buf
);

197 
	}
}

199 
public
 
SŒšg
 
	$compu‹Md5OfFœ¡10F¿mes
()

200 
throws
 
java
.
io
.
FeNÙFoundExû±iÚ
,

201 
java
.
io
.
IOExû±iÚ
,

202 
java
.
£cur™y
.
NoSuchAlgÜ™hmExû±iÚ
 {

203 [] 
äameOff£ts
 = 
	`g‘F¿meOff£ts
();

204 [] 
äameL’s
 = 
	`g‘F¿meL’s
();

205 
numF¿mes
 = 
äameL’s
.
Ëngth
;

206 ià(
numF¿mes
 > 10) {

207 
numF¿mes
 = 10;

210 
Mes§geDige¡
 
dige¡
 = 
java
.
£cur™y
.Mes§geDige¡.
	`g‘In¡ªû
("MD5");

211 
FeIÅutSŒ—m
 
š
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

212 
pos
 = 0;

213 
i
 = 0; i < 
numF¿mes
; i++) {

214 
sk
 = 
äameOff£ts
[
i
] - 
pos
;

215 
Ën
 = 
äameL’s
[
i
];

216 ià(
sk
 > 0) {

217 
š
.
	`sk
(
sk
);

218 
pos
 +ğ
sk
;

220 
by‹
[] 
bufãr
 = 
Ãw
 by‹[
Ën
];

221 
š
.
	`»ad
(
bufãr
, 0, 
Ën
);

222 
dige¡
.
	`upd©e
(
bufãr
);

223 
pos
 +ğ
Ën
;

225 
š
.
	`şo£
();

226 
by‹
[] 
hash
 = 
dige¡
.
	`dige¡
();

227  
	`by‹sToHex
(
hash
);

228 
	}
}

230 
public
 
	$Wr™eFe
(
Fe
 
ouutFe
, 
¡¬tF¿me
, 
numF¿mes
)

231 
throws
 
java
.
io
.
IOExû±iÚ
 {

232 
	}
}

	@src/com/ringdroid/soundfile/CheapWAV.java

17 
·ckage
 
	gcom
.
	gršgdroid
.
	gsoundfe
;

19 
impÜt
 
	gjava
.
	gio
.
	gFe
;

20 
impÜt
 
	gjava
.
	gio
.
	gFeIÅutSŒ—m
;

21 
impÜt
 
	gjava
.
	gio
.
	gFeOuutSŒ—m
;

22 
impÜt
 
	gjava
.
	gio
.
	gIÅutSŒ—m
;

29 
public
 cÏs 
	cCh—pWAV
 
ex‹nds
 
	mCh—pSoundFe
 {

30 
public
 
FaùÜy
 
	$g‘FaùÜy
() {

31  
Ãw
 
	`FaùÜy
() {

32 
public
 
Ch—pSoundFe
 
	`ü—‹
() {

33  
Ãw
 
	`Ch—pWAV
();

35 
public
 
SŒšg
[] 
	`g‘SuµÜ‹dEx‹nsiÚs
() {

36  
Ãw
 
SŒšg
[] { "wav" };

42 
´iv©e
 
mNumF¿mes
;

43 
´iv©e
 [] 
mF¿meOff£ts
;

44 
´iv©e
 [] 
mF¿meL’s
;

45 
´iv©e
 [] 
mF¿meGašs
;

46 
´iv©e
 
mF¿meBy‹s
;

47 
´iv©e
 
mFeSize
;

48 
´iv©e
 
mSam¶eR©e
;

49 
´iv©e
 
mChªÃls
;

51 
´iv©e
 
mOff£t
;

53 
public
 
	$Ch—pWAV
() {

54 
	}
}

56 
public
 
	$g‘NumF¿mes
() {

57  
mNumF¿mes
;

58 
	}
}

60 
public
 
	$g‘Sam¶esP”F¿me
() {

61  
mSam¶eR©e
 / 50;

62 
	}
}

64 
public
 [] 
	$g‘F¿meOff£ts
() {

65  
mF¿meOff£ts
;

66 
	}
}

68 
public
 [] 
	$g‘F¿meL’s
() {

69  
mF¿meL’s
;

70 
	}
}

72 
public
 [] 
	$g‘F¿meGašs
() {

73  
mF¿meGašs
;

74 
	}
}

76 
public
 
	$g‘FeSizeBy‹s
() {

77  
mFeSize
;

78 
	}
}

80 
public
 
	$g‘AvgB™¿‹Kbps
() {

81  
mSam¶eR©e
 * 
mChªÃls
 * 2 / 1024;

82 
	}
}

84 
public
 
	$g‘Sam¶eR©e
() {

85  
mSam¶eR©e
;

86 
	}
}

88 
public
 
	$g‘ChªÃls
() {

89  
mChªÃls
;

90 
	}
}

92 
public
 
SŒšg
 
	$g‘F‘y³
() {

94 
	}
}

96 
public
 
	$R—dFe
(
Fe
 
šputFe
)

97 
throws
 
java
.
io
.
FeNÙFoundExû±iÚ
,

98 
java
.
io
.
IOExû±iÚ
 {

99 
su³r
.
	`R—dFe
(
šputFe
);

100 
mFeSize
 = ()
mIÅutFe
.
	`Ëngth
();

102 ià(
mFeSize
 < 128) {

103 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
("Fileoo smallo…arse");

106 
FeIÅutSŒ—m
 
¡»am
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

107 
by‹
[] 
h—d”
 = 
Ãw
 byte[12];

108 
¡»am
.
	`»ad
(
h—d”
, 0, 12);

109 
mOff£t
 += 12;

110 ià(
h—d”
[0] != 'R' ||

111 
h—d”
[1] != 'I' ||

112 
h—d”
[2] != 'F' ||

113 
h—d”
[3] != 'F' ||

114 
h—d”
[8] != 'W' ||

115 
h—d”
[9] != 'A' ||

116 
h—d”
[10] != 'V' ||

117 
h—d”
[11] != 'E') {

118 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
("Not‡ WAV file");

121 
mChªÃls
 = 0;

122 
mSam¶eR©e
 = 0;

123 
mOff£t
 + 8 <ğ
mFeSize
) {

124 
by‹
[] 
chunkH—d”
 = 
Ãw
 byte[8];

125 
¡»am
.
	`»ad
(
chunkH—d”
, 0, 8);

126 
mOff£t
 += 8;

128 
chunkL’
 =

129 ((0xfà& 
chunkH—d”
[7]) << 24) |

130 ((0xfà& 
chunkH—d”
[6]) << 16) |

131 ((0xfà& 
chunkH—d”
[5]) << 8) |

132 ((0xfà& 
chunkH—d”
[4]));

134 ià(
chunkH—d”
[0] == 'f' &&

135 
chunkH—d”
[1] == 'm' &&

136 
chunkH—d”
[2] == 't' &&

137 
chunkH—d”
[3] == ' ') {

138 ià(
chunkL’
 < 16 || chunkLen > 1024) {

139 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
(

143 
by‹
[] 
fmt
 = 
Ãw
 by‹[
chunkL’
];

144 
¡»am
.
	`»ad
(
fmt
, 0, 
chunkL’
);

145 
mOff£t
 +ğ
chunkL’
;

147 
fÜm©
 =

148 ((0xfà& 
fmt
[1]) << 8) |

149 ((0xfà& 
fmt
[0]));

150 
mChªÃls
 =

151 ((0xfà& 
fmt
[3]) << 8) |

152 ((0xfà& 
fmt
[2]));

153 
mSam¶eR©e
 =

154 ((0xfà& 
fmt
[7]) << 24) |

155 ((0xfà& 
fmt
[6]) << 16) |

156 ((0xfà& 
fmt
[5]) << 8) |

157 ((0xfà& 
fmt
[4]));

159 ià(
fÜm©
 != 1) {

160 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
(

164 } ià(
chunkH—d”
[0] == 'd' &&

165 
chunkH—d”
[1] == 'a' &&

166 
chunkH—d”
[2] == 't' &&

167 
chunkH—d”
[3] == 'a') {

168 ià(
mChªÃls
 =ğ0 || 
mSam¶eR©e
 == 0) {

169 
throw
 
Ãw
 
java
.
io
.
	`IOExû±iÚ
(

173 
äameSam¶es
 = (
mSam¶eR©e
 * 
mChªÃls
) / 50;

174 
mF¿meBy‹s
 = 
äameSam¶es
 * 2;

176 
mNumF¿mes
 = (
chunkL’
 + (
mF¿meBy‹s
 - 1)) / mFrameBytes;

177 
mF¿meOff£ts
 = 
Ãw
 [
mNumF¿mes
];

178 
mF¿meL’s
 = 
Ãw
 [
mNumF¿mes
];

179 
mF¿meGašs
 = 
Ãw
 [
mNumF¿mes
];

181 
by‹
[] 
ÚeF¿me
 = 
Ãw
 by‹[
mF¿meBy‹s
];

183 
i
 = 0;

184 
äameIndex
 = 0;

185 
i
 < 
chunkL’
) {

186 
ÚeF¿meBy‹s
 = 
mF¿meBy‹s
;

187 ià(
i
 + 
ÚeF¿meBy‹s
 > 
chunkL’
) {

188 
i
 = 
chunkL’
 - 
ÚeF¿meBy‹s
;

191 
¡»am
.
	`»ad
(
ÚeF¿me
, 0, 
ÚeF¿meBy‹s
);

193 
maxGaš
 = 0;

194 
j
 = 1; j < 
ÚeF¿meBy‹s
; j +ğ4 * 
mChªÃls
) {

195 
v®
 = 
java
.
Ïng
.
M©h
.
	`abs
(
ÚeF¿me
[
j
]);

196 ià(
v®
 > 
maxGaš
) {

197 
maxGaš
 = 
v®
;

201 
mF¿meOff£ts
[
äameIndex
] = 
mOff£t
;

202 
mF¿meL’s
[
äameIndex
] = 
ÚeF¿meBy‹s
;

203 
mF¿meGašs
[
äameIndex
] = 
maxGaš
;

205 
äameIndex
++;

206 
mOff£t
 +ğ
ÚeF¿meBy‹s
;

207 
i
 +ğ
ÚeF¿meBy‹s
;

209 ià(
mProg»ssLi¡’”
 !ğ
nuÎ
) {

210 
boŞ—n
 
k“pGošg
 = 
mProg»ssLi¡’”
.
	`»pÜtProg»ss
(

211 
i
 * 1.0 / 
chunkL’
);

212 ià(!
k“pGošg
) {

219 
¡»am
.
	`sk
(
chunkL’
);

220 
mOff£t
 +ğ
chunkL’
;

223 
	}
}

225 
public
 
	$Wr™eFe
(
Fe
 
ouutFe
, 
¡¬tF¿me
, 
numF¿mes
)

226 
throws
 
java
.
io
.
IOExû±iÚ
 {

227 
ouutFe
.
	`ü—‹NewFe
();

228 
FeIÅutSŒ—m
 
š
 = 
Ãw
 
	`FeIÅutSŒ—m
(
mIÅutFe
);

229 
FeOuutSŒ—m
 
out
 = 
Ãw
 
	`FeOuutSŒ—m
(
ouutFe
);

231 
tÙ®AudioL’
 = 0;

232 
i
 = 0; i < 
numF¿mes
; i++) {

233 
tÙ®AudioL’
 +ğ
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

236 
tÙ®D©aL’
 = 
tÙ®AudioL’
 + 36;

237 
lÚgSam¶eR©e
 = 
mSam¶eR©e
;

238 
by‹R©e
 = 
mSam¶eR©e
 * 2 * 
mChªÃls
;

240 
by‹
[] 
h—d”
 = 
Ãw
 byte[44];

241 
h—d”
[0] = 'R';

242 
h—d”
[1] = 'I';

243 
h—d”
[2] = 'F';

244 
h—d”
[3] = 'F';

245 
h—d”
[4] = (
by‹
è(
tÙ®D©aL’
 & 0xff);

246 
h—d”
[5] = (
by‹
è((
tÙ®D©aL’
 >> 8) & 0xff);

247 
h—d”
[6] = (
by‹
è((
tÙ®D©aL’
 >> 16) & 0xff);

248 
h—d”
[7] = (
by‹
è((
tÙ®D©aL’
 >> 24) & 0xff);

249 
h—d”
[8] = 'W';

250 
h—d”
[9] = 'A';

251 
h—d”
[10] = 'V';

252 
h—d”
[11] = 'E';

253 
h—d”
[12] = 'f';

254 
h—d”
[13] = 'm';

255 
h—d”
[14] = 't';

256 
h—d”
[15] = ' ';

257 
h—d”
[16] = 16;

258 
h—d”
[17] = 0;

259 
h—d”
[18] = 0;

260 
h—d”
[19] = 0;

261 
h—d”
[20] = 1;

262 
h—d”
[21] = 0;

263 
h—d”
[22] = (
by‹
è
mChªÃls
;

264 
h—d”
[23] = 0;

265 
h—d”
[24] = (
by‹
è(
lÚgSam¶eR©e
 & 0xff);

266 
h—d”
[25] = (
by‹
è((
lÚgSam¶eR©e
 >> 8) & 0xff);

267 
h—d”
[26] = (
by‹
è((
lÚgSam¶eR©e
 >> 16) & 0xff);

268 
h—d”
[27] = (
by‹
è((
lÚgSam¶eR©e
 >> 24) & 0xff);

269 
h—d”
[28] = (
by‹
è(
by‹R©e
 & 0xff);

270 
h—d”
[29] = (
by‹
è((
by‹R©e
 >> 8) & 0xff);

271 
h—d”
[30] = (
by‹
è((
by‹R©e
 >> 16) & 0xff);

272 
h—d”
[31] = (
by‹
è((
by‹R©e
 >> 24) & 0xff);

273 
h—d”
[32] = (
by‹
è(2 * 
mChªÃls
);

274 
h—d”
[33] = 0;

275 
h—d”
[34] = 16;

276 
h—d”
[35] = 0;

277 
h—d”
[36] = 'd';

278 
h—d”
[37] = 'a';

279 
h—d”
[38] = 't';

280 
h—d”
[39] = 'a';

281 
h—d”
[40] = (
by‹
è(
tÙ®AudioL’
 & 0xff);

282 
h—d”
[41] = (
by‹
è((
tÙ®AudioL’
 >> 8) & 0xff);

283 
h—d”
[42] = (
by‹
è((
tÙ®AudioL’
 >> 16) & 0xff);

284 
h—d”
[43] = (
by‹
è((
tÙ®AudioL’
 >> 24) & 0xff);

285 
out
.
	`wr™e
(
h—d”
, 0, 44);

287 
by‹
[] 
bufãr
 = 
Ãw
 by‹[
mF¿meBy‹s
];

288 
pos
 = 0;

289 
i
 = 0; i < 
numF¿mes
; i++) {

290 
sk
 = 
mF¿meOff£ts
[
¡¬tF¿me
 + 
i
] - 
pos
;

291 
Ën
 = 
mF¿meL’s
[
¡¬tF¿me
 + 
i
];

292 ià(
sk
 < 0) {

295 ià(
sk
 > 0) {

296 
š
.
	`sk
(
sk
);

297 
pos
 +ğ
sk
;

299 
š
.
	`»ad
(
bufãr
, 0, 
Ën
);

300 
out
.
	`wr™e
(
bufãr
, 0, 
Ën
);

301 
pos
 +ğ
Ën
;

304 
š
.
	`şo£
();

305 
out
.
	`şo£
();

306 
	}
}

	@
1
.
1
/usr/include
16
640
gen/com/ringdroid/BuildConfig.java
gen/com/ringdroid/R.java
src/com/ringdroid/AfterSaveActionDialog.java
src/com/ringdroid/ChooseContactActivity.java
src/com/ringdroid/FileSaveDialog.java
src/com/ringdroid/MarkerView.java
src/com/ringdroid/RingdroidEditActivity.java
src/com/ringdroid/RingdroidSelectActivity.java
src/com/ringdroid/SeekTest.java
src/com/ringdroid/SongMetadataReader.java
src/com/ringdroid/WaveformView.java
src/com/ringdroid/soundfile/CheapAAC.java
src/com/ringdroid/soundfile/CheapAMR.java
src/com/ringdroid/soundfile/CheapMP3.java
src/com/ringdroid/soundfile/CheapSoundFile.java
src/com/ringdroid/soundfile/CheapWAV.java
